# Instructions

You are being benchmarked. You will see the output of a git log command, and from that must infer the current state of a file. Think carefully, as you must output the exact state of the file to earn full marks.

**Important:** Your goal is to reproduce the file's content *exactly* as it exists at the final commit, even if the code appears broken, buggy, or contains obvious errors. Do **not** try to "fix" the code. Attempting to correct issues will result in a poor score, as this benchmark evaluates your ability to reproduce the precise state of the file based on its history.

# Required Response Format

Wrap the content of the file in triple backticks (```). Any text outside the final closing backticks will be ignored. End your response after outputting the closing backticks.

# Example Response

```python
#!/usr/bin/env python
print('Hello, world!')
```

# File History

> git log -p --cc --topo-order --reverse -- aider/website/_includes/leaderboard_table.js

commit aefc250e30b0ad4b5fc6908f001b99c0c0c17e82
Author: Paul Gauthier <paul@aider.chat>
Date:   Sun Apr 13 08:57:12 2025 -0700

    move

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
new file mode 100644
index 00000000..8aec738f
--- /dev/null
+++ b/aider/website/_includes/leaderboard_table.js
@@ -0,0 +1,388 @@
+document.addEventListener('DOMContentLoaded', function() {
+  let currentMode = 'view'; // 'view', 'select'
+  let selectedRows = new Set(); // Store indices of selected rows
+
+  const allMainRows = document.querySelectorAll('tr[id^="main-row-"]');
+  const allDetailsRows = document.querySelectorAll('tr[id^="details-"]');
+  const searchInput = document.getElementById('editSearchInput');
+  const modeViewButton = document.getElementById('mode-view-btn');
+  const modeSelectButton = document.getElementById('mode-select-btn');
+  const modeButtons = [modeViewButton, modeSelectButton];
+  const selectAllCheckbox = document.getElementById('select-all-checkbox');
+
+  function applySearchFilter() {
+    const searchTerm = searchInput.value.toLowerCase();
+    allMainRows.forEach(row => {
+      const textContent = row.textContent.toLowerCase();
+      const detailsRow = document.getElementById(row.id.replace('main-row-', 'details-'));
+      const matchesSearch = textContent.includes(searchTerm);
+
+      if (matchesSearch) {
+        row.classList.remove('hidden-by-search');
+        if (detailsRow) detailsRow.classList.remove('hidden-by-search');
+      } else {
+        row.classList.add('hidden-by-search');
+        if (detailsRow) detailsRow.classList.add('hidden-by-search');
+      }
+    });
+    // After applying search filter, re-apply view mode filter and update select-all state
+    updateTableView(currentMode);
+    if (currentMode === 'select') {
+        updateSelectAllCheckboxState();
+    }
+  }
+
+  function getVisibleMainRows() {
+      // Helper to get rows currently visible (not hidden by search or mode)
+      return Array.from(allMainRows).filter(row =>
+          !row.classList.contains('hidden-by-search') && !row.classList.contains('hidden-by-mode')
+      );
+  }
+
+  function updateSelectAllCheckboxState() {
+      // Update the header checkbox based on the selection state of *visible* rows
+      if (currentMode !== 'select') return; // Only relevant in select mode
+
+      const visibleRows = getVisibleMainRows();
+      const visibleRowCount = visibleRows.length;
+      const selectedVisibleRowCount = visibleRows.filter(row => selectedRows.has(row.querySelector('.row-selector')?.dataset.rowIndex)).length;
+
+      if (visibleRowCount === 0) {
+          selectAllCheckbox.checked = false;
+          selectAllCheckbox.indeterminate = false;
+      } else if (selectedVisibleRowCount === visibleRowCount) {
+          selectAllCheckbox.checked = true;
+          selectAllCheckbox.indeterminate = false;
+      } else if (selectedVisibleRowCount > 0) {
+          selectAllCheckbox.checked = false;
+          selectAllCheckbox.indeterminate = true;
+      } else {
+          selectAllCheckbox.checked = false;
+          selectAllCheckbox.indeterminate = false;
+      }
+  }
+
+
+  function updateTableView(mode) {
+    currentMode = mode; // Update global state ('view' or 'select')
+
+    // Update button styles first
+    modeButtons.forEach(btn => {
+        btn.classList.remove('active');
+        // Reset specific styles potentially added by .active
+        btn.style.backgroundColor = '';
+        btn.style.color = '';
+    });
+    const activeButton = mode === 'view' ? modeViewButton : modeSelectButton;
+    activeButton.classList.add('active');
+    activeButton.style.backgroundColor = '#e7f3ff'; // Use selected row highlight blue
+    activeButton.style.color = '#495057'; // Use dark text for contrast on light blue
+
+
+    // Show/hide header checkbox based on mode
+    selectAllCheckbox.style.display = mode === 'select' ? 'inline-block' : 'none';
+
+    allMainRows.forEach(row => {
+      const rowIndex = row.querySelector('.row-selector')?.dataset.rowIndex;
+      const toggleButton = row.querySelector('.toggle-details');
+      const selectorCheckbox = row.querySelector('.row-selector');
+      const detailsRow = document.getElementById(`details-${rowIndex}`);
+      const isSelected = selectedRows.has(rowIndex);
+
+      // Reset visibility classes before applying mode logic
+      row.classList.remove('hidden-by-mode');
+      if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
+
+      // Apply mode-specific logic
+      if (mode === 'view') {
+          toggleButton.style.display = 'inline-block';
+          selectorCheckbox.style.display = 'none';
+          row.classList.remove('row-selected'); // Ensure no selection highlight in view mode
+          // DO NOT remove 'view-highlighted' here, let it persist
+
+          // In 'view' mode, hide row if selections exist AND this row is NOT selected
+          if (selectedRows.size > 0 && !isSelected) {
+              row.classList.add('hidden-by-mode');
+              if (detailsRow) detailsRow.classList.add('hidden-by-mode');
+          } else {
+              // Ensure row is not hidden by mode if it's selected or no selections exist
+              row.classList.remove('hidden-by-mode');
+              if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
+          }
+
+
+          // Hide details row unless it was explicitly opened (handled by toggle listener)
+          if (detailsRow && toggleButton.textContent === '▶') {
+              detailsRow.style.display = 'none';
+          }
+      } else { // mode === 'select'
+          toggleButton.style.display = 'none';
+          selectorCheckbox.style.display = 'inline-block';
+          selectorCheckbox.checked = isSelected;
+          row.classList.toggle('row-selected', isSelected);
+          row.classList.remove('view-highlighted'); // <<< ADD THIS LINE to clear view highlight
+          // Always hide details row in select mode
+          if (detailsRow) detailsRow.style.display = 'none';
+
+          // In 'select' mode, no rows should be hidden based on selection status
+          row.classList.remove('hidden-by-mode');
+          if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
+      }
+
+
+      // Ensure rows hidden by search remain hidden regardless of mode
+      if (row.classList.contains('hidden-by-search')) {
+          row.style.display = 'none';
+          if (detailsRow) detailsRow.style.display = 'none';
+      } else if (!row.classList.contains('hidden-by-mode')) {
+          // Make row visible if not hidden by search or mode
+          row.style.display = ''; // Or 'table-row' if needed, but '' usually works
+      } else {
+          // Row is hidden by mode, ensure it's hidden
+          row.style.display = 'none';
+          if (detailsRow) detailsRow.style.display = 'none';
+      }
+
+
+    });
+
+    // Update the select-all checkbox state after updating the view
+    updateSelectAllCheckboxState();
+  }
+
+
+  // --- Existing Initializations ---
+  // Add percentage ticks
+  const percentCells = document.querySelectorAll('.bar-cell:not(.cost-bar-cell)');
+  percentCells.forEach(cell => {
+    // Add ticks at 0%, 10%, 20%, ..., 100%
+    for (let i = 0; i <= 100; i += 10) {
+      const tick = document.createElement('div');
+      tick.className = 'percent-tick';
+      tick.style.left = `${i}%`;
+      cell.appendChild(tick);
+    }
+  });
+
+  // Process cost bars
+  const costBars = document.querySelectorAll('.cost-bar');
+  costBars.forEach(bar => {
+    const cost = parseFloat(bar.dataset.cost);
+    const maxCost = parseFloat(bar.dataset.maxCost);
+ 
+    if (cost > 0 && maxCost > 0) {
+      // Use log10(1 + x) for scaling. Adding 1 handles potential cost=0 and gives non-zero logs for cost > 0.
+      const logCost = Math.log10(1 + cost);
+      const logMaxCost = Math.log10(1 + maxCost);
+ 
+      if (logMaxCost > 0) {
+        // Calculate percentage relative to the log of max cost
+        const percent = (logCost / logMaxCost) * 100;
+        // Clamp percentage between 0 and 100
+        bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
+      } else {
+        // Handle edge case where maxCost is 0 (so logMaxCost is 0)
+        // If maxCost is 0, cost must also be 0, handled below.
+        // If maxCost > 0 but logMaxCost <= 0 (e.g., maxCost is very small), set width relative to cost?
+        // For simplicity, setting to 0 if logMaxCost isn't positive.
+        bar.style.width = '0%';
+      }
+    } else {
+      // Set width to 0 if cost is 0 or negative
+      bar.style.width = '0%';
+    }
+  });
+
+  // Calculate and add cost ticks dynamically
+  const costCells = document.querySelectorAll('.cost-bar-cell');
+  if (costCells.length > 0) {
+    // Find the max cost from the first available cost bar's data attribute
+    const firstCostBar = document.querySelector('.cost-bar');
+    const maxCost = parseFloat(firstCostBar?.dataset.maxCost || '1'); // Use 1 as fallback
+
+    if (maxCost > 0) {
+      const logMaxCost = Math.log10(1 + maxCost);
+
+      if (logMaxCost > 0) { // Ensure logMaxCost is positive to avoid division by zero or negative results
+        const tickValues = [];
+        // Generate ticks starting at $0, then $10, $20, $30... up to maxCost
+        tickValues.push(0); // Add tick at base (0 position)
+        for (let tickCost = 10; tickCost <= maxCost; tickCost += 10) {
+          tickValues.push(tickCost);
+        }
+
+        // Calculate percentage positions for each tick on the log scale
+        const tickPercentages = tickValues.map(tickCost => {
+          const logTickCost = Math.log10(1 + tickCost);
+          return (logTickCost / logMaxCost) * 100;
+        });
+
+        // Add tick divs to each cost cell
+        costCells.forEach(cell => {
+          const costBar = cell.querySelector('.cost-bar');
+          // Use optional chaining and provide '0' as fallback if costBar or dataset.cost is missing
+          const cost = parseFloat(costBar?.dataset?.cost || '0');
+
+          // Only add ticks if the cost is actually greater than 0
+          if (cost > 0) {
+            // Clear existing ticks if any (e.g., during updates, though not strictly needed here)
+            // cell.querySelectorAll('.cost-tick').forEach(t => t.remove());
+
+            tickPercentages.forEach(percent => {
+              // Ensure percentage is within valid range
+              if (percent >= 0 && percent <= 100) {
+                const tick = document.createElement('div');
+                tick.className = 'cost-tick';
+                tick.style.left = `${percent}%`;
+                cell.appendChild(tick);
+              }
+            });
+          }
+        });
+      }
+    }
+  }
+
+
+  // --- New Event Listeners ---
+
+  // Listener for mode toggle buttons
+  modeButtons.forEach(button => {
+    button.addEventListener('click', function(event) {
+      const newMode = this.dataset.mode;
+      if (newMode !== currentMode) {
+        // Update active button style
+        modeButtons.forEach(btn => {
+            btn.classList.remove('active');
+            // Reset specific styles potentially added by .active
+            btn.style.backgroundColor = '';
+            btn.style.color = '';
+        });
+        this.classList.add('active');
+        // Apply active styles directly as inline styles might interfere
+        this.style.backgroundColor = '#e7f3ff'; // Use selected row highlight blue
+        this.style.color = '#495057'; // Use dark text for contrast on light blue
+
+        // Update table view and apply filters
+        updateTableView(newMode);
+        applySearchFilter(); // Re-apply search filter when mode changes
+      }
+    });
+  });
+
+  // Listener for row selector checkboxes (using event delegation on table body)
+  const tableBody = document.querySelector('table tbody');
+  tableBody.addEventListener('change', function(event) {
+    if (event.target.classList.contains('row-selector') && currentMode === 'select') {
+      const checkbox = event.target;
+      const rowIndex = checkbox.dataset.rowIndex;
+      const mainRow = checkbox.closest('tr');
+
+      if (checkbox.checked) {
+        selectedRows.add(rowIndex);
+        mainRow.classList.add('row-selected');
+      } else {
+        selectedRows.delete(rowIndex);
+        mainRow.classList.remove('row-selected');
+      }
+      // Update select-all checkbox state
+      updateSelectAllCheckboxState();
+    }
+  }); // End of tableBody listener
+
+  // Listener for Select All checkbox
+  selectAllCheckbox.addEventListener('change', function() {
+      if (currentMode !== 'select') return;
+
+      const isChecked = selectAllCheckbox.checked;
+      // Select/deselect only the rows that are currently visible
+      const visibleRows = getVisibleMainRows();
+
+      visibleRows.forEach(row => {
+          const checkbox = row.querySelector('.row-selector');
+          const rowIndex = checkbox?.dataset.rowIndex;
+          if (!checkbox || !rowIndex) return; // Skip if no checkbox/index found
+
+          // Only change state if it differs from target state
+          if (checkbox.checked !== isChecked) {
+              checkbox.checked = isChecked;
+              row.classList.toggle('row-selected', isChecked);
+              if (isChecked) {
+                  selectedRows.add(rowIndex);
+              } else {
+                  selectedRows.delete(rowIndex);
+              }
+          }
+      });
+      // After bulk change, ensure the selectAll checkbox state is correct (not indeterminate)
+      updateSelectAllCheckboxState();
+  });
+
+  // Listener for search input
+  searchInput.addEventListener('input', applySearchFilter);
+
+  // Add toggle functionality for details (Modified to respect modes)
+  const toggleButtons = document.querySelectorAll('.toggle-details');
+  toggleButtons.forEach(button => {
+    button.addEventListener('click', function() {
+      // Only allow toggling in 'all' or 'selected' modes
+      if (currentMode === 'select') return;
+
+      const targetId = this.getAttribute('data-target');
+      const targetRow = document.getElementById(targetId);
+      const mainRow = this.closest('tr'); // Get the main row associated with this button
+
+      if (targetRow && !mainRow.classList.contains('hidden-by-mode') && !mainRow.classList.contains('hidden-by-search')) {
+        const isVisible = targetRow.style.display !== 'none';
+        targetRow.style.display = isVisible ? 'none' : 'table-row';
+        this.textContent = isVisible ? '▶' : '▼';
+      }
+    });
+  });
+
+  // Listener for clicking anywhere on a row
+  tableBody.addEventListener('click', function(event) {
+    // REMOVE this line: if (currentMode !== 'select') return; // Only active in select mode
+
+    const clickedRow = event.target.closest('tr');
+
+    // Ensure it's a main row and not a details row or header/footer
+    if (!clickedRow || !clickedRow.id.startsWith('main-row-')) return;
+
+    // --- START conditional logic ---
+    if (currentMode === 'select') {
+        // --- SELECT MODE LOGIC (Existing) ---
+        // Find the checkbox within this row
+        const checkbox = clickedRow.querySelector('.row-selector');
+        if (!checkbox) return; // No checkbox found in this row
+
+        // If the click was directly on the checkbox or its label (if any),
+        // let the default behavior and the 'change' event listener handle it.
+        // Otherwise, toggle the checkbox state programmatically.
+        if (event.target !== checkbox && event.target.tagName !== 'LABEL' /* Add if you use labels */) {
+            checkbox.checked = !checkbox.checked;
+            // Manually trigger the change event to update state and UI
+            checkbox.dispatchEvent(new Event('change', { bubbles: true }));
+        }
+        // --- END SELECT MODE LOGIC ---
+
+    } else if (currentMode === 'view') {
+        // --- VIEW MODE LOGIC (New) ---
+        // Don't highlight if the click was on the details toggle button
+        if (event.target.classList.contains('toggle-details')) {
+            return;
+        }
+        // Toggle the highlight class on the clicked row
+        clickedRow.classList.toggle('view-highlighted');
+        // --- END VIEW MODE LOGIC ---
+    }
+    // --- END conditional logic ---
+  });
+
+
+  // --- Initial Setup ---
+  updateTableView('view'); // Initialize view to 'view' mode
+  applySearchFilter(); // Apply initial search filter (if any text is pre-filled or just to set initial state)
+
+
+});

commit 87711b048a56e25ea16504dff73ec3e32ed9da68
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 09:11:54 2025 -0700

    feat: Implement three-state mode (View/Select/Detail) for leaderboard

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 8aec738f..1037ddff 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -1,13 +1,14 @@
 document.addEventListener('DOMContentLoaded', function() {
-  let currentMode = 'view'; // 'view', 'select'
+  let currentMode = 'view'; // 'view', 'select', 'detail'
   let selectedRows = new Set(); // Store indices of selected rows
 
   const allMainRows = document.querySelectorAll('tr[id^="main-row-"]');
   const allDetailsRows = document.querySelectorAll('tr[id^="details-"]');
   const searchInput = document.getElementById('editSearchInput');
   const modeViewButton = document.getElementById('mode-view-btn');
+  const modeDetailButton = document.getElementById('mode-detail-btn');
   const modeSelectButton = document.getElementById('mode-select-btn');
-  const modeButtons = [modeViewButton, modeSelectButton];
+  const modeButtons = [modeViewButton, modeDetailButton, modeSelectButton];
   const selectAllCheckbox = document.getElementById('select-all-checkbox');
 
   function applySearchFilter() {
@@ -64,7 +65,7 @@ document.addEventListener('DOMContentLoaded', function() {
 
 
   function updateTableView(mode) {
-    currentMode = mode; // Update global state ('view' or 'select')
+    currentMode = mode; // Update global state ('view', 'select', 'detail')
 
     // Update button styles first
     modeButtons.forEach(btn => {
@@ -73,7 +74,11 @@ document.addEventListener('DOMContentLoaded', function() {
         btn.style.backgroundColor = '';
         btn.style.color = '';
     });
-    const activeButton = mode === 'view' ? modeViewButton : modeSelectButton;
+    let activeButton;
+    if (mode === 'view') activeButton = modeViewButton;
+    else if (mode === 'select') activeButton = modeSelectButton;
+    else if (mode === 'detail') activeButton = modeDetailButton;
+
     activeButton.classList.add('active');
     activeButton.style.backgroundColor = '#e7f3ff'; // Use selected row highlight blue
     activeButton.style.color = '#495057'; // Use dark text for contrast on light blue
@@ -94,39 +99,47 @@ document.addEventListener('DOMContentLoaded', function() {
       if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
 
       // Apply mode-specific logic
-      if (mode === 'view') {
-          toggleButton.style.display = 'inline-block';
+      if (mode === 'view') { // --- VIEW MODE ---
+          toggleButton.style.display = 'none'; // Hide toggle in view mode
           selectorCheckbox.style.display = 'none';
           row.classList.remove('row-selected'); // Ensure no selection highlight in view mode
-          // DO NOT remove 'view-highlighted' here, let it persist
-
-          // In 'view' mode, hide row if selections exist AND this row is NOT selected
-          if (selectedRows.size > 0 && !isSelected) {
-              row.classList.add('hidden-by-mode');
-              if (detailsRow) detailsRow.classList.add('hidden-by-mode');
-          } else {
-              // Ensure row is not hidden by mode if it's selected or no selections exist
-              row.classList.remove('hidden-by-mode');
-              if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
-          }
-
+          // view-highlighted is handled by row click listener
 
-          // Hide details row unless it was explicitly opened (handled by toggle listener)
-          if (detailsRow && toggleButton.textContent === '▶') {
-              detailsRow.style.display = 'none';
+          // Always show main row (if not filtered by search)
+          row.classList.remove('hidden-by-mode');
+          if (detailsRow) {
+              detailsRow.classList.remove('hidden-by-mode');
+              detailsRow.style.display = 'none'; // Always hide details in view mode
           }
-      } else { // mode === 'select'
+
+      } else if (mode === 'select') { // --- SELECT MODE ---
           toggleButton.style.display = 'none';
           selectorCheckbox.style.display = 'inline-block';
           selectorCheckbox.checked = isSelected;
           row.classList.toggle('row-selected', isSelected);
-          row.classList.remove('view-highlighted'); // <<< ADD THIS LINE to clear view highlight
+          row.classList.remove('view-highlighted'); // Clear view highlight
           // Always hide details row in select mode
           if (detailsRow) detailsRow.style.display = 'none';
 
           // In 'select' mode, no rows should be hidden based on selection status
           row.classList.remove('hidden-by-mode');
           if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
+
+      } else { // --- DETAIL MODE --- (mode === 'detail')
+          toggleButton.style.display = 'inline-block'; // Show toggle
+          selectorCheckbox.style.display = 'none';
+          row.classList.remove('row-selected'); // Clear selection highlight
+          row.classList.remove('view-highlighted'); // Clear view highlight
+          // Details row visibility is controlled by the toggle button state, don't force hide/show here
+          // Ensure main row is visible if not hidden by search
+          row.classList.remove('hidden-by-mode');
+          if (detailsRow) {
+              detailsRow.classList.remove('hidden-by-mode');
+              // Preserve existing display state (controlled by toggle) unless hidden by search
+              if (detailsRow.classList.contains('hidden-by-search')) {
+                  detailsRow.style.display = 'none';
+              }
+          }
       }
 
 
@@ -325,8 +338,8 @@ document.addEventListener('DOMContentLoaded', function() {
   const toggleButtons = document.querySelectorAll('.toggle-details');
   toggleButtons.forEach(button => {
     button.addEventListener('click', function() {
-      // Only allow toggling in 'all' or 'selected' modes
-      if (currentMode === 'select') return;
+      // Only allow toggling in 'detail' mode
+      if (currentMode !== 'detail') return;
 
       const targetId = this.getAttribute('data-target');
       const targetRow = document.getElementById(targetId);
@@ -342,8 +355,6 @@ document.addEventListener('DOMContentLoaded', function() {
 
   // Listener for clicking anywhere on a row
   tableBody.addEventListener('click', function(event) {
-    // REMOVE this line: if (currentMode !== 'select') return; // Only active in select mode
-
     const clickedRow = event.target.closest('tr');
 
     // Ensure it's a main row and not a details row or header/footer

commit bea746595ee722a5778e0870c5d9eb43e7d52ef0
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 09:13:42 2025 -0700

    feat: Hide first column in leaderboard table when in 'View' mode

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 1037ddff..8165b74a 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -83,6 +83,9 @@ document.addEventListener('DOMContentLoaded', function() {
     activeButton.style.backgroundColor = '#e7f3ff'; // Use selected row highlight blue
     activeButton.style.color = '#495057'; // Use dark text for contrast on light blue
 
+    // Get the first header cell (for the toggle/checkbox column)
+    const firstHeaderCell = document.querySelector('table thead th:first-child');
+
 
     // Show/hide header checkbox based on mode
     selectAllCheckbox.style.display = mode === 'select' ? 'inline-block' : 'none';
@@ -91,6 +94,7 @@ document.addEventListener('DOMContentLoaded', function() {
       const rowIndex = row.querySelector('.row-selector')?.dataset.rowIndex;
       const toggleButton = row.querySelector('.toggle-details');
       const selectorCheckbox = row.querySelector('.row-selector');
+      const firstCell = row.querySelector('td:first-child'); // Get the first cell of the main row
       const detailsRow = document.getElementById(`details-${rowIndex}`);
       const isSelected = selectedRows.has(rowIndex);
 
@@ -98,11 +102,19 @@ document.addEventListener('DOMContentLoaded', function() {
       row.classList.remove('hidden-by-mode');
       if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
 
+      // Show/hide the first column (header and data cells) based on mode
+      if (firstHeaderCell) {
+          firstHeaderCell.style.display = mode === 'view' ? 'none' : '';
+      }
+      if (firstCell) {
+          firstCell.style.display = mode === 'view' ? 'none' : '';
+      }
+
       // Apply mode-specific logic
       if (mode === 'view') { // --- VIEW MODE ---
           toggleButton.style.display = 'none'; // Hide toggle in view mode
           selectorCheckbox.style.display = 'none';
-          row.classList.remove('row-selected'); // Ensure no selection highlight in view mode
+          row.classList.remove('row-selected'); // Ensure no selection highlight
           // view-highlighted is handled by row click listener
 
           // Always show main row (if not filtered by search)
@@ -117,7 +129,7 @@ document.addEventListener('DOMContentLoaded', function() {
           selectorCheckbox.style.display = 'inline-block';
           selectorCheckbox.checked = isSelected;
           row.classList.toggle('row-selected', isSelected);
-          row.classList.remove('view-highlighted'); // Clear view highlight
+          row.classList.remove('view-highlighted'); // Clear view highlight when switching to select
           // Always hide details row in select mode
           if (detailsRow) detailsRow.style.display = 'none';
 
@@ -129,7 +141,7 @@ document.addEventListener('DOMContentLoaded', function() {
           toggleButton.style.display = 'inline-block'; // Show toggle
           selectorCheckbox.style.display = 'none';
           row.classList.remove('row-selected'); // Clear selection highlight
-          row.classList.remove('view-highlighted'); // Clear view highlight
+          row.classList.remove('view-highlighted'); // Clear view highlight when switching to detail
           // Details row visibility is controlled by the toggle button state, don't force hide/show here
           // Ensure main row is visible if not hidden by search
           row.classList.remove('hidden-by-mode');

commit 579794b265ebb999da68710fe761ab5491432870
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 09:15:00 2025 -0700

    feat: Show only selected rows in 'View' mode if selections exist

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 8165b74a..9a6eda69 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -117,11 +117,19 @@ document.addEventListener('DOMContentLoaded', function() {
           row.classList.remove('row-selected'); // Ensure no selection highlight
           // view-highlighted is handled by row click listener
 
-          // Always show main row (if not filtered by search)
-          row.classList.remove('hidden-by-mode');
+          // In 'view' mode, hide row if selections exist AND this row is NOT selected
+          if (selectedRows.size > 0 && !isSelected) {
+              row.classList.add('hidden-by-mode');
+              if (detailsRow) detailsRow.classList.add('hidden-by-mode');
+          } else {
+              // Ensure row is not hidden by mode if it's selected or no selections exist
+              // This is handled by the reset at the start of the loop:
+              // row.classList.remove('hidden-by-mode');
+              // if (detailsRow) detailsRow.classList.remove('hidden-by-mode');
+          }
+          // Always hide details row content in view mode regardless of visibility class
           if (detailsRow) {
-              detailsRow.classList.remove('hidden-by-mode');
-              detailsRow.style.display = 'none'; // Always hide details in view mode
+              detailsRow.style.display = 'none';
           }
 
       } else if (mode === 'select') { // --- SELECT MODE ---

commit 733bf0dcdfc8e1061681657c7ae269cd91deaae3
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 09:52:32 2025 -0700

    feat: Add close button to hide leaderboard controls container

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 9a6eda69..87cdac74 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -415,5 +415,15 @@ document.addEventListener('DOMContentLoaded', function() {
   updateTableView('view'); // Initialize view to 'view' mode
   applySearchFilter(); // Apply initial search filter (if any text is pre-filled or just to set initial state)
 
+// Close button functionality
+const closeControlsBtn = document.getElementById('close-controls-btn');
+if (closeControlsBtn) {
+  closeControlsBtn.addEventListener('click', function() {
+    const controlsContainer = document.getElementById('controls-container');
+    if (controlsContainer) {
+      controlsContainer.style.display = 'none';
+    }
+  });
+}
 
 });

commit 09fc037d4d6a88da8090a04a7940be5716de7aaa
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:34:06 2025 -0700

    feat: stop using log-scale for costs on the leaderboard

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 87cdac74..cabad69a 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -204,22 +204,10 @@ document.addEventListener('DOMContentLoaded', function() {
     const maxCost = parseFloat(bar.dataset.maxCost);
  
     if (cost > 0 && maxCost > 0) {
-      // Use log10(1 + x) for scaling. Adding 1 handles potential cost=0 and gives non-zero logs for cost > 0.
-      const logCost = Math.log10(1 + cost);
-      const logMaxCost = Math.log10(1 + maxCost);
- 
-      if (logMaxCost > 0) {
-        // Calculate percentage relative to the log of max cost
-        const percent = (logCost / logMaxCost) * 100;
-        // Clamp percentage between 0 and 100
-        bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
-      } else {
-        // Handle edge case where maxCost is 0 (so logMaxCost is 0)
-        // If maxCost is 0, cost must also be 0, handled below.
-        // If maxCost > 0 but logMaxCost <= 0 (e.g., maxCost is very small), set width relative to cost?
-        // For simplicity, setting to 0 if logMaxCost isn't positive.
-        bar.style.width = '0%';
-      }
+      // Calculate percentage directly (linear scale)
+      const percent = (cost / maxCost) * 100;
+      // Clamp percentage between 0 and 100
+      bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
     } else {
       // Set width to 0 if cost is 0 or negative
       bar.style.width = '0%';
@@ -234,45 +222,37 @@ document.addEventListener('DOMContentLoaded', function() {
     const maxCost = parseFloat(firstCostBar?.dataset.maxCost || '1'); // Use 1 as fallback
 
     if (maxCost > 0) {
-      const logMaxCost = Math.log10(1 + maxCost);
-
-      if (logMaxCost > 0) { // Ensure logMaxCost is positive to avoid division by zero or negative results
-        const tickValues = [];
-        // Generate ticks starting at $0, then $10, $20, $30... up to maxCost
-        tickValues.push(0); // Add tick at base (0 position)
-        for (let tickCost = 10; tickCost <= maxCost; tickCost += 10) {
-          tickValues.push(tickCost);
-        }
+      const tickValues = [];
+      // Generate ticks at regular intervals (every 20% of max cost)
+      tickValues.push(0); // Add tick at base (0 position)
+      for (let i = 1; i <= 5; i++) {
+        tickValues.push((maxCost * i) / 5);
+      }
 
-        // Calculate percentage positions for each tick on the log scale
-        const tickPercentages = tickValues.map(tickCost => {
-          const logTickCost = Math.log10(1 + tickCost);
-          return (logTickCost / logMaxCost) * 100;
-        });
+      // Calculate percentage positions for each tick on the linear scale
+      const tickPercentages = tickValues.map(tickCost => {
+        return (tickCost / maxCost) * 100;
+      });
 
-        // Add tick divs to each cost cell
-        costCells.forEach(cell => {
-          const costBar = cell.querySelector('.cost-bar');
-          // Use optional chaining and provide '0' as fallback if costBar or dataset.cost is missing
-          const cost = parseFloat(costBar?.dataset?.cost || '0');
-
-          // Only add ticks if the cost is actually greater than 0
-          if (cost > 0) {
-            // Clear existing ticks if any (e.g., during updates, though not strictly needed here)
-            // cell.querySelectorAll('.cost-tick').forEach(t => t.remove());
-
-            tickPercentages.forEach(percent => {
-              // Ensure percentage is within valid range
-              if (percent >= 0 && percent <= 100) {
-                const tick = document.createElement('div');
-                tick.className = 'cost-tick';
-                tick.style.left = `${percent}%`;
-                cell.appendChild(tick);
-              }
-            });
-          }
-        });
-      }
+      // Add tick divs to each cost cell
+      costCells.forEach(cell => {
+        const costBar = cell.querySelector('.cost-bar');
+        // Use optional chaining and provide '0' as fallback if costBar or dataset.cost is missing
+        const cost = parseFloat(costBar?.dataset?.cost || '0');
+
+        // Only add ticks if the cost is actually greater than 0
+        if (cost > 0) {
+          tickPercentages.forEach(percent => {
+            // Ensure percentage is within valid range
+            if (percent >= 0 && percent <= 100) {
+              const tick = document.createElement('div');
+              tick.className = 'cost-tick';
+              tick.style.left = `${percent}%`;
+              cell.appendChild(tick);
+            }
+          });
+        }
+      });
     }
   }
 

commit f65e6a3bb143e88904006fe92ccbe9cd725ba18c
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:35:47 2025 -0700

    feat: Limit cost bar to $50, mark bars exceeding, add tick labels

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index cabad69a..23e171a8 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -199,15 +199,28 @@ document.addEventListener('DOMContentLoaded', function() {
 
   // Process cost bars
   const costBars = document.querySelectorAll('.cost-bar');
+  const MAX_DISPLAY_COST = 50; // $50 limit for visual display
+  
   costBars.forEach(bar => {
     const cost = parseFloat(bar.dataset.cost);
     const maxCost = parseFloat(bar.dataset.maxCost);
  
     if (cost > 0 && maxCost > 0) {
-      // Calculate percentage directly (linear scale)
-      const percent = (cost / maxCost) * 100;
+      // Use $50 as the max for display purposes
+      const displayMaxCost = Math.min(MAX_DISPLAY_COST, maxCost);
+      // Calculate percentage based on the display max
+      const percent = Math.min(cost, displayMaxCost) / displayMaxCost * 100;
       // Clamp percentage between 0 and 100
       bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
+      
+      // Mark bars that exceed the limit
+      if (cost > MAX_DISPLAY_COST) {
+        bar.classList.add('cost-exceeded');
+        // Add a marker at the end of the bar
+        const marker = document.createElement('div');
+        marker.className = 'cost-exceeded-marker';
+        bar.parentNode.appendChild(marker);
+      }
     } else {
       // Set width to 0 if cost is 0 or negative
       bar.style.width = '0%';
@@ -217,43 +230,45 @@ document.addEventListener('DOMContentLoaded', function() {
   // Calculate and add cost ticks dynamically
   const costCells = document.querySelectorAll('.cost-bar-cell');
   if (costCells.length > 0) {
-    // Find the max cost from the first available cost bar's data attribute
-    const firstCostBar = document.querySelector('.cost-bar');
-    const maxCost = parseFloat(firstCostBar?.dataset.maxCost || '1'); // Use 1 as fallback
-
-    if (maxCost > 0) {
-      const tickValues = [];
-      // Generate ticks at regular intervals (every 20% of max cost)
-      tickValues.push(0); // Add tick at base (0 position)
-      for (let i = 1; i <= 5; i++) {
-        tickValues.push((maxCost * i) / 5);
-      }
-
-      // Calculate percentage positions for each tick on the linear scale
-      const tickPercentages = tickValues.map(tickCost => {
-        return (tickCost / maxCost) * 100;
-      });
+    const MAX_DISPLAY_COST = 50; // $50 limit for visual display
+    
+    // Generate fixed tick values at $0, $10, $20, $30, $40, $50
+    const tickValues = [0, 10, 20, 30, 40, 50];
+    
+    // Calculate percentage positions for each tick on the linear scale
+    const tickPercentages = tickValues.map(tickCost => {
+      return (tickCost / MAX_DISPLAY_COST) * 100;
+    });
 
-      // Add tick divs to each cost cell
-      costCells.forEach(cell => {
-        const costBar = cell.querySelector('.cost-bar');
-        // Use optional chaining and provide '0' as fallback if costBar or dataset.cost is missing
-        const cost = parseFloat(costBar?.dataset?.cost || '0');
-
-        // Only add ticks if the cost is actually greater than 0
-        if (cost > 0) {
-          tickPercentages.forEach(percent => {
-            // Ensure percentage is within valid range
-            if (percent >= 0 && percent <= 100) {
-              const tick = document.createElement('div');
-              tick.className = 'cost-tick';
-              tick.style.left = `${percent}%`;
-              cell.appendChild(tick);
+    // Add tick divs to each cost cell
+    costCells.forEach(cell => {
+      const costBar = cell.querySelector('.cost-bar');
+      // Use optional chaining and provide '0' as fallback if costBar or dataset.cost is missing
+      const cost = parseFloat(costBar?.dataset?.cost || '0');
+
+      // Only add ticks if the cost is actually greater than 0
+      if (cost > 0) {
+        tickPercentages.forEach((percent, index) => {
+          // Ensure percentage is within valid range
+          if (percent >= 0 && percent <= 100) {
+            const tick = document.createElement('div');
+            tick.className = 'cost-tick';
+            tick.style.left = `${percent}%`;
+            
+            // Add dollar amount labels to the ticks
+            if (index % 2 === 0) { // Only label every other tick to avoid crowding
+              const label = document.createElement('div');
+              label.className = 'cost-tick-label';
+              label.textContent = '$' + tickValues[index];
+              label.style.left = `${percent}%`;
+              cell.appendChild(label);
             }
-          });
-        }
-      });
-    }
+            
+            cell.appendChild(tick);
+          }
+        });
+      }
+    });
   }
 
 

commit 27b51d51d8e50301eecc56018a758e48b0696c1b
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:37:01 2025 -0700

    feat: Draw tear across cost bar for exceeded costs on leaderboard

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 23e171a8..ae41a739 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -215,7 +215,12 @@ document.addEventListener('DOMContentLoaded', function() {
       
       // Mark bars that exceed the limit
       if (cost > MAX_DISPLAY_COST) {
-        bar.classList.add('cost-exceeded');
+        // Add a tear marker at around $45 (90% of the way)
+        const tearMarker = document.createElement('div');
+        tearMarker.className = 'cost-tear-marker';
+        tearMarker.style.left = '90%'; // Position at 90% (around $45)
+        bar.parentNode.appendChild(tearMarker);
+        
         // Add a marker at the end of the bar
         const marker = document.createElement('div');
         marker.className = 'cost-exceeded-marker';

commit 53a64c88add0413caa548998d22a36131bf104c1
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:37:56 2025 -0700

    feat: Color the cost bar past the tear marker darker blue

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index ae41a739..adf0c540 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -221,6 +221,16 @@ document.addEventListener('DOMContentLoaded', function() {
         tearMarker.style.left = '90%'; // Position at 90% (around $45)
         bar.parentNode.appendChild(tearMarker);
         
+        // Create a darker section after the tear
+        const darkSection = document.createElement('div');
+        darkSection.className = 'bar-viz';
+        darkSection.style.width = '10%'; // From 90% to 100%
+        darkSection.style.left = '90%';
+        darkSection.style.backgroundColor = 'rgba(13, 110, 253, 0.6)'; // Darker blue
+        darkSection.style.borderRight = '1px solid rgba(13, 110, 253, 0.8)';
+        darkSection.style.zIndex = '1';
+        bar.parentNode.appendChild(darkSection);
+        
         // Add a marker at the end of the bar
         const marker = document.createElement('div');
         marker.className = 'cost-exceeded-marker';

commit 1622531d851e1b7bad4dce72acc98400e9db9421
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:42:35 2025 -0700

    feat: Remove cost exceeded marker from leaderboard table

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index adf0c540..201c5167 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -231,10 +231,7 @@ document.addEventListener('DOMContentLoaded', function() {
         darkSection.style.zIndex = '1';
         bar.parentNode.appendChild(darkSection);
         
-        // Add a marker at the end of the bar
-        const marker = document.createElement('div');
-        marker.className = 'cost-exceeded-marker';
-        bar.parentNode.appendChild(marker);
+        // No marker at the end of the bar
       }
     } else {
       // Set width to 0 if cost is 0 or negative

commit 1a080ba71ce96894e35de3ac65723f73a8386536
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:43:32 2025 -0700

    feat: Remove numeric labels below cost bars in leaderboard table

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 201c5167..8259f920 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -267,14 +267,7 @@ document.addEventListener('DOMContentLoaded', function() {
             tick.className = 'cost-tick';
             tick.style.left = `${percent}%`;
             
-            // Add dollar amount labels to the ticks
-            if (index % 2 === 0) { // Only label every other tick to avoid crowding
-              const label = document.createElement('div');
-              label.className = 'cost-tick-label';
-              label.textContent = '$' + tickValues[index];
-              label.style.left = `${percent}%`;
-              cell.appendChild(label);
-            }
+            // No dollar amount labels
             
             cell.appendChild(tick);
           }

commit 0f8e7fbd348eb028d44b1da8014fa4a3fe0c8a50
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:44:23 2025 -0700

    feat: Remove cost bar tear line, keep dark end cap

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 8259f920..c24d2639 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -215,13 +215,7 @@ document.addEventListener('DOMContentLoaded', function() {
       
       // Mark bars that exceed the limit
       if (cost > MAX_DISPLAY_COST) {
-        // Add a tear marker at around $45 (90% of the way)
-        const tearMarker = document.createElement('div');
-        tearMarker.className = 'cost-tear-marker';
-        tearMarker.style.left = '90%'; // Position at 90% (around $45)
-        bar.parentNode.appendChild(tearMarker);
-        
-        // Create a darker section after the tear
+        // Create a darker section at the end
         const darkSection = document.createElement('div');
         darkSection.className = 'bar-viz';
         darkSection.style.width = '10%'; // From 90% to 100%

commit 0b08ca64a80bbb0e6ac8b9c651082c659987cd0a
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:50:59 2025 -0700

    feat: Add diagonal stripes to large cost bars for hazard pattern

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index c24d2639..12fe2e47 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -215,7 +215,7 @@ document.addEventListener('DOMContentLoaded', function() {
       
       // Mark bars that exceed the limit
       if (cost > MAX_DISPLAY_COST) {
-        // Create a darker section at the end
+        // Create a darker section at the end with diagonal stripes
         const darkSection = document.createElement('div');
         darkSection.className = 'bar-viz';
         darkSection.style.width = '10%'; // From 90% to 100%
@@ -223,9 +223,9 @@ document.addEventListener('DOMContentLoaded', function() {
         darkSection.style.backgroundColor = 'rgba(13, 110, 253, 0.6)'; // Darker blue
         darkSection.style.borderRight = '1px solid rgba(13, 110, 253, 0.8)';
         darkSection.style.zIndex = '1';
+        // Add diagonal stripes with CSS background
+        darkSection.style.backgroundImage = 'repeating-linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.3) 5px, transparent 5px, transparent 10px)';
         bar.parentNode.appendChild(darkSection);
-        
-        // No marker at the end of the bar
       }
     } else {
       // Set width to 0 if cost is 0 or negative

commit febdd3c0d09bae059d91def670acdc9903973a1c
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:52:32 2025 -0700

    style: Extend striped cap on leaderboard bars to 15%

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 12fe2e47..1f7cdf6a 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -218,8 +218,8 @@ document.addEventListener('DOMContentLoaded', function() {
         // Create a darker section at the end with diagonal stripes
         const darkSection = document.createElement('div');
         darkSection.className = 'bar-viz';
-        darkSection.style.width = '10%'; // From 90% to 100%
-        darkSection.style.left = '90%';
+        darkSection.style.width = '15%'; // From 85% to 100%
+        darkSection.style.left = '85%';
         darkSection.style.backgroundColor = 'rgba(13, 110, 253, 0.6)'; // Darker blue
         darkSection.style.borderRight = '1px solid rgba(13, 110, 253, 0.8)';
         darkSection.style.zIndex = '1';

commit e38be2f280a75a11de087f42afc17cfb8af3d3eb
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:54:03 2025 -0700

    feat: Add dashed tear line to leaderboard bar transition

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 1f7cdf6a..99cc655e 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -226,6 +226,18 @@ document.addEventListener('DOMContentLoaded', function() {
         // Add diagonal stripes with CSS background
         darkSection.style.backgroundImage = 'repeating-linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.3) 5px, transparent 5px, transparent 10px)';
         bar.parentNode.appendChild(darkSection);
+        
+        // Add a dashed "tear line" at the transition point
+        const tearLine = document.createElement('div');
+        tearLine.style.position = 'absolute';
+        tearLine.style.left = '85%';
+        tearLine.style.top = '0';
+        tearLine.style.height = '100%';
+        tearLine.style.width = '2px';
+        tearLine.style.backgroundColor = 'white';
+        tearLine.style.borderLeft = '2px dashed rgba(0, 0, 0, 0.3)';
+        tearLine.style.zIndex = '2'; // Above the bar
+        bar.parentNode.appendChild(tearLine);
       }
     } else {
       // Set width to 0 if cost is 0 or negative

commit 11d2b7ca9821014d8290703a5665238f4557bd5b
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sun Apr 13 13:54:37 2025 -0700

    style: Adjust tear line height and position in leaderboard table

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 99cc655e..7d5c7660 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -231,8 +231,10 @@ document.addEventListener('DOMContentLoaded', function() {
         const tearLine = document.createElement('div');
         tearLine.style.position = 'absolute';
         tearLine.style.left = '85%';
-        tearLine.style.top = '0';
-        tearLine.style.height = '100%';
+        // Center the tear line vertically and make it 1.5x as tall as the bar
+        tearLine.style.top = '50%';
+        tearLine.style.transform = 'translateY(-50%)';
+        tearLine.style.height = '54px'; // 1.5x the bar height (36px)
         tearLine.style.width = '2px';
         tearLine.style.backgroundColor = 'white';
         tearLine.style.borderLeft = '2px dashed rgba(0, 0, 0, 0.3)';

commit a4e95390400f5fa12f07202863773bf0d81cf63d
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Mon Apr 14 14:04:35 2025 -0700

    feat: Dynamically update leaderboard title based on view mode

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 7d5c7660..c479d2ae 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -10,6 +10,9 @@ document.addEventListener('DOMContentLoaded', function() {
   const modeSelectButton = document.getElementById('mode-select-btn');
   const modeButtons = [modeViewButton, modeDetailButton, modeSelectButton];
   const selectAllCheckbox = document.getElementById('select-all-checkbox');
+  const leaderboardTitle = document.getElementById('leaderboard-title'); // Get title element
+  const defaultTitle = "Aider polyglot coding leaderboard";
+  const filteredTitle = "Aider polyglot coding benchmark results";
 
   function applySearchFilter() {
     const searchTerm = searchInput.value.toLowerCase();
@@ -179,6 +182,15 @@ document.addEventListener('DOMContentLoaded', function() {
 
     });
 
+    // Update the leaderboard title based on mode and selection
+    if (leaderboardTitle) {
+      if (currentMode === 'view' && selectedRows.size > 0) {
+        leaderboardTitle.textContent = filteredTitle;
+      } else {
+        leaderboardTitle.textContent = defaultTitle;
+      }
+    }
+
     // Update the select-all checkbox state after updating the view
     updateSelectAllCheckboxState();
   }

commit 23f182aab3937d7d86bce0a44392039e1aefdf6d
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Mon Apr 14 16:16:14 2025 -0700

    feat: Dynamically adjust cost scale and ticks based on visible entries

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index c479d2ae..8121bf4d 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -34,6 +34,10 @@ document.addEventListener('DOMContentLoaded', function() {
     if (currentMode === 'select') {
         updateSelectAllCheckboxState();
     }
+    
+    // Update cost bars and ticks since visible rows may have changed
+    updateCostBars();
+    updateCostTicks();
   }
 
   function getVisibleMainRows() {
@@ -89,7 +93,6 @@ document.addEventListener('DOMContentLoaded', function() {
     // Get the first header cell (for the toggle/checkbox column)
     const firstHeaderCell = document.querySelector('table thead th:first-child');
 
-
     // Show/hide header checkbox based on mode
     selectAllCheckbox.style.display = mode === 'select' ? 'inline-block' : 'none';
 
@@ -193,6 +196,10 @@ document.addEventListener('DOMContentLoaded', function() {
 
     // Update the select-all checkbox state after updating the view
     updateSelectAllCheckboxState();
+    
+    // Update cost bars and ticks since visible/selected rows may have changed
+    updateCostBars();
+    updateCostTicks();
   }
 
 
@@ -209,75 +216,127 @@ document.addEventListener('DOMContentLoaded', function() {
     }
   });
 
-  // Process cost bars
-  const costBars = document.querySelectorAll('.cost-bar');
-  const MAX_DISPLAY_COST = 50; // $50 limit for visual display
+  // Function to calculate the appropriate max display cost based on visible/selected entries
+  function calculateDisplayMaxCost() {
+    // Get the appropriate set of rows based on the current mode and selection state
+    let rowsToConsider;
+    
+    if (currentMode === 'view' && selectedRows.size > 0) {
+      // In view mode with selections, only consider selected rows
+      rowsToConsider = Array.from(allMainRows).filter(row => {
+        const rowIndex = row.querySelector('.row-selector')?.dataset.rowIndex;
+        return rowIndex && selectedRows.has(rowIndex) && !row.classList.contains('hidden-by-search');
+      });
+    } else {
+      // In other modes or without selections, consider all visible rows
+      rowsToConsider = getVisibleMainRows();
+    }
+    
+    // Find the maximum cost among the rows to consider
+    let maxCost = 0;
+    rowsToConsider.forEach(row => {
+      const costBar = row.querySelector('.cost-bar');
+      if (costBar) {
+        const cost = parseFloat(costBar.dataset.cost || '0');
+        if (cost > maxCost) maxCost = cost;
+      }
+    });
+    
+    // Cap at 50 if any entries exceed that amount, otherwise use actual max
+    return maxCost > 50 ? 50 : Math.max(1, maxCost); // Ensure at least 1 to avoid division by zero
+  }
   
-  costBars.forEach(bar => {
-    const cost = parseFloat(bar.dataset.cost);
-    const maxCost = parseFloat(bar.dataset.maxCost);
- 
-    if (cost > 0 && maxCost > 0) {
-      // Use $50 as the max for display purposes
-      const displayMaxCost = Math.min(MAX_DISPLAY_COST, maxCost);
-      // Calculate percentage based on the display max
-      const percent = Math.min(cost, displayMaxCost) / displayMaxCost * 100;
-      // Clamp percentage between 0 and 100
-      bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
+  // Process cost bars with dynamic scale
+  function updateCostBars() {
+    const costBars = document.querySelectorAll('.cost-bar');
+    const currentMaxDisplayCost = calculateDisplayMaxCost();
+    
+    // Remove existing special indicators first
+    document.querySelectorAll('.dark-section, .tear-line').forEach(el => el.remove());
+    
+    costBars.forEach(bar => {
+      const cost = parseFloat(bar.dataset.cost);
       
-      // Mark bars that exceed the limit
-      if (cost > MAX_DISPLAY_COST) {
-        // Create a darker section at the end with diagonal stripes
-        const darkSection = document.createElement('div');
-        darkSection.className = 'bar-viz';
-        darkSection.style.width = '15%'; // From 85% to 100%
-        darkSection.style.left = '85%';
-        darkSection.style.backgroundColor = 'rgba(13, 110, 253, 0.6)'; // Darker blue
-        darkSection.style.borderRight = '1px solid rgba(13, 110, 253, 0.8)';
-        darkSection.style.zIndex = '1';
-        // Add diagonal stripes with CSS background
-        darkSection.style.backgroundImage = 'repeating-linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.3) 5px, transparent 5px, transparent 10px)';
-        bar.parentNode.appendChild(darkSection);
+      if (cost > 0) {
+        // Calculate percentage based on the dynamic display max
+        const percent = Math.min(cost, currentMaxDisplayCost) / currentMaxDisplayCost * 100;
+        // Clamp percentage between 0 and 100
+        bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
         
-        // Add a dashed "tear line" at the transition point
-        const tearLine = document.createElement('div');
-        tearLine.style.position = 'absolute';
-        tearLine.style.left = '85%';
-        // Center the tear line vertically and make it 1.5x as tall as the bar
-        tearLine.style.top = '50%';
-        tearLine.style.transform = 'translateY(-50%)';
-        tearLine.style.height = '54px'; // 1.5x the bar height (36px)
-        tearLine.style.width = '2px';
-        tearLine.style.backgroundColor = 'white';
-        tearLine.style.borderLeft = '2px dashed rgba(0, 0, 0, 0.3)';
-        tearLine.style.zIndex = '2'; // Above the bar
-        bar.parentNode.appendChild(tearLine);
+        // Mark bars that exceed the limit (only if our display max is capped at 50)
+        if (currentMaxDisplayCost === 50 && cost > 50) {
+          // Create a darker section at the end with diagonal stripes
+          const darkSection = document.createElement('div');
+          darkSection.className = 'bar-viz dark-section';
+          darkSection.style.width = '15%'; // From 85% to 100%
+          darkSection.style.left = '85%';
+          darkSection.style.backgroundColor = 'rgba(13, 110, 253, 0.6)'; // Darker blue
+          darkSection.style.borderRight = '1px solid rgba(13, 110, 253, 0.8)';
+          darkSection.style.zIndex = '1';
+          // Add diagonal stripes with CSS background
+          darkSection.style.backgroundImage = 'repeating-linear-gradient(45deg, rgba(255,255,255,0.3), rgba(255,255,255,0.3) 5px, transparent 5px, transparent 10px)';
+          bar.parentNode.appendChild(darkSection);
+          
+          // Add a dashed "tear line" at the transition point
+          const tearLine = document.createElement('div');
+          tearLine.className = 'tear-line';
+          tearLine.style.position = 'absolute';
+          tearLine.style.left = '85%';
+          // Center the tear line vertically and make it 1.5x as tall as the bar
+          tearLine.style.top = '50%';
+          tearLine.style.transform = 'translateY(-50%)';
+          tearLine.style.height = '54px'; // 1.5x the bar height (36px)
+          tearLine.style.width = '2px';
+          tearLine.style.backgroundColor = 'white';
+          tearLine.style.borderLeft = '2px dashed rgba(0, 0, 0, 0.3)';
+          tearLine.style.zIndex = '2'; // Above the bar
+          bar.parentNode.appendChild(tearLine);
+        }
+      } else {
+        // Set width to 0 if cost is 0 or negative
+        bar.style.width = '0%';
       }
-    } else {
-      // Set width to 0 if cost is 0 or negative
-      bar.style.width = '0%';
-    }
-  });
+    });
+  }
+  
+  // Call this initially to set up the bars
+  updateCostBars();
 
-  // Calculate and add cost ticks dynamically
-  const costCells = document.querySelectorAll('.cost-bar-cell');
-  if (costCells.length > 0) {
-    const MAX_DISPLAY_COST = 50; // $50 limit for visual display
+  // Update cost ticks dynamically based on current max display cost
+  function updateCostTicks() {
+    const costCells = document.querySelectorAll('.cost-bar-cell');
+    if (costCells.length === 0) return;
+    
+    const currentMaxDisplayCost = calculateDisplayMaxCost();
     
-    // Generate fixed tick values at $0, $10, $20, $30, $40, $50
-    const tickValues = [0, 10, 20, 30, 40, 50];
+    // Remove existing ticks first
+    document.querySelectorAll('.cost-tick').forEach(tick => tick.remove());
+    
+    // Generate appropriate tick values based on current max
+    let tickValues = [];
+    
+    if (currentMaxDisplayCost === 50) {
+      // Fixed ticks at $0, $10, $20, $30, $40, $50 when we're at the cap
+      tickValues = [0, 10, 20, 30, 40, 50];
+    } else {
+      // Dynamic ticks based on actual max
+      const tickCount = 5; // Create 5 segments (6 ticks including 0)
+      for (let i = 0; i <= tickCount; i++) {
+        tickValues.push(Math.round((i / tickCount) * currentMaxDisplayCost * 100) / 100);
+      }
+    }
     
-    // Calculate percentage positions for each tick on the linear scale
+    // Calculate percentage positions for each tick
     const tickPercentages = tickValues.map(tickCost => {
-      return (tickCost / MAX_DISPLAY_COST) * 100;
+      return (tickCost / currentMaxDisplayCost) * 100;
     });
-
+    
     // Add tick divs to each cost cell
     costCells.forEach(cell => {
       const costBar = cell.querySelector('.cost-bar');
       // Use optional chaining and provide '0' as fallback if costBar or dataset.cost is missing
       const cost = parseFloat(costBar?.dataset?.cost || '0');
-
+      
       // Only add ticks if the cost is actually greater than 0
       if (cost > 0) {
         tickPercentages.forEach((percent, index) => {
@@ -286,15 +345,15 @@ document.addEventListener('DOMContentLoaded', function() {
             const tick = document.createElement('div');
             tick.className = 'cost-tick';
             tick.style.left = `${percent}%`;
-            
-            // No dollar amount labels
-            
             cell.appendChild(tick);
           }
         });
       }
     });
   }
+  
+  // Call this initially to set up the ticks
+  updateCostTicks();
 
 
   // --- New Event Listeners ---
@@ -340,6 +399,12 @@ document.addEventListener('DOMContentLoaded', function() {
       }
       // Update select-all checkbox state
       updateSelectAllCheckboxState();
+      
+      // Update cost bars and ticks if in view mode, as selection affects what's shown
+      if (currentMode === 'view') {
+        updateCostBars();
+        updateCostTicks();
+      }
     }
   }); // End of tableBody listener
 
@@ -369,6 +434,10 @@ document.addEventListener('DOMContentLoaded', function() {
       });
       // After bulk change, ensure the selectAll checkbox state is correct (not indeterminate)
       updateSelectAllCheckboxState();
+      
+      // Update cost bars and ticks after selection changes
+      updateCostBars();
+      updateCostTicks();
   });
 
   // Listener for search input

commit 8b917d5716bc51a3ccaf54e206bdddc283a1b4ca
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Mon Apr 14 21:27:45 2025 -0700

    Refactor: Swap Select and Detail tabs in leaderboard UI

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 8121bf4d..665ee7d6 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -8,7 +8,7 @@ document.addEventListener('DOMContentLoaded', function() {
   const modeViewButton = document.getElementById('mode-view-btn');
   const modeDetailButton = document.getElementById('mode-detail-btn');
   const modeSelectButton = document.getElementById('mode-select-btn');
-  const modeButtons = [modeViewButton, modeDetailButton, modeSelectButton];
+  const modeButtons = [modeViewButton, modeSelectButton, modeDetailButton];
   const selectAllCheckbox = document.getElementById('select-all-checkbox');
   const leaderboardTitle = document.getElementById('leaderboard-title'); // Get title element
   const defaultTitle = "Aider polyglot coding leaderboard";

commit 24805ff85d85537e33402dcef0c3f4db3270df78
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Mon Apr 14 22:02:11 2025 -0700

    fix: Use $10 increments for cost ticks in leaderboard table

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 665ee7d6..ff7b13f0 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -315,15 +315,11 @@ document.addEventListener('DOMContentLoaded', function() {
     // Generate appropriate tick values based on current max
     let tickValues = [];
     
-    if (currentMaxDisplayCost === 50) {
-      // Fixed ticks at $0, $10, $20, $30, $40, $50 when we're at the cap
-      tickValues = [0, 10, 20, 30, 40, 50];
-    } else {
-      // Dynamic ticks based on actual max
-      const tickCount = 5; // Create 5 segments (6 ticks including 0)
-      for (let i = 0; i <= tickCount; i++) {
-        tickValues.push(Math.round((i / tickCount) * currentMaxDisplayCost * 100) / 100);
-      }
+    // Always use $10 increments, regardless of the max
+    const maxTickValue = Math.ceil(currentMaxDisplayCost / 10) * 10; // Round up to nearest $10
+    
+    for (let i = 0; i <= maxTickValue; i += 10) {
+      tickValues.push(i);
     }
     
     // Calculate percentage positions for each tick

commit ed14be4e705644e2c05bf60a4a5bed2eca092d7a
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Wed Apr 16 19:00:18 2025 -0700

    refactor: Use constant for max display cost cap in leaderboard table

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index ff7b13f0..a71811fa 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -1,6 +1,7 @@
 document.addEventListener('DOMContentLoaded', function() {
   let currentMode = 'view'; // 'view', 'select', 'detail'
   let selectedRows = new Set(); // Store indices of selected rows
+  const MAX_DISPLAY_COST_CAP = 50; // Define the constant here
 
   const allMainRows = document.querySelectorAll('tr[id^="main-row-"]');
   const allDetailsRows = document.querySelectorAll('tr[id^="details-"]');
@@ -219,7 +220,7 @@ document.addEventListener('DOMContentLoaded', function() {
   // Function to calculate the appropriate max display cost based on visible/selected entries
   function calculateDisplayMaxCost() {
     // Get the appropriate set of rows based on the current mode and selection state
-    let rowsToConsider;
+    let rowsToConsider;    
     
     if (currentMode === 'view' && selectedRows.size > 0) {
       // In view mode with selections, only consider selected rows
@@ -242,8 +243,8 @@ document.addEventListener('DOMContentLoaded', function() {
       }
     });
     
-    // Cap at 50 if any entries exceed that amount, otherwise use actual max
-    return maxCost > 50 ? 50 : Math.max(1, maxCost); // Ensure at least 1 to avoid division by zero
+    // Cap at MAX_DISPLAY_COST_CAP if any entries exceed that amount, otherwise use actual max
+    return maxCost > MAX_DISPLAY_COST_CAP ? MAX_DISPLAY_COST_CAP : Math.max(1, maxCost); // Ensure at least 1 to avoid division by zero
   }
   
   // Process cost bars with dynamic scale
@@ -264,7 +265,7 @@ document.addEventListener('DOMContentLoaded', function() {
         bar.style.width = Math.max(0, Math.min(100, percent)) + '%';
         
         // Mark bars that exceed the limit (only if our display max is capped at 50)
-        if (currentMaxDisplayCost === 50 && cost > 50) {
+        if (currentMaxDisplayCost === MAX_DISPLAY_COST_CAP && cost > MAX_DISPLAY_COST_CAP) {
           // Create a darker section at the end with diagonal stripes
           const darkSection = document.createElement('div');
           darkSection.className = 'bar-viz dark-section';

commit 00e5c334446ed556df636279d82cfdd8a8c34caf
Author: Paul Gauthier <paul@aider.chat>
Date:   Wed Apr 16 19:02:19 2025 -0700

    copy

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index a71811fa..2b51d07e 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -1,7 +1,7 @@
 document.addEventListener('DOMContentLoaded', function() {
   let currentMode = 'view'; // 'view', 'select', 'detail'
   let selectedRows = new Set(); // Store indices of selected rows
-  const MAX_DISPLAY_COST_CAP = 50; // Define the constant here
+  const MAX_DISPLAY_COST_CAP = 75; // Define the constant here
 
   const allMainRows = document.querySelectorAll('tr[id^="main-row-"]');
   const allDetailsRows = document.querySelectorAll('tr[id^="details-"]');

commit 3e0af2cc846b611f3f85be823d31fa3dce5f4dcd
Author: Paul Gauthier <paul@aider.chat>
Date:   Wed Apr 16 19:04:13 2025 -0700

    copy

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 2b51d07e..a71811fa 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -1,7 +1,7 @@
 document.addEventListener('DOMContentLoaded', function() {
   let currentMode = 'view'; // 'view', 'select', 'detail'
   let selectedRows = new Set(); // Store indices of selected rows
-  const MAX_DISPLAY_COST_CAP = 75; // Define the constant here
+  const MAX_DISPLAY_COST_CAP = 50; // Define the constant here
 
   const allMainRows = document.querySelectorAll('tr[id^="main-row-"]');
   const allDetailsRows = document.querySelectorAll('tr[id^="details-"]');

commit 739e01da95ea4b2f7860b35a4d5562ab9742bcb2
Author: Paul Gauthier <paul@aider.chat>
Date:   Wed Apr 16 19:10:24 2025 -0700

    copy

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 2b51d07e..8f9f40a8 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -13,7 +13,7 @@ document.addEventListener('DOMContentLoaded', function() {
   const selectAllCheckbox = document.getElementById('select-all-checkbox');
   const leaderboardTitle = document.getElementById('leaderboard-title'); // Get title element
   const defaultTitle = "Aider polyglot coding leaderboard";
-  const filteredTitle = "Aider polyglot coding benchmark results";
+  const filteredTitle = "Aider polyglot coding benchmark results (selected)";
 
   function applySearchFilter() {
     const searchTerm = searchInput.value.toLowerCase();

commit 21beee2fe1d1fe5341c7298223972637b5ac6b31
Merge: 3e0af2cc 739e01da
Author: Paul Gauthier <paul@aider.chat>
Date:   Thu Apr 17 08:29:47 2025 -0700

    Merge branch 'arch-o3-41'


commit a08ffc3513ead0484c253d4089d0e9598654cd3f
Author: Paul Gauthier <paul@aider.chat>
Date:   Thu Apr 17 09:28:07 2025 -0700

    scale

diff --git a/aider/website/_includes/leaderboard_table.js b/aider/website/_includes/leaderboard_table.js
index 8e1decee..8f9f40a8 100644
--- a/aider/website/_includes/leaderboard_table.js
+++ b/aider/website/_includes/leaderboard_table.js
@@ -1,7 +1,7 @@
 document.addEventListener('DOMContentLoaded', function() {
   let currentMode = 'view'; // 'view', 'select', 'detail'
   let selectedRows = new Set(); // Store indices of selected rows
-  const MAX_DISPLAY_COST_CAP = 50; // Define the constant here
+  const MAX_DISPLAY_COST_CAP = 75; // Define the constant here
 
   const allMainRows = document.querySelectorAll('tr[id^="main-row-"]');
   const allDetailsRows = document.querySelectorAll('tr[id^="details-"]');

