# Instructions

You are being benchmarked. You will see the output of a git log command, and from that must infer the current state of a file. Think carefully, as you must output the exact state of the file to earn full marks.

**Important:** Your goal is to reproduce the file's content *exactly* as it exists at the final commit, even if the code appears broken, buggy, or contains obvious errors. Do **not** try to "fix" the code. Attempting to correct issues will result in a poor score, as this benchmark evaluates your ability to reproduce the precise state of the file based on its history.

# Required Response Format

Wrap the content of the file in triple backticks (```). Any text outside the final closing backticks will be ignored. End your response after outputting the closing backticks.

# Example Response

```python
#!/usr/bin/env python
print('Hello, world!')
```

# File History

> git log -p --cc --topo-order --reverse -- aider/args.py

commit d889dfc87923f1129690b78a83a521619484a8a3
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun Apr 28 13:25:31 2024 -0700

    added args.py

diff --git a/aider/args.py b/aider/args.py
new file mode 100644
index 00000000..41d4dea9
--- /dev/null
+++ b/aider/args.py
@@ -0,0 +1,368 @@
+import argparse
+import os
+
+import configargparse
+
+from aider import __version__, models
+
+
+def get_parser(default_config_files, git_root):
+    parser = configargparse.ArgumentParser(
+        description="aider is GPT powered coding in your terminal",
+        add_config_file_help=True,
+        default_config_files=default_config_files,
+        config_file_parser_class=configargparse.YAMLConfigFileParser,
+        auto_env_var_prefix="AIDER_",
+    )
+
+    ##########
+    group = parser.add_argument_group("Main")
+    group.add_argument(
+        "files",
+        metavar="FILE",
+        nargs="*",
+        help="files to edit with an LLM (optional)",
+    )
+    group.add_argument(
+        "--openai-api-key",
+        metavar="OPENAI_API_KEY",
+        env_var="OPENAI_API_KEY",
+        help="Specify the OpenAI API key",
+    )
+    group.add_argument(
+        "--anthropic-api-key",
+        metavar="ANTHROPIC_API_KEY",
+        env_var="ANTHROPIC_API_KEY",
+        help="Specify the OpenAI API key",
+    )
+    default_model = models.DEFAULT_MODEL_NAME
+    group.add_argument(
+        "--model",
+        metavar="MODEL",
+        default=default_model,
+        help=f"Specify the model to use for the main chat (default: {default_model})",
+    )
+    opus_model = "claude-3-opus-20240229"
+    group.add_argument(
+        "--opus",
+        action="store_const",
+        dest="model",
+        const=opus_model,
+        help=f"Use {opus_model} model for the main chat",
+    )
+    sonnet_model = "claude-3-sonnet-20240229"
+    group.add_argument(
+        "--sonnet",
+        action="store_const",
+        dest="model",
+        const=sonnet_model,
+        help=f"Use {sonnet_model} model for the main chat",
+    )
+    gpt_4_model = "gpt-4-0613"
+    group.add_argument(
+        "--4",
+        "-4",
+        action="store_const",
+        dest="model",
+        const=gpt_4_model,
+        help=f"Use {gpt_4_model} model for the main chat",
+    )
+    gpt_4_turbo_model = "gpt-4-turbo"
+    group.add_argument(
+        "--4-turbo-vision",
+        action="store_const",
+        dest="model",
+        const=gpt_4_turbo_model,
+        help=f"Use {gpt_4_turbo_model} model for the main chat",
+    )
+    gpt_3_model_name = "gpt-3.5-turbo"
+    group.add_argument(
+        "--35turbo",
+        "--35-turbo",
+        "--3",
+        "-3",
+        action="store_const",
+        dest="model",
+        const=gpt_3_model_name,
+        help=f"Use {gpt_3_model_name} model for the main chat",
+    )
+
+    ##########
+    group = parser.add_argument_group("Model Settings")
+    group.add_argument(
+        "--models",
+        metavar="MODEL",
+        help="List known models which match the (partial) MODEL name",
+    )
+    group.add_argument(
+        "--openai-api-base",
+        metavar="OPENAI_API_BASE",
+        env_var="OPENAI_API_BASE",
+        help="Specify the api base url",
+    )
+    group.add_argument(
+        "--openai-api-type",
+        metavar="OPENAI_API_TYPE",
+        env_var="OPENAI_API_TYPE",
+        help="Specify the api_type",
+    )
+    group.add_argument(
+        "--openai-api-version",
+        metavar="OPENAI_API_VERSION",
+        env_var="OPENAI_API_VERSION",
+        help="Specify the api_version",
+    )
+    group.add_argument(
+        "--openai-api-deployment-id",
+        metavar="OPENAI_API_DEPLOYMENT_ID",
+        env_var="OPENAI_API_DEPLOYMENT_ID",
+        help="Specify the deployment_id",
+    )
+    group.add_argument(
+        "--openai-organization-id",
+        metavar="OPENAI_ORGANIZATION_ID",
+        env_var="OPENAI_ORGANIZATION_ID",
+        help="Specify the OpenAI organization ID",
+    )
+    group.add_argument(
+        "--edit-format",
+        metavar="EDIT_FORMAT",
+        default=None,
+        help="Specify what edit format the LLM should use (default depends on model)",
+    )
+    group.add_argument(
+        "--weak-model",
+        metavar="WEAK_MODEL",
+        default=None,
+        help=(
+            "Specify the model to use for commit messages and chat history summarization (default"
+            " depends on --model)"
+        ),
+    )
+    group.add_argument(
+        "--show-model-warnings",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Only work with models that have meta-data available (default: True)",
+    )
+    group.add_argument(
+        "--map-tokens",
+        type=int,
+        default=1024,
+        help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
+    )
+
+    ##########
+    group = parser.add_argument_group("History Files")
+    default_input_history_file = (
+        os.path.join(git_root, ".aider.input.history") if git_root else ".aider.input.history"
+    )
+    default_chat_history_file = (
+        os.path.join(git_root, ".aider.chat.history.md") if git_root else ".aider.chat.history.md"
+    )
+    group.add_argument(
+        "--input-history-file",
+        metavar="INPUT_HISTORY_FILE",
+        default=default_input_history_file,
+        help=f"Specify the chat input history file (default: {default_input_history_file})",
+    )
+    group.add_argument(
+        "--chat-history-file",
+        metavar="CHAT_HISTORY_FILE",
+        default=default_chat_history_file,
+        help=f"Specify the chat history file (default: {default_chat_history_file})",
+    )
+
+    ##########
+    group = parser.add_argument_group("Output Settings")
+    group.add_argument(
+        "--dark-mode",
+        action="store_true",
+        help="Use colors suitable for a dark terminal background (default: False)",
+        default=False,
+    )
+    group.add_argument(
+        "--light-mode",
+        action="store_true",
+        help="Use colors suitable for a light terminal background (default: False)",
+        default=False,
+    )
+    group.add_argument(
+        "--pretty",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable pretty, colorized output (default: True)",
+    )
+    group.add_argument(
+        "--stream",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable streaming responses (default: True)",
+    )
+    group.add_argument(
+        "--user-input-color",
+        default="#00cc00",
+        help="Set the color for user input (default: #00cc00)",
+    )
+    group.add_argument(
+        "--tool-output-color",
+        default=None,
+        help="Set the color for tool output (default: None)",
+    )
+    group.add_argument(
+        "--tool-error-color",
+        default="#FF2222",
+        help="Set the color for tool error messages (default: red)",
+    )
+    group.add_argument(
+        "--assistant-output-color",
+        default="#0088ff",
+        help="Set the color for assistant output (default: #0088ff)",
+    )
+    group.add_argument(
+        "--code-theme",
+        default="default",
+        help=(
+            "Set the markdown code theme (default: default, other options include monokai,"
+            " solarized-dark, solarized-light)"
+        ),
+    )
+    group.add_argument(
+        "--show-diffs",
+        action="store_true",
+        help="Show diffs when committing changes (default: False)",
+        default=False,
+    )
+
+    ##########
+    group = parser.add_argument_group("Git Settings")
+    group.add_argument(
+        "--git",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable looking for a git repo (default: True)",
+    )
+    group.add_argument(
+        "--gitignore",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable adding .aider* to .gitignore (default: True)",
+    )
+    default_aiderignore_file = (
+        os.path.join(git_root, ".aiderignore") if git_root else ".aiderignore"
+    )
+    group.add_argument(
+        "--aiderignore",
+        metavar="AIDERIGNORE",
+        default=default_aiderignore_file,
+        help="Specify the aider ignore file (default: .aiderignore in git root)",
+    )
+    group.add_argument(
+        "--auto-commits",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable auto commit of LLM changes (default: True)",
+    )
+    group.add_argument(
+        "--dirty-commits",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable commits when repo is found dirty (default: True)",
+    )
+    group.add_argument(
+        "--dry-run",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Perform a dry run without modifying files (default: False)",
+    )
+    group.add_argument(
+        "--commit",
+        action="store_true",
+        help="Commit all pending changes with a suitable commit message, then exit",
+        default=False,
+    )
+
+    ##########
+    group = parser.add_argument_group("Other Settings")
+    group.add_argument(
+        "--voice-language",
+        metavar="VOICE_LANGUAGE",
+        default="en",
+        help="Specify the language for voice using ISO 639-1 code (default: auto)",
+    )
+    group.add_argument(
+        "--version",
+        action="version",
+        version=f"%(prog)s {__version__}",
+        help="Show the version number and exit",
+    )
+    group.add_argument(
+        "--check-update",
+        action="store_true",
+        help="Check for updates and return status in the exit code",
+        default=False,
+    )
+    group.add_argument(
+        "--skip-check-update",
+        action="store_true",
+        help="Skips checking for the update when the program runs",
+    )
+    group.add_argument(
+        "--apply",
+        metavar="FILE",
+        help="Apply the changes from the given file instead of running the chat (debug)",
+    )
+    group.add_argument(
+        "--yes",
+        action="store_true",
+        help="Always say yes to every confirmation",
+        default=None,
+    )
+    group.add_argument(
+        "-v",
+        "--verbose",
+        action="store_true",
+        help="Enable verbose output",
+        default=False,
+    )
+    group.add_argument(
+        "--show-repo-map",
+        action="store_true",
+        help="Print the repo map and exit (debug)",
+        default=False,
+    )
+    group.add_argument(
+        "--message",
+        "--msg",
+        "-m",
+        metavar="COMMAND",
+        help=(
+            "Specify a single message to send the LLM, process reply then exit (disables chat mode)"
+        ),
+    )
+    group.add_argument(
+        "--message-file",
+        "-f",
+        metavar="MESSAGE_FILE",
+        help=(
+            "Specify a file containing the message to send the LLM, process reply, then exit"
+            " (disables chat mode)"
+        ),
+    )
+    group.add_argument(
+        "--encoding",
+        default="utf-8",
+        help="Specify the encoding for input and output (default: utf-8)",
+    )
+    group.add_argument(
+        "-c",
+        "--config",
+        is_config_file=True,
+        metavar="CONFIG_FILE",
+        help=(
+            "Specify the config file (default: search for .aider.conf.yml in git root, cwd"
+            " or home directory)"
+        ),
+    )
+
+    return parser

commit 542c091cf395a932374ab378fdda3ec77e4371b4
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun Apr 28 14:08:25 2024 -0700

    Added --gui functionality

diff --git a/aider/args.py b/aider/args.py
index 41d4dea9..e0164653 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -364,5 +364,12 @@ def get_parser(default_config_files, git_root):
             " or home directory)"
         ),
     )
+    group.add_argument(
+        "--gui",
+        "--browser",
+        action="store_true",
+        help="Run aider in your browser",
+        default=False,
+    )
 
     return parser

commit d64a457def2520b4bbe7f24a3926798da3dce869
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu May 2 11:32:06 2024 -0700

    Added --env-file param

diff --git a/aider/args.py b/aider/args.py
index e0164653..b298fd8f 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -151,6 +151,13 @@ def get_parser(default_config_files, git_root):
         default=1024,
         help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
     )
+    default_env_file = os.path.join(git_root, ".env") if git_root else ".env"
+    group.add_argument(
+        "--env-file",
+        metavar="ENV_FILE",
+        default=default_env_file,
+        help="Specify the .env file to load (default: .env in git root)",
+    )
 
     ##########
     group = parser.add_argument_group("History Files")

commit f256b430431e5028b447457d2f9c3bc77dea0bf4
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed May 8 13:35:34 2024 -0700

    wip

diff --git a/aider/args.py b/aider/args.py
index b298fd8f..f7783167 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -338,6 +338,12 @@ def get_parser(default_config_files, git_root):
         help="Print the repo map and exit (debug)",
         default=False,
     )
+    group.add_argument(
+        "--show-prompts",
+        action="store_true",
+        help="Print the system prompts and exit (debug)",
+        default=False,
+    )
     group.add_argument(
         "--message",
         "--msg",

commit 3a79b6230b0ff5173bf2b0f92dd08ee3c8300dcd
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon May 6 09:23:37 2024 -0700

    aider: Added a --max-chat-history-tokens switch and passed it to ChatSummary in Coder.
    
    # Aider chat conversation:
    
    USER: add a --max-chat-history-tokens switch, pass it into Coder to `ChatSummary`
    
    ASSISTANT: Here are the changes to add a --max-chat-history-tokens switch and pass it to ChatSummary in Coder:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        parser.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Number of tokens to use for the repo map. Set to 0 to disable.",
        )
    =======
        parser.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Number of tokens to use for the repo map. Set to 0 to disable.",
        )
        parser.add_argument(
            "--max-chat-history-tokens",
            type=int,
            default=None,
            help="Maximum number of tokens to use for chat history. If not specified, uses the model's max_chat_history_tokens.",
        )
    >>>>>>> REPLACE
    ```
    
    aider/coders/base_coder.py
    ```python
    <<<<<<< SEARCH
            self.summarizer = ChatSummary(
                self.main_model.weak_model,
                self.main_model.max_chat_history_tokens,
            )
    =======
            max_chat_history_tokens = self.main_model.max_chat_history_tokens
            if kwargs.get("max_chat_history_tokens") is not None:
                max_chat_history_tokens = kwargs["max_chat_history_tokens"]
    
            self.summarizer = ChatSummary(
                self.main_model.weak_model,
                max_chat_history_tokens,
            )
    >>>>>>> REPLACE
    ```
    
    aider/main.py
    ```python
    <<<<<<< SEARCH
                map_tokens=args.map_tokens,
    =======
                map_tokens=args.map_tokens,
                max_chat_history_tokens=args.max_chat_history_tokens,
    >>>>>>> REPLACE
    ```
    
    This adds the new command line argument `--max-chat-history-tokens` which defaults to None. If not specified, it will use the model's default `max_chat_history_tokens`.
    
    It passes this argument from `main()` into the `Coder` constructor.
    
    In the `Coder` constructor, it checks if `max_chat_history_tokens` was provided in the `kwargs`. If so, it uses that value, otherwise it falls back to the model's default.
    
    Let me know if you have any other questions!
    
    ASSISTANT: Here are the changes to add a --max-chat-history-tokens switch and pass it to ChatSummary in Coder:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        parser.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Number of tokens to use for the repo map. Set to 0 to disable.",
        )
    =======
        parser.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Number of tokens to use for the repo map. Set to 0 to disable.",
        )
        parser.add_argument(
            "--max-chat-history-tokens",
            type=int,
            default=None,
            help="Maximum number of tokens to use for chat history. If not specified, uses the model's max_chat_history_tokens.",
        )
    >>>>>>> REPLACE
    ```
    
    aider/coders/base_coder.py
    ```python
    <<<<<<< SEARCH
            self.summarizer = ChatSummary(
                self.main_model.weak_model,
                self.main_model.max_chat_history_tokens,
            )
    =======
            max_chat_history_tokens = self.main_model.max_chat_history_tokens
            if kwargs.get("max_chat_history_tokens") is not None:
                max_chat_history_tokens = kwargs["max_chat_history_tokens"]
    
            self.summarizer = ChatSummary(
                self.main_model.weak_model,
                max_chat_history_tokens,
            )
    >>>>>>> REPLACE
    ```
    
    aider/main.py
    ```python
    <<<<<<< SEARCH
                map_tokens=args.map_tokens,
    =======
                map_tokens=args.map_tokens,
                max_chat_history_tokens=args.max_chat_history_tokens,
    >>>>>>> REPLACE
    ```
    
    This adds the new command line argument `--max-chat-history-tokens` which defaults to None. If not specified, it will use the model's default `max_chat_history_tokens`.
    
    It passes this argument from `main()` into the `Coder` constructor.
    
    In the `Coder` constructor, it checks if `max_chat_history_tokens` was provided in the `kwargs`. If so, it uses that value, otherwise it falls back to the model's default.
    
    Let me know if you have any other questions!
    
    USER: InvalidEditBlock: edit failed!
    
    aider/args.py does not contain the *exact chunk* of SEARCH lines you specified.
    Try again.
    DO NOT skip blank lines, comments, docstrings, etc!
    The SEARCH block needs to be EXACTLY the same as the lines in aider/args.py with nothing missing!
    
    aider/args.py does not contain these 6 exact lines in a row:
    ```
        parser.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Number of tokens to use for the repo map. Set to 0 to disable.",
        )
    ```
    
    ASSISTANT: I apologize for the mistake. Here is the corrected change for aider/args.py:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        group.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
        )
    =======
        group.add_argument(
            "--map-tokens",
            type=int,
            default=1024,
            help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
        )
        group.add_argument(
            "--max-chat-history-tokens",
            type=int,
            default=None,
            help="Maximum number of tokens to use for chat history. If not specified, uses the model's max_chat_history_tokens.",
        )
    >>>>>>> REPLACE
    ```

diff --git a/aider/args.py b/aider/args.py
index b298fd8f..6a7d0c7b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -151,6 +151,12 @@ def get_parser(default_config_files, git_root):
         default=1024,
         help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
     )
+    group.add_argument(
+        "--max-chat-history-tokens",
+        type=int,
+        default=None,
+        help="Maximum number of tokens to use for chat history. If not specified, uses the model's max_chat_history_tokens.",
+    )
     default_env_file = os.path.join(git_root, ".env") if git_root else ".env"
     group.add_argument(
         "--env-file",

commit 45b2ba8a1056bb27f197b01d08f3ea0d4d92b668
Merge: 1098b428 e61857ef
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Sat May 11 07:49:43 2024 -0700

    Merge pull request #591 from paul-gauthier/restore-chat-history
    
    Restore prior chat history on launch


commit bfba56c5f1e328c9237986d401c03ea921daee96
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon May 13 10:57:26 2024 -0700

    added 4o as default

diff --git a/aider/args.py b/aider/args.py
index 9f9c3067..a8f4601d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -67,6 +67,14 @@ def get_parser(default_config_files, git_root):
         const=gpt_4_model,
         help=f"Use {gpt_4_model} model for the main chat",
     )
+    gpt_4o_model = "openai/gpt-4o"
+    group.add_argument(
+        "--4o",
+        action="store_const",
+        dest="model",
+        const=gpt_4o_model,
+        help=f"Use {gpt_4o_model} model for the main chat",
+    )
     gpt_4_turbo_model = "gpt-4-turbo"
     group.add_argument(
         "--4-turbo-vision",
@@ -155,7 +163,10 @@ def get_parser(default_config_files, git_root):
         "--max-chat-history-tokens",
         type=int,
         default=None,
-        help="Maximum number of tokens to use for chat history. If not specified, uses the model's max_chat_history_tokens.",
+        help=(
+            "Maximum number of tokens to use for chat history. If not specified, uses the model's"
+            " max_chat_history_tokens."
+        ),
     )
     default_env_file = os.path.join(git_root, ".env") if git_root else ".env"
     group.add_argument(

commit ea05cf05e10dac49419eb3626c2465cda9592f2e
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon May 13 11:09:28 2024 -0700

    Added --restore-chat-history

diff --git a/aider/args.py b/aider/args.py
index a8f4601d..1f60c2ae 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -196,6 +196,12 @@ def get_parser(default_config_files, git_root):
         default=default_chat_history_file,
         help=f"Specify the chat history file (default: {default_chat_history_file})",
     )
+    group.add_argument(
+        "--restore-chat-history",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Restore the previous chat history messages (default: False)",
+    )
 
     ##########
     group = parser.add_argument_group("Output Settings")

commit b2fbafe41bddd1cf2b96d21a3acb10b34a1c12c0
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon May 13 11:24:52 2024 -0700

    docs and --4-turbo updates

diff --git a/aider/args.py b/aider/args.py
index 1f60c2ae..f21e7f29 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -75,9 +75,9 @@ def get_parser(default_config_files, git_root):
         const=gpt_4o_model,
         help=f"Use {gpt_4o_model} model for the main chat",
     )
-    gpt_4_turbo_model = "gpt-4-turbo"
+    gpt_4_turbo_model = "gpt-4-1106-preview"
     group.add_argument(
-        "--4-turbo-vision",
+        "--4-turbo",
         action="store_const",
         dest="model",
         const=gpt_4_turbo_model,

commit 72613f3b27285c28a71a50242793f3b6852932d8
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed May 15 06:25:30 2024 -0700

    switch naming from openai/gpt-4o to gpt-4o

diff --git a/aider/args.py b/aider/args.py
index f21e7f29..3b42d074 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -67,7 +67,7 @@ def get_parser(default_config_files, git_root):
         const=gpt_4_model,
         help=f"Use {gpt_4_model} model for the main chat",
     )
-    gpt_4o_model = "openai/gpt-4o"
+    gpt_4o_model = "gpt-4o"
     group.add_argument(
         "--4o",
         action="store_const",

commit 04084883e85559766bc9f8fb46a92ff90830b15c
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat May 18 18:35:33 2024 -0700

    Added a new command to run the linter on dirty files, fix problems, and then commit.

diff --git a/aider/args.py b/aider/args.py
index 3b42d074..9ff40f61 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -311,6 +311,12 @@ def get_parser(default_config_files, git_root):
         help="Commit all pending changes with a suitable commit message, then exit",
         default=False,
     )
+    group.add_argument(
+        "--lint",
+        action="store_true",
+        help="Run the linter on all dirty files, fix problems and then commit.",
+        default=False,
+    )
 
     ##########
     group = parser.add_argument_group("Other Settings")

commit bc06d8623ce2b526034869e442ec6357d524c232
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat May 18 19:30:32 2024 -0700

    Updated lint command to commit after fixing problems.

diff --git a/aider/args.py b/aider/args.py
index 9ff40f61..e7da1391 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -312,9 +312,9 @@ def get_parser(default_config_files, git_root):
         default=False,
     )
     group.add_argument(
-        "--lint",
+        "--lint-and-commit",
         action="store_true",
-        help="Run the linter on all dirty files, fix problems and then commit.",
+        help="Commit, run the linter on all dirty files, fix problems and commit again",
         default=False,
     )
 

commit 06bda2d730835a13b191f87fc8d4b27083f93728
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat May 18 20:52:21 2024 -0700

    aider: Added a `--lint-cmd` argument to allow users to specify a lint command multiple times.
    
    # Aider chat conversation:
    
    USER: add a --lint-cmd arg that takes a string like "python python-linter --with --args". allow the user to specify this args multiple times
    
    ASSISTANT: To add a `--lint-cmd` argument that takes a string and allows the user to specify this argument multiple times, we need to:
    
    1. Add the new argument to the parser.
    2. Ensure it can be specified multiple times.
    
    Here is the *SEARCH/REPLACE* block for `aider/args.py`:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        )
    =======
        )
    
        ##########
        group = parser.add_argument_group("Lint Settings")
        group.add_argument(
            "--lint-cmd",
            action="append",
            metavar="LINT_CMD",
            help="Specify a lint command to run. Can be specified multiple times.",
        )
    >>>>>>> REPLACE
    ```

diff --git a/aider/args.py b/aider/args.py
index e7da1391..1d7d3fc5 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -14,6 +14,15 @@ def get_parser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
+    
+    ##########
+    group = parser.add_argument_group("Lint Settings")
+    group.add_argument(
+        "--lint-cmd",
+        action="append",
+        metavar="LINT_CMD",
+        help="Specify a lint command to run. Can be specified multiple times.",
+    )
 
     ##########
     group = parser.add_argument_group("Main")

commit 73919037595fff7277404a1e62af962c1333db65
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat May 18 20:57:01 2024 -0700

    Removed redundant lint command option and added support for specifying lint commands for different languages.

diff --git a/aider/args.py b/aider/args.py
index 1d7d3fc5..018e42ca 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -14,15 +14,6 @@ def get_parser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
-    
-    ##########
-    group = parser.add_argument_group("Lint Settings")
-    group.add_argument(
-        "--lint-cmd",
-        action="append",
-        metavar="LINT_CMD",
-        help="Specify a lint command to run. Can be specified multiple times.",
-    )
 
     ##########
     group = parser.add_argument_group("Main")
@@ -321,11 +312,17 @@ def get_parser(default_config_files, git_root):
         default=False,
     )
     group.add_argument(
-        "--lint-and-commit",
+        "--lint",
         action="store_true",
         help="Commit, run the linter on all dirty files, fix problems and commit again",
         default=False,
     )
+    group.add_argument(
+        "--lint-cmd",
+        action="append",
+        help='Specify lint commands to run for different languages, eg: "python: flake8 --select=..." (can be used multiple times)',
+    )
+
 
     ##########
     group = parser.add_argument_group("Other Settings")

commit 6474139d04d339014c353b5fd70b92e449fd779c
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat May 18 21:13:19 2024 -0700

    Lint files before fixing errors and commit changes if necessary.

diff --git a/aider/args.py b/aider/args.py
index 018e42ca..0b8ed74d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -321,6 +321,7 @@ def get_parser(default_config_files, git_root):
         "--lint-cmd",
         action="append",
         help='Specify lint commands to run for different languages, eg: "python: flake8 --select=..." (can be used multiple times)',
+        default=[],
     )
 
 

commit 73dd873f862e730237dda4857e95e4c3e01fdce2
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun May 19 06:23:20 2024 -0700

    Add option to enable/disable automatic linting after changes.

diff --git a/aider/args.py b/aider/args.py
index 0b8ed74d..cb25daf5 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -14,6 +14,12 @@ def get_parser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
+    group.add_argument(
+        "--auto-lint",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable automatic linting after changes (default: True)",
+    )
 
     ##########
     group = parser.add_argument_group("Main")

commit 76038e69d7f20c49aec844dedd66115e60b42499
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun May 19 06:23:27 2024 -0700

    Added an argument for enabling/disabling automatic linting after changes.

diff --git a/aider/args.py b/aider/args.py
index cb25daf5..3766f845 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -14,14 +14,13 @@ def get_parser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
+    ##########
     group.add_argument(
         "--auto-lint",
         action=argparse.BooleanOptionalAction,
         default=True,
         help="Enable/disable automatic linting after changes (default: True)",
     )
-
-    ##########
     group = parser.add_argument_group("Main")
     group.add_argument(
         "files",

commit 398a1300dc5a0bf94c49c825999b05829bc17c49
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun May 19 06:23:28 2024 -0700

    aider: Added --auto-lint/--no-auto-lint switch to the parser in aider/args.py.
    
    # Aider chat conversation:
    
    USER: add a --auto-lint/--no-auto-lint switch
    
    ASSISTANT: To add the `--auto-lint/--no-auto-lint` switch, we need to:
    
    1. Add the new argument to the parser in `aider/args.py`.
    
    Here is the *SEARCH/REPLACE* block:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        )
    =======
        )
        group.add_argument(
            "--auto-lint",
            action=argparse.BooleanOptionalAction,
            default=True,
            help="Enable/disable automatic linting after changes (default: True)",
        )
    >>>>>>> REPLACE
    ```
    
    USER:
    # Fix any errors below
    
    ## Running: flake8 --select=E9,F821,F823,F831,F406,F407,F701,F702,F704,F706 --show-source aider/args.py
    
    aider/args.py:17:5: F821 undefined name 'group'
        group.add_argument(
        ^
    
    ## See relevant line below marked with █.
    
    /Users/gauthier/Projects/aider/aider/args.py:
    ...⋮...
      9│def get_parser(default_config_files, git_root):
     10│    parser = configargparse.ArgumentParser(
     11│        description="aider is GPT powered coding in your terminal",
     12│        add_config_file_help=True,
     13│        default_config_files=default_config_files,
     14│        config_file_parser_class=configargparse.YAMLConfigFileParser,
     15│        auto_env_var_prefix="AIDER_",
     16│    )
     17█    group.add_argument(
     18│        "--auto-lint",
     19│        action=argparse.BooleanOptionalAction,
     20│        default=True,
     21│        help="Enable/disable automatic linting after changes (default: True)",
    ...⋮...
    
    ASSISTANT: To fix the error, we need to move the `--auto-lint` argument addition to the correct location within the `get_parser` function, after the `group` variable is defined.
    
    Here is the corrected *SEARCH/REPLACE* block:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        group.add_argument(
            "--auto-lint",
            action=argparse.BooleanOptionalAction,
            default=True,
            help="Enable/disable automatic linting after changes (default: True)",
        )
    
        ##########
    =======
        ##########
        group.add_argument(
            "--auto-lint",
            action=argparse.BooleanOptionalAction,
            default=True,
            help="Enable/disable automatic linting after changes (default: True)",
        )
    >>>>>>> REPLACE
    ```
    
    USER:
    # Fix any errors below
    
    ## Running: flake8 --select=E9,F821,F823,F831,F406,F407,F701,F702,F704,F706 --show-source aider/args.py
    
    aider/args.py:18:5: F821 undefined name 'group'
        group.add_argument(
        ^
    
    ## See relevant line below marked with █.
    
    /Users/gauthier/Projects/aider/aider/args.py:
    ...⋮...
      9│def get_parser(default_config_files, git_root):
     10│    parser = configargparse.ArgumentParser(
     11│        description="aider is GPT powered coding in your terminal",
     12│        add_config_file_help=True,
     13│        default_config_files=default_config_files,
     14│        config_file_parser_class=configargparse.YAMLConfigFileParser,
     15│        auto_env_var_prefix="AIDER_",
     16│    )
     17│    ##########
     18█    group.add_argument(
     19│        "--auto-lint",
     20│        action=argparse.BooleanOptionalAction,
     21│        default=True,
     22│        help="Enable/disable automatic linting after changes (default: True)",
    ...⋮...
    
    ASSISTANT: The error is occurring because the `group` variable is not defined before it is used. We need to place the `--auto-lint` argument addition after the `group` variable is defined.
    
    Here is the corrected *SEARCH/REPLACE* block:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        ##########
        group.add_argument(
            "--auto-lint",
            action=argparse.BooleanOptionalAction,
            default=True,
            help="Enable/disable automatic linting after changes (default: True)",
        )
    =======
        group = parser.add_argument_group("Main")
    >>>>>>> REPLACE
    ```
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        group.add_argument(
    =======
        group.add_argument(
            "--auto-lint",
            action=argparse.BooleanOptionalAction,
            default=True,
            help="Enable/disable automatic linting after changes (default: True)",
        )
        group.add_argument(
    >>>>>>> REPLACE
    ```

diff --git a/aider/args.py b/aider/args.py
index 3766f845..1689621a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -14,14 +14,14 @@ def get_parser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
-    ##########
+    group = parser.add_argument_group("Main")
+    group = parser.add_argument_group("Main")
     group.add_argument(
         "--auto-lint",
         action=argparse.BooleanOptionalAction,
         default=True,
         help="Enable/disable automatic linting after changes (default: True)",
     )
-    group = parser.add_argument_group("Main")
     group.add_argument(
         "files",
         metavar="FILE",

commit 9ee332f5d9adfb05292b33f2d65c15d1aed7e012
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun May 19 07:34:19 2024 -0700

    Added options for automatic linting and testing after changes.

diff --git a/aider/args.py b/aider/args.py
index 1689621a..a528c78d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -15,13 +15,6 @@ def get_parser(default_config_files, git_root):
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")
-    group = parser.add_argument_group("Main")
-    group.add_argument(
-        "--auto-lint",
-        action=argparse.BooleanOptionalAction,
-        default=True,
-        help="Enable/disable automatic linting after changes (default: True)",
-    )
     group.add_argument(
         "files",
         metavar="FILE",
@@ -310,6 +303,7 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Perform a dry run without modifying files (default: False)",
     )
+    group = parser.add_argument_group("Fixing and committing")
     group.add_argument(
         "--commit",
         action="store_true",
@@ -319,16 +313,42 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--lint",
         action="store_true",
-        help="Commit, run the linter on all dirty files, fix problems and commit again",
+        help="Run the linter on all dirty files, fix problems and commit",
         default=False,
     )
     group.add_argument(
         "--lint-cmd",
         action="append",
-        help='Specify lint commands to run for different languages, eg: "python: flake8 --select=..." (can be used multiple times)',
+        help=(
+            'Specify lint commands to run for different languages, eg: "python: flake8'
+            ' --select=..." (can be used multiple times)'
+        ),
         default=[],
     )
-
+    group.add_argument(
+        "--auto-lint",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable automatic linting after changes (default: True)",
+    )
+    group.add_argument(
+        "--test-cmd",
+        action="append",
+        help="Specify command to run tests",
+        default=[],
+    )
+    group.add_argument(
+        "--auto-test",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable/disable automatic testing after changes (default: False)",
+    )
+    group.add_argument(
+        "--test",
+        action="store_true",
+        help="Run tests and fix problems found",
+        default=False,
+    )
 
     ##########
     group = parser.add_argument_group("Other Settings")

commit 57a2c61386bb6966cbf41fa41c38273e710fd545
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon May 20 09:01:22 2024 -0700

    updated lint cmd descriptions

diff --git a/aider/args.py b/aider/args.py
index a528c78d..a6d5bbe6 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -313,7 +313,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--lint",
         action="store_true",
-        help="Run the linter on all dirty files, fix problems and commit",
+        help="Lint and fix provided files, or dirty files if none provided",
         default=False,
     )
     group.add_argument(

commit a857cbb7d143d102287b9125c90983c7b04e2dbe
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jun 5 16:59:30 2024 -0700

    added cmd line args

diff --git a/aider/args.py b/aider/args.py
index a6d5bbe6..f9900615 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,5 +1,8 @@
+#!/usr/bin/env python
+
 import argparse
 import os
+import sys
 
 import configargparse
 
@@ -447,3 +450,18 @@ def get_parser(default_config_files, git_root):
     )
 
     return parser
+
+
+def get_help():
+    os.environ["COLUMNS"] = "100"
+    parser = get_parser([], None)
+    return parser.format_help()
+
+
+def main():
+    print(get_help())
+
+
+if __name__ == "__main__":
+    status = main()
+    sys.exit(status)

commit 6f9e0ce37f60440c5f2ab3afa50944eaab8339c1
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jun 5 19:43:24 2024 -0700

    cog to update usage.md

diff --git a/aider/args.py b/aider/args.py
index f9900615..1a316ea7 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -454,6 +454,7 @@ def get_parser(default_config_files, git_root):
 
 def get_help():
     os.environ["COLUMNS"] = "100"
+    sys.argv[0] = "aider"
     parser = get_parser([], None)
     return parser.format_help()
 

commit 9437fb28c4b7c2c7120f2d460568d909bba8e58e
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jun 5 21:14:54 2024 -0700

    removed configargparse.YAMLConfigFileParser

diff --git a/aider/args.py b/aider/args.py
index 1a316ea7..3b3e85b5 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -14,7 +14,6 @@ def get_parser(default_config_files, git_root):
         description="aider is GPT powered coding in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
-        config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")

commit e7aafd95909a81727c2a3cd16aa63cc29cff9850
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 6 11:38:45 2024 -0700

    aider: Add argument formatter to print arguments in a specified format.
    
    # Aider chat conversation:
    
    USER: Add an args formatter that prints out args like this:
    
    ## Output Settings:
    
    ### --dark-mode
    Use colors suitable for a dark terminal background
    Default: False
    
    ### --light-mode
    Use colors suitable for a light terminal background
    Default: False
    
    ...
    
    ASSISTANT: To add an argument formatter that prints out arguments in the specified format, we need to:
    
    1. Create a new formatter class.
    2. Update the `get_help` function to use this new formatter.
    
    Here are the changes:
    
    1. Create a new file `aider/args_formatter.py` with the custom formatter class.
    2. Update `aider/args.py` to use this new formatter.
    
    Let's start with the new file:
    
    aider/args_formatter.py
    ```python
    <<<<<<< SEARCH
    =======
    import argparse
    
    class CustomHelpFormatter(argparse.HelpFormatter):
        def start_section(self, heading):
            super().start_section(f"## {heading}:")
    
        def _format_action(self, action):
            parts = []
            if action.help:
                parts.append(f"### --{action.dest}")
                parts.append(action.help)
                if action.default is not argparse.SUPPRESS:
                    parts.append(f"Default: {action.default}")
            return "\n".join(parts)
    
        def _format_action_invocation(self, action):
            return ""
    
        def _format_args(self, action, default_metavar):
            return ""
    >>>>>>> REPLACE
    ```
    
    Next, update `aider/args.py` to use this new formatter:
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
    from aider import __version__, models
    =======
    from aider import __version__, models
    from aider.args_formatter import CustomHelpFormatter
    >>>>>>> REPLACE
    ```
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
            description="aider is GPT powered coding in your terminal",
    =======
            description="aider is GPT powered coding in your terminal",
            formatter_class=CustomHelpFormatter,
    >>>>>>> REPLACE
    ```
    
    aider/args.py
    ```python
    <<<<<<< SEARCH
        parser = get_parser([], None)
    =======
        parser = get_parser([], None)
        parser.formatter_class = CustomHelpFormatter
    >>>>>>> REPLACE
    ```

diff --git a/aider/args.py b/aider/args.py
index 3b3e85b5..794c1627 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -7,11 +7,13 @@ import sys
 import configargparse
 
 from aider import __version__, models
+from aider.args_formatter import CustomHelpFormatter
 
 
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
         description="aider is GPT powered coding in your terminal",
+        formatter_class=CustomHelpFormatter,
         add_config_file_help=True,
         default_config_files=default_config_files,
         auto_env_var_prefix="AIDER_",
@@ -455,6 +457,7 @@ def get_help():
     os.environ["COLUMNS"] = "100"
     sys.argv[0] = "aider"
     parser = get_parser([], None)
+    parser.formatter_class = CustomHelpFormatter
     return parser.format_help()
 
 

commit caca261587a09751128c66f18724755fe9434efb
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 6 12:26:06 2024 -0700

    output nice md usage

diff --git a/aider/args.py b/aider/args.py
index 794c1627..a04d8878 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -7,13 +7,14 @@ import sys
 import configargparse
 
 from aider import __version__, models
-from aider.args_formatter import CustomHelpFormatter
+from aider.args_formatter import MarkdownHelpFormatter
+
+from .dump import dump  # noqa: F401
 
 
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
         description="aider is GPT powered coding in your terminal",
-        formatter_class=CustomHelpFormatter,
         add_config_file_help=True,
         default_config_files=default_config_files,
         auto_env_var_prefix="AIDER_",
@@ -455,9 +456,15 @@ def get_parser(default_config_files, git_root):
 
 def get_help():
     os.environ["COLUMNS"] = "100"
-    sys.argv[0] = "aider"
+    sys.argv = ["aider"]
     parser = get_parser([], None)
-    parser.formatter_class = CustomHelpFormatter
+
+    # This instantiates all the action.env_var values
+    parser.parse_known_args()
+
+    parser.formatter_class = MarkdownHelpFormatter
+
+    return argparse.ArgumentParser.format_help(parser)
     return parser.format_help()
 
 

commit 2d62e3fb1f89c9df0c476e7857ae0aa23d8aad6c
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 6 12:40:25 2024 -0700

    add sample aider.conf.yml

diff --git a/aider/args.py b/aider/args.py
index a04d8878..ffdee078 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -7,7 +7,7 @@ import sys
 import configargparse
 
 from aider import __version__, models
-from aider.args_formatter import MarkdownHelpFormatter
+from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter
 
 from .dump import dump  # noqa: F401
 
@@ -468,6 +468,20 @@ def get_help():
     return parser.format_help()
 
 
+def get_sample_yaml():
+    os.environ["COLUMNS"] = "100"
+    sys.argv = ["aider"]
+    parser = get_parser([], None)
+
+    # This instantiates all the action.env_var values
+    parser.parse_known_args()
+
+    parser.formatter_class = YamlHelpFormatter
+
+    return argparse.ArgumentParser.format_help(parser)
+    return parser.format_help()
+
+
 def main():
     print(get_help())
 

commit 645ace1d0e78da18f6d596901bce258e322777f4
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 6 12:46:07 2024 -0700

    fix defaults in sample yml

diff --git a/aider/args.py b/aider/args.py
index ffdee078..6c06978a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -483,7 +483,7 @@ def get_sample_yaml():
 
 
 def main():
-    print(get_help())
+    print(get_sample_yaml())
 
 
 if __name__ == "__main__":

commit 65c9a7866a474b288b14b6df157684310c516a39
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 6 13:40:16 2024 -0700

    improved handling of defaults

diff --git a/aider/args.py b/aider/args.py
index 6c06978a..a614c457 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -483,7 +483,12 @@ def get_sample_yaml():
 
 
 def main():
-    print(get_sample_yaml())
+    arg = sys.argv[1] if len(sys.argv[1:]) else None
+
+    if arg == "md":
+        print(get_help())
+    else:
+        print(get_sample_yaml())
 
 
 if __name__ == "__main__":

commit 30f4a905c1085eff51af89cd7bd0f424f51f2732
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 6 14:00:14 2024 -0700

    renamed config/options and get_md_help()

diff --git a/aider/args.py b/aider/args.py
index a614c457..f747016d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -454,8 +454,8 @@ def get_parser(default_config_files, git_root):
     return parser
 
 
-def get_help():
-    os.environ["COLUMNS"] = "100"
+def get_md_help():
+    os.environ["COLUMNS"] = "70"
     sys.argv = ["aider"]
     parser = get_parser([], None)
 
@@ -486,7 +486,7 @@ def main():
     arg = sys.argv[1] if len(sys.argv[1:]) else None
 
     if arg == "md":
-        print(get_help())
+        print(get_md_help())
     else:
         print(get_sample_yaml())
 

commit 098944a133e0ca65cbd081b2c39748f6deb527fe
Author: develmusa <contact@develmusa.digital>
Date:   Sun Jun 9 12:35:42 2024 +0200

    Update help text for specifying the API key to mention Anthropic instead of OpenAI.

diff --git a/aider/args.py b/aider/args.py
index f747016d..35e49b1e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -36,7 +36,7 @@ def get_parser(default_config_files, git_root):
         "--anthropic-api-key",
         metavar="ANTHROPIC_API_KEY",
         env_var="ANTHROPIC_API_KEY",
-        help="Specify the OpenAI API key",
+        help="Specify the Anthropic API key",
     )
     default_model = models.DEFAULT_MODEL_NAME
     group.add_argument(

commit 196c1314eb70544f3e03271439133da35e8b13e6
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Jun 10 21:09:46 2024 -0700

    Add support for VI editing mode in the terminal.

diff --git a/aider/args.py b/aider/args.py
index 35e49b1e..c6aeda37 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -21,6 +21,11 @@ def get_parser(default_config_files, git_root):
     )
     group = parser.add_argument_group("Main")
     group.add_argument(
+        "--vim",
+        action="store_true",
+        help="Use VI editing mode in the terminal (default: False)",
+        default=False,
+    )
         "files",
         metavar="FILE",
         nargs="*",

commit 05a74d67dec697550fcd387386da19a3de2ef55a
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Jun 10 21:16:33 2024 -0700

    finished --vim

diff --git a/aider/args.py b/aider/args.py
index c6aeda37..389de743 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -26,6 +26,7 @@ def get_parser(default_config_files, git_root):
         help="Use VI editing mode in the terminal (default: False)",
         default=False,
     )
+    group.add_argument(
         "files",
         metavar="FILE",
         nargs="*",

commit d91707f73ee5345aa4c5e5e667612363632d6870
Author: Krazer <caseymcc@krazer.net>
Date:   Tue Jun 11 13:07:19 2024 -0500

    all models to be registered with litellm

diff --git a/aider/args.py b/aider/args.py
index 35e49b1e..ba931f42 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -135,6 +135,23 @@ def get_parser(default_config_files, git_root):
         env_var="OPENAI_ORGANIZATION_ID",
         help="Specify the OpenAI organization ID",
     )
+    group.add_argument(
+        "--model_file",
+        metavar="MODEL_FILE",
+        default=None,
+        help={
+            "File with model definitions to be registered for info/cost, json formated",
+            "  {"
+            "    \"gpt-4\": {",
+            "      \"max_tokens\": 8192,",
+            "      \"input_cost_per_token\": 0.00003,",
+            "      \"output_cost_per_token\": 0.00006,",
+            "      \"litellm_provider\": \"openai\",",
+            "      \"mode\": \"chat\"",
+            "    },",
+            "  }"
+        }
+    )
     group.add_argument(
         "--edit-format",
         metavar="EDIT_FORMAT",

commit acccbb15129e44e36186251023ba12d3c3f3044f
Author: Krazer <caseymcc@krazer.net>
Date:   Tue Jun 11 13:14:22 2024 -0500

    update command line arg

diff --git a/aider/args.py b/aider/args.py
index ba931f42..6b97ea13 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -136,7 +136,7 @@ def get_parser(default_config_files, git_root):
         help="Specify the OpenAI organization ID",
     )
     group.add_argument(
-        "--model_file",
+        "--model-file",
         metavar="MODEL_FILE",
         default=None,
         help={

commit 568d72ebe882cb43c6070d66d6589710ee3ab6a6
Author: Krazer <caseymcc@krazer.net>
Date:   Tue Jun 11 14:09:45 2024 -0500

    update docs

diff --git a/aider/args.py b/aider/args.py
index 6b97ea13..bc3e36ff 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -140,7 +140,7 @@ def get_parser(default_config_files, git_root):
         metavar="MODEL_FILE",
         default=None,
         help={
-            "File with model definitions to be registered for info/cost, json formated",
+            "Specify a file with model definitions (info and cost) to be registered with litellm, json formated",
             "  {"
             "    \"gpt-4\": {",
             "      \"max_tokens\": 8192,",

commit 2f6e360188b297279c9fb0dd6353d97f04b7f6d9
Merge: ba1ae76f a44119bb
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Tue Jun 11 13:20:02 2024 -0700

    Merge pull request #666 from caseymcc/register_model
    
    Allow models to be registered with litellm


commit fb3cc98da5da9ff1f7405613b5eb1cf1928109fd
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Jun 11 13:29:05 2024 -0700

    cleanup --model-metadata-file

diff --git a/aider/args.py b/aider/args.py
index 2c10f849..4fc95606 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -142,21 +142,10 @@ def get_parser(default_config_files, git_root):
         help="Specify the OpenAI organization ID",
     )
     group.add_argument(
-        "--model-file",
+        "--model-metadata-file",
         metavar="MODEL_FILE",
         default=None,
-        help={
-            "Specify a file with model definitions (info and cost) to be registered with litellm, json formated",
-            "  {"
-            "    \"gpt-4\": {",
-            "      \"max_tokens\": 8192,",
-            "      \"input_cost_per_token\": 0.00003,",
-            "      \"output_cost_per_token\": 0.00006,",
-            "      \"litellm_provider\": \"openai\",",
-            "      \"mode\": \"chat\"",
-            "    },",
-            "  }"
-        }
+        help="Specify a file with context window and costs for unknown models",
     )
     group.add_argument(
         "--edit-format",

commit 486c5ce65ca5e48958c148ad302820f2ab02079b
Author: Krazer <caseymcc@krazer.net>
Date:   Tue Jun 11 17:15:48 2024 -0500

    add support to load/override model settings

diff --git a/aider/args.py b/aider/args.py
index 4fc95606..b67756db 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -141,9 +141,15 @@ def get_parser(default_config_files, git_root):
         env_var="OPENAI_ORGANIZATION_ID",
         help="Specify the OpenAI organization ID",
     )
+    group.add_argument(
+        "--model-settings-file",
+        metavar="MODEL_SETTINGS_FILE",
+        default=None,
+        help="Specify a file with aider model settings for unknown models",
+    )
     group.add_argument(
         "--model-metadata-file",
-        metavar="MODEL_FILE",
+        metavar="MODEL_METADATA_FILE",
         default=None,
         help="Specify a file with context window and costs for unknown models",
     )

commit a07492b90a9772bacdad0cfc5fc26b52cfb11907
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jun 12 11:30:26 2024 -0700

    moved --vim to Other Settings

diff --git a/aider/args.py b/aider/args.py
index 4fc95606..52d5253f 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -20,12 +20,6 @@ def get_parser(default_config_files, git_root):
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")
-    group.add_argument(
-        "--vim",
-        action="store_true",
-        help="Use VI editing mode in the terminal (default: False)",
-        default=False,
-    )
     group.add_argument(
         "files",
         metavar="FILE",
@@ -369,6 +363,12 @@ def get_parser(default_config_files, git_root):
 
     ##########
     group = parser.add_argument_group("Other Settings")
+    group.add_argument(
+        "--vim",
+        action="store_true",
+        help="Use VI editing mode in the terminal (default: False)",
+        default=False,
+    )
     group.add_argument(
         "--voice-language",
         metavar="VOICE_LANGUAGE",

commit 48d86a948126344bbc9a61d3361b88740923d053
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun Jun 16 20:56:12 2024 -0700

    updated history; restored YAMLConfigFileParser

diff --git a/aider/args.py b/aider/args.py
index 52d5253f..716bca4f 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -17,6 +17,7 @@ def get_parser(default_config_files, git_root):
         description="aider is GPT powered coding in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
+        config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")

commit e6e360a4ef568bb2d5c4eb60ad2b0c779fcaeff8
Author: Daniel Vainsencher <daniel.vainsencher@gmail.com>
Date:   Fri Jun 7 09:48:23 2024 -0400

    Added support for logging LLM history to a specified file.

diff --git a/aider/args.py b/aider/args.py
index f747016d..24682fa5 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -20,11 +20,17 @@ def get_parser(default_config_files, git_root):
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")
+    group.add_argument(
+        "--llm-history-file",
+        metavar="LLM_HISTORY_FILE",
+        default=".aider.llm.history",
+        help="Specify the LLM history file (default: .aider.llm.history)",
+    )
     group.add_argument(
         "files",
         metavar="FILE",
         nargs="*",
-        help="files to edit with an LLM (optional)",
+        help="files to edit with an LLM (optional)"
     )
     group.add_argument(
         "--openai-api-key",

commit c40b3fa3106c6fee80a0163b8ee07c6d65c963f9
Author: Daniel Vainsencher <daniel.vainsencher@gmail.com>
Date:   Wed Jun 12 18:28:55 2024 -0400

    Review comments

diff --git a/aider/args.py b/aider/args.py
index 24682fa5..a96dc196 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -23,8 +23,8 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--llm-history-file",
         metavar="LLM_HISTORY_FILE",
-        default=".aider.llm.history",
-        help="Specify the LLM history file (default: .aider.llm.history)",
+        default=None,
+        help="Log the conversation with the LLM to this file (for example, .aider.llm.history)",
     )
     group.add_argument(
         "files",

commit 3e9f6dcca2d863d0845bfd5b245391db28325c8f
Merge: c40b3fa3 a07492b9
Author: Daniel Vainsencher <daniel.vainsencher@gmail.com>
Date:   Wed Jun 12 18:32:48 2024 -0400

    Merge branch 'main' into dvf_llm_log


commit a596a32290cef241365f9e6e89492e6a5e753fdd
Merge: fab14fcd 3e9f6dcc
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Mon Jun 17 13:58:46 2024 -0700

    Merge pull request #631 from daniel-vainsencher/dvf_llm_log


commit 249109ba9a14aef66887267191092d3e8e58d8a4
Author: John-Mason P. Shackelford <jpshack@gmail.com>
Date:   Fri May 31 16:16:35 2024 -0400

    All AIDER_* environment vars may now be placed within .env

diff --git a/aider/args.py b/aider/args.py
index 070905bb..4b0b1bcc 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -12,6 +12,21 @@ from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter
 from .dump import dump  # noqa: F401
 
 
+def default_env_file(git_root):
+    return os.path.join(git_root, ".env") if git_root else ".env"
+
+
+def get_preparser(git_root):
+    parser = configargparse.ArgumentParser(add_help=False)
+    parser.add_argument(
+        "--env-file",
+        metavar="ENV_FILE",
+        default=default_env_file(git_root),
+        help="Specify the .env file to load (default: .env in git root)",
+    )
+    return parser
+
+
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
         description="aider is GPT powered coding in your terminal",
@@ -184,11 +199,12 @@ def get_parser(default_config_files, git_root):
             " max_chat_history_tokens."
         ),
     )
-    default_env_file = os.path.join(git_root, ".env") if git_root else ".env"
+    # This is a duplicate of the argument in the preparser and is a no-op by this time of
+    # argument parsing, but it's here so that the help is displayed as expected.
     group.add_argument(
         "--env-file",
         metavar="ENV_FILE",
-        default=default_env_file,
+        default=default_env_file(git_root),
         help="Specify the .env file to load (default: .env in git root)",
     )
 

commit fed0bf55c2e4c19e4b855a14d74cb88be7435b9d
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Jun 18 11:34:45 2024 -0700

    Add support for generating dotenv help text.

diff --git a/aider/args.py b/aider/args.py
index 4b0b1bcc..c6b44acc 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -7,7 +7,7 @@ import sys
 import configargparse
 
 from aider import __version__, models
-from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter
+from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter#, DotEnvFormatter
 
 from .dump import dump  # noqa: F401
 
@@ -516,16 +516,31 @@ def get_sample_yaml():
     return argparse.ArgumentParser.format_help(parser)
     return parser.format_help()
 
+def get_sample_dotenv():
+    os.environ["COLUMNS"] = "120"
+    sys.argv = ["aider"]
+    parser = get_parser([], None)
+
+    # This instantiates all the action.env_var values
+    parser.parse_known_args()
+
+    parser.formatter_class = DotEnvFormatter
+
+    return argparse.ArgumentParser.format_help(parser)
+    return parser.format_help()
 
 def main():
     arg = sys.argv[1] if len(sys.argv[1:]) else None
 
     if arg == "md":
         print(get_md_help())
+    elif arg == "dotenv":
+        print(get_sample_dotenv())
     else:
         print(get_sample_yaml())
 
 
+
 if __name__ == "__main__":
     status = main()
     sys.exit(status)

commit 289ab516e912ca9862067877c58b53a67ac70c5d
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Jun 18 11:34:46 2024 -0700

    Added DotEnvFormatter class for formatting .env help text in argparse.

diff --git a/aider/args.py b/aider/args.py
index c6b44acc..98b61290 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -7,7 +7,7 @@ import sys
 import configargparse
 
 from aider import __version__, models
-from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter#, DotEnvFormatter
+from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter, DotEnvFormatter
 
 from .dump import dump  # noqa: F401
 

commit 6623110fb0a1554c980d808dbc38bbc5bf50c25c
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 20 14:12:51 2024 -0700

    Updated --sonnet to use Claude 3.5 Sonnet

diff --git a/aider/args.py b/aider/args.py
index 98b61290..b0da24da 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -7,7 +7,11 @@ import sys
 import configargparse
 
 from aider import __version__, models
-from aider.args_formatter import MarkdownHelpFormatter, YamlHelpFormatter, DotEnvFormatter
+from aider.args_formatter import (
+    DotEnvFormatter,
+    MarkdownHelpFormatter,
+    YamlHelpFormatter,
+)
 
 from .dump import dump  # noqa: F401
 
@@ -43,10 +47,7 @@ def get_parser(default_config_files, git_root):
         help="Log the conversation with the LLM to this file (for example, .aider.llm.history)",
     )
     group.add_argument(
-        "files",
-        metavar="FILE",
-        nargs="*",
-        help="files to edit with an LLM (optional)"
+        "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
     group.add_argument(
         "--openai-api-key",
@@ -75,7 +76,7 @@ def get_parser(default_config_files, git_root):
         const=opus_model,
         help=f"Use {opus_model} model for the main chat",
     )
-    sonnet_model = "claude-3-sonnet-20240229"
+    sonnet_model = "claude-3-5-sonnet-20240620"
     group.add_argument(
         "--sonnet",
         action="store_const",
@@ -516,6 +517,7 @@ def get_sample_yaml():
     return argparse.ArgumentParser.format_help(parser)
     return parser.format_help()
 
+
 def get_sample_dotenv():
     os.environ["COLUMNS"] = "120"
     sys.argv = ["aider"]
@@ -529,6 +531,7 @@ def get_sample_dotenv():
     return argparse.ArgumentParser.format_help(parser)
     return parser.format_help()
 
+
 def main():
     arg = sys.argv[1] if len(sys.argv[1:]) else None
 
@@ -540,7 +543,6 @@ def main():
         print(get_sample_yaml())
 
 
-
 if __name__ == "__main__":
     status = main()
     sys.exit(status)

commit d73fddccb9dd34704fad6ddf52ab46592498dd4c
Author: Paul Gauthier <aider@paulg.org>
Date:   Fri Jun 21 07:46:34 2024 -0700

    Added --verify-ssl #664

diff --git a/aider/args.py b/aider/args.py
index b0da24da..48ba2db5 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -158,6 +158,12 @@ def get_parser(default_config_files, git_root):
         env_var="OPENAI_ORGANIZATION_ID",
         help="Specify the OpenAI organization ID",
     )
+    group.add_argument(
+        "--verify-ssl",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Verify the SSL cert when connecting to models (default: True)",
+    )
     group.add_argument(
         "--model-metadata-file",
         metavar="MODEL_FILE",

commit b6fa02044f32d544df8d7347af320fb35451ae0f
Merge: c7695797 4fed045f
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Fri Jun 21 16:57:33 2024 -0700

    Merge branch 'main' into register_settings

diff --cc aider/args.py
index b67756db,48ba2db5..47efeb7e
--- a/aider/args.py
+++ b/aider/args.py
@@@ -142,17 -159,17 +159,22 @@@ def get_parser(default_config_files, gi
          help="Specify the OpenAI organization ID",
      )
      group.add_argument(
 -        "--verify-ssl",
 -        action=argparse.BooleanOptionalAction,
 -        default=True,
 -        help="Verify the SSL cert when connecting to models (default: True)",
 -    )
 +        "--model-settings-file",
 +        metavar="MODEL_SETTINGS_FILE",
 +        default=None,
 +        help="Specify a file with aider model settings for unknown models",
-     )
      group.add_argument(
          "--model-metadata-file",
 -        metavar="MODEL_FILE",
 +        metavar="MODEL_METADATA_FILE",
          default=None,
          help="Specify a file with context window and costs for unknown models",
      )
++    group.add_argument(
++        "--verify-ssl",
++        action=argparse.BooleanOptionalAction,
++        default=True,
++        help="Verify the SSL cert when connecting to models (default: True)",
++    )      
      group.add_argument(
          "--edit-format",
          metavar="EDIT_FORMAT",

commit 8c5c2d27a4dac78de9ee5cda5d45c91834b56665
Author: Paul Gauthier <aider@paulg.org>
Date:   Fri Jun 21 16:58:18 2024 -0700

    missing ); update docs

diff --git a/aider/args.py b/aider/args.py
index 47efeb7e..fb395e90 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -163,6 +163,7 @@ def get_parser(default_config_files, git_root):
         metavar="MODEL_SETTINGS_FILE",
         default=None,
         help="Specify a file with aider model settings for unknown models",
+    )
     group.add_argument(
         "--model-metadata-file",
         metavar="MODEL_METADATA_FILE",
@@ -174,7 +175,7 @@ def get_parser(default_config_files, git_root):
         action=argparse.BooleanOptionalAction,
         default=True,
         help="Verify the SSL cert when connecting to models (default: True)",
-    )      
+    )
     group.add_argument(
         "--edit-format",
         metavar="EDIT_FORMAT",

commit c207c7839ab071d38f623edf1d363446bd1716a5
Author: Paul Gauthier <aider@paulg.org>
Date:   Fri Jun 21 17:14:03 2024 -0700

    Added --attribute-author/committer options #698

diff --git a/aider/args.py b/aider/args.py
index fb395e90..757d0e17 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -344,6 +344,18 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable commits when repo is found dirty (default: True)",
     )
+    group.add_argument(
+        "--attribute-author",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Attribute aider code changes in the git author name (default: True)",
+    )
+    group.add_argument(
+        "--attribute-committer",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Attribute aider commits in the git committer name (default: True)",
+    )
     group.add_argument(
         "--dry-run",
         action=argparse.BooleanOptionalAction,

commit 95a4ed47e6e4484ad7cfec1b19838ef71493249d
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Jun 22 14:01:01 2024 -0700

    Allow pre-parser to read the yaml, in case user wants to include env-file: option there

diff --git a/aider/args.py b/aider/args.py
index 757d0e17..3a965952 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -20,14 +20,30 @@ def default_env_file(git_root):
     return os.path.join(git_root, ".env") if git_root else ".env"
 
 
-def get_preparser(git_root):
-    parser = configargparse.ArgumentParser(add_help=False)
+def get_preparser(default_config_files, git_root):
+    parser = configargparse.ArgumentParser(
+        description="aider is GPT powered coding in your terminal",
+        add_config_file_help=True,
+        default_config_files=default_config_files,
+        config_file_parser_class=configargparse.YAMLConfigFileParser,
+        auto_env_var_prefix="AIDER_",
+    )
     parser.add_argument(
         "--env-file",
         metavar="ENV_FILE",
         default=default_env_file(git_root),
         help="Specify the .env file to load (default: .env in git root)",
     )
+    parser.add_argument(
+        "-c",
+        "--config",
+        is_config_file=True,
+        metavar="CONFIG_FILE",
+        help=(
+            "Specify the config file (default: search for .aider.conf.yml in git root, cwd"
+            " or home directory)"
+        ),
+    )
     return parser
 
 

commit 9b6024393220b3bfbad06822f744b3c5f0ff8c26
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Jun 22 14:03:34 2024 -0700

    refac

diff --git a/aider/args.py b/aider/args.py
index 3a965952..dc9b7def 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -28,12 +28,22 @@ def get_preparser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
+
+    add_env_file(parser, git_root)
+    add_config_option(parser)
+    return parser
+
+
+def add_env_file(parser, git_root):
     parser.add_argument(
         "--env-file",
         metavar="ENV_FILE",
         default=default_env_file(git_root),
         help="Specify the .env file to load (default: .env in git root)",
     )
+
+
+def add_config_option(parser):
     parser.add_argument(
         "-c",
         "--config",
@@ -44,7 +54,6 @@ def get_preparser(default_config_files, git_root):
             " or home directory)"
         ),
     )
-    return parser
 
 
 def get_parser(default_config_files, git_root):
@@ -230,12 +239,7 @@ def get_parser(default_config_files, git_root):
     )
     # This is a duplicate of the argument in the preparser and is a no-op by this time of
     # argument parsing, but it's here so that the help is displayed as expected.
-    group.add_argument(
-        "--env-file",
-        metavar="ENV_FILE",
-        default=default_env_file(git_root),
-        help="Specify the .env file to load (default: .env in git root)",
-    )
+    add_env_file(group, git_root)
 
     ##########
     group = parser.add_argument_group("History Files")
@@ -509,16 +513,7 @@ def get_parser(default_config_files, git_root):
         default="utf-8",
         help="Specify the encoding for input and output (default: utf-8)",
     )
-    group.add_argument(
-        "-c",
-        "--config",
-        is_config_file=True,
-        metavar="CONFIG_FILE",
-        help=(
-            "Specify the config file (default: search for .aider.conf.yml in git root, cwd"
-            " or home directory)"
-        ),
-    )
+    add_config_option(group)
     group.add_argument(
         "--gui",
         "--browser",

commit 29905a534a24aff8a13f851978f7aaaaafa5eb22
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Jun 25 06:08:43 2024 -0700

    restored full --help

diff --git a/aider/args.py b/aider/args.py
index dc9b7def..bb3fd2cf 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -20,42 +20,6 @@ def default_env_file(git_root):
     return os.path.join(git_root, ".env") if git_root else ".env"
 
 
-def get_preparser(default_config_files, git_root):
-    parser = configargparse.ArgumentParser(
-        description="aider is GPT powered coding in your terminal",
-        add_config_file_help=True,
-        default_config_files=default_config_files,
-        config_file_parser_class=configargparse.YAMLConfigFileParser,
-        auto_env_var_prefix="AIDER_",
-    )
-
-    add_env_file(parser, git_root)
-    add_config_option(parser)
-    return parser
-
-
-def add_env_file(parser, git_root):
-    parser.add_argument(
-        "--env-file",
-        metavar="ENV_FILE",
-        default=default_env_file(git_root),
-        help="Specify the .env file to load (default: .env in git root)",
-    )
-
-
-def add_config_option(parser):
-    parser.add_argument(
-        "-c",
-        "--config",
-        is_config_file=True,
-        metavar="CONFIG_FILE",
-        help=(
-            "Specify the config file (default: search for .aider.conf.yml in git root, cwd"
-            " or home directory)"
-        ),
-    )
-
-
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
         description="aider is GPT powered coding in your terminal",
@@ -239,7 +203,12 @@ def get_parser(default_config_files, git_root):
     )
     # This is a duplicate of the argument in the preparser and is a no-op by this time of
     # argument parsing, but it's here so that the help is displayed as expected.
-    add_env_file(group, git_root)
+    group.add_argument(
+        "--env-file",
+        metavar="ENV_FILE",
+        default=default_env_file(git_root),
+        help="Specify the .env file to load (default: .env in git root)",
+    )
 
     ##########
     group = parser.add_argument_group("History Files")
@@ -513,7 +482,16 @@ def get_parser(default_config_files, git_root):
         default="utf-8",
         help="Specify the encoding for input and output (default: utf-8)",
     )
-    add_config_option(group)
+    group.add_argument(
+        "-c",
+        "--config",
+        is_config_file=True,
+        metavar="CONFIG_FILE",
+        help=(
+            "Specify the config file (default: search for .aider.conf.yml in git root, cwd"
+            " or home directory)"
+        ),
+    )
     group.add_argument(
         "--gui",
         "--browser",

commit ec682fd683339ba97405bc7e404bc9eaf80ed9b4
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Jun 27 10:21:25 2024 -0700

    Added an option to prefix commit messages with 'aider: '.

diff --git a/aider/args.py b/aider/args.py
index bb3fd2cf..473a9dc2 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -345,6 +345,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Attribute aider commits in the git committer name (default: True)",
     )
+    group.add_argument(
+        "--attribute-commit-message",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Prefix commit messages with 'aider: ' (default: False)",
+    )
     group.add_argument(
         "--dry-run",
         action=argparse.BooleanOptionalAction,

commit fa7255cbf533b2ed36e0f56a38b3dfbf4f81b75b
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jun 27 10:34:48 2024 -0700

    moved --llm-history-file in args

diff --git a/aider/args.py b/aider/args.py
index 473a9dc2..474fb225 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -29,12 +29,6 @@ def get_parser(default_config_files, git_root):
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")
-    group.add_argument(
-        "--llm-history-file",
-        metavar="LLM_HISTORY_FILE",
-        default=None,
-        help="Log the conversation with the LLM to this file (for example, .aider.llm.history)",
-    )
     group.add_argument(
         "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
@@ -236,6 +230,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Restore the previous chat history messages (default: False)",
     )
+    group.add_argument(
+        "--llm-history-file",
+        metavar="LLM_HISTORY_FILE",
+        default=None,
+        help="Log the conversation with the LLM to this file (for example, .aider.llm.history)",
+    )
 
     ##########
     group = parser.add_argument_group("Output Settings")

commit 6dc7a8b4a4a1f9319948c0bcdac8a069e9f6948a
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Jul 1 15:16:06 2024 -0300

    Use sonnet by default; updated docs

diff --git a/aider/args.py b/aider/args.py
index 474fb225..7d4e6a16 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -6,7 +6,7 @@ import sys
 
 import configargparse
 
-from aider import __version__, models
+from aider import __version__
 from aider.args_formatter import (
     DotEnvFormatter,
     MarkdownHelpFormatter,
@@ -44,12 +44,11 @@ def get_parser(default_config_files, git_root):
         env_var="ANTHROPIC_API_KEY",
         help="Specify the Anthropic API key",
     )
-    default_model = models.DEFAULT_MODEL_NAME
     group.add_argument(
         "--model",
         metavar="MODEL",
-        default=default_model,
-        help=f"Specify the model to use for the main chat (default: {default_model})",
+        default=None,
+        help="Specify the model to use for the main chat",
     )
     opus_model = "claude-3-opus-20240229"
     group.add_argument(

commit 4cd7d9235163ebfe45eaf064b33025d3687dd626
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Jul 1 19:45:22 2024 -0300

    Removed config_file_parser_class=configargparse.YAMLConfigFileParser to use more flexible DefaultConfigFileParser #767

diff --git a/aider/args.py b/aider/args.py
index 7d4e6a16..c16298fa 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -25,7 +25,6 @@ def get_parser(default_config_files, git_root):
         description="aider is GPT powered coding in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
-        config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")

commit 41ac55c255fe80be77d25a429583c61d68b37dfc
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jul 3 11:57:18 2024 -0300

    The --test-cmd arg should not be a list #741 #657

diff --git a/aider/args.py b/aider/args.py
index c16298fa..7a69e04a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -385,7 +385,6 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--test-cmd",
-        action="append",
         help="Specify command to run tests",
         default=[],
     )

commit 8a1fbfd95d494633afe6f9e4824bd7943313e982
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jul 3 14:06:39 2024 -0300

    Added --exit

diff --git a/aider/args.py b/aider/args.py
index 7a69e04a..a2c28a09 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -462,6 +462,12 @@ def get_parser(default_config_files, git_root):
         help="Print the system prompts and exit (debug)",
         default=False,
     )
+    group.add_argument(
+        "--exit",
+        action="store_true",
+        help="Do all startup activities then exit before accepting user input (debug)",
+        default=False,
+    )
     group.add_argument(
         "--message",
         "--msg",

commit 9d66cdecda0a9ff270ffadc3bd1378fdebd6d0ff
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Jul 4 11:44:50 2024 -0300

    Renamed .aider.model... files

diff --git a/aider/args.py b/aider/args.py
index a2c28a09..eadc2b75 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -142,13 +142,13 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--model-settings-file",
         metavar="MODEL_SETTINGS_FILE",
-        default=None,
+        default=".aider.model.settings.yml",
         help="Specify a file with aider model settings for unknown models",
     )
     group.add_argument(
         "--model-metadata-file",
         metavar="MODEL_METADATA_FILE",
-        default=None,
+        default=".aider.model.metadata.json",
         help="Specify a file with context window and costs for unknown models",
     )
     group.add_argument(

commit 6c38306eabe202350bdb563a6df28b827514db59
Author: Paul Gauthier <aider@paulg.org>
Date:   Fri Jul 12 21:38:45 2024 +0100

    Automatically install the new aider version

diff --git a/aider/args.py b/aider/args.py
index eadc2b75..1d5774f7 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -422,15 +422,16 @@ def get_parser(default_config_files, git_root):
         help="Show the version number and exit",
     )
     group.add_argument(
-        "--check-update",
+        "--just-check-update",
         action="store_true",
         help="Check for updates and return status in the exit code",
         default=False,
     )
     group.add_argument(
-        "--skip-check-update",
-        action="store_true",
-        help="Skips checking for the update when the program runs",
+        "--check-update",
+        action=argparse.BooleanOptionalAction,
+        help="Check for new aider versions on launch",
+        default=True,
     )
     group.add_argument(
         "--apply",

commit 28772ddc03068c1caa1a95fa26431b405cf2bbed
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sun Jul 28 20:58:46 2024 -0300

    Add support for multiple file arguments using --file

diff --git a/aider/args.py b/aider/args.py
index 1d5774f7..d7f3475e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -31,6 +31,9 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
+    group.add_argument(
+        "--file", action="append", metavar="FILE", help="specify a file to edit (can be used multiple times)"
+    )
     group.add_argument(
         "--openai-api-key",
         metavar="OPENAI_API_KEY",

commit 4dfdddf0d9892f3b1e1cdef734c289891c878938
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Wed Jul 31 09:46:13 2024 -0300

    feat: add --commit-prompt switch
    
    The new `--commit-prompt` switch allows users to specify a custom prompt for generating commit messages. This feature is implemented by adding the new argument to the argument parser in `aider/args.py` and passing it to the `Coder.create` method in `aider/main.py`.

diff --git a/aider/args.py b/aider/args.py
index d7f3475e..307eb7f6 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -352,6 +352,11 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Prefix commit messages with 'aider: ' (default: False)",
     )
+    group.add_argument(
+        "--commit-prompt",
+        metavar="PROMPT",
+        help="Specify a custom prompt for generating commit messages",
+    )
     group.add_argument(
         "--dry-run",
         action=argparse.BooleanOptionalAction,

commit 080953760fc619fbdc7dc469a4732b6a5edab40c
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jul 31 09:52:18 2024 -0300

    formatting

diff --git a/aider/args.py b/aider/args.py
index 307eb7f6..ba371cb1 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -32,7 +32,10 @@ def get_parser(default_config_files, git_root):
         "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
     group.add_argument(
-        "--file", action="append", metavar="FILE", help="specify a file to edit (can be used multiple times)"
+        "--file",
+        action="append",
+        metavar="FILE",
+        help="specify a file to edit (can be used multiple times)",
     )
     group.add_argument(
         "--openai-api-key",

commit b15e96a7b09bf7a8bf3f2c80a81d4e51248662b3
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Jul 31 10:53:34 2024 -0300

    Move new args to Other section

diff --git a/aider/args.py b/aider/args.py
index ba371cb1..9bffb116 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -31,12 +31,6 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
-    group.add_argument(
-        "--file",
-        action="append",
-        metavar="FILE",
-        help="specify a file to edit (can be used multiple times)",
-    )
     group.add_argument(
         "--openai-api-key",
         metavar="OPENAI_API_KEY",
@@ -355,6 +349,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Prefix commit messages with 'aider: ' (default: False)",
     )
+    group.add_argument(
+        "--commit",
+        action="store_true",
+        help="Commit all pending changes with a suitable commit message, then exit",
+        default=False,
+    )
     group.add_argument(
         "--commit-prompt",
         metavar="PROMPT",
@@ -367,12 +367,6 @@ def get_parser(default_config_files, git_root):
         help="Perform a dry run without modifying files (default: False)",
     )
     group = parser.add_argument_group("Fixing and committing")
-    group.add_argument(
-        "--commit",
-        action="store_true",
-        help="Commit all pending changes with a suitable commit message, then exit",
-        default=False,
-    )
     group.add_argument(
         "--lint",
         action="store_true",
@@ -414,6 +408,12 @@ def get_parser(default_config_files, git_root):
 
     ##########
     group = parser.add_argument_group("Other Settings")
+    group.add_argument(
+        "--file",
+        action="append",
+        metavar="FILE",
+        help="specify a file to edit (can be used multiple times)",
+    )
     group.add_argument(
         "--vim",
         action="store_true",

commit 88bfc74b52bd8cd6efd50c17f4e9e15b050eacea
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Aug 1 15:55:34 2024 -0300

    feat: Add --subtree-only argument and pass it to GitRepo

diff --git a/aider/args.py b/aider/args.py
index 9bffb116..3d559668 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -319,6 +319,12 @@ def get_parser(default_config_files, git_root):
         default=default_aiderignore_file,
         help="Specify the aider ignore file (default: .aiderignore in git root)",
     )
+    group.add_argument(
+        "--subtree-only",
+        action="store_true",
+        help="Only consider files in the current subtree of the git repository",
+        default=False,
+    )
     group.add_argument(
         "--auto-commits",
         action=argparse.BooleanOptionalAction,

commit 617b1bdee2c93b221131d24b0dd2765739810496
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Aug 5 14:41:56 2024 -0300

    Can force repo-map on with: --map-tokens 1024

diff --git a/aider/args.py b/aider/args.py
index 3d559668..ff061c4b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -181,7 +181,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--map-tokens",
         type=int,
-        default=1024,
+        default=None,
         help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
     )
     group.add_argument(

commit 064b0d954f5eb16a4089d8dbf6ea56471d558fd7
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Fri Aug 9 16:34:06 2024 -0300

    feat: Add --read parameter to specify read-only files

diff --git a/aider/args.py b/aider/args.py
index ff061c4b..a1299897 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -420,6 +420,12 @@ def get_parser(default_config_files, git_root):
         metavar="FILE",
         help="specify a file to edit (can be used multiple times)",
     )
+    group.add_argument(
+        "--read",
+        action="append",
+        metavar="FILE",
+        help="specify a read-only file (can be used multiple times)",
+    )
     group.add_argument(
         "--vim",
         action="store_true",

commit bba0735878f200cc46cd62de1d0d6c320ef66ea0
Author: Paul Gauthier <aider@paulg.org>
Date:   Fri Aug 9 18:09:42 2024 -0400

    feat: Add support for GPT-4 mini model

diff --git a/aider/args.py b/aider/args.py
index a1299897..20708b2a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -82,6 +82,14 @@ def get_parser(default_config_files, git_root):
         const=gpt_4o_model,
         help=f"Use {gpt_4o_model} model for the main chat",
     )
+    gpt_4o_mini_model = "gpt-4o-mini"
+    group.add_argument(
+        "--mini",
+        action="store_const",
+        dest="model",
+        const=gpt_4o_mini_model,
+        help=f"Use {gpt_4o_mini_model} model for the main chat",
+    )
     gpt_4_turbo_model = "gpt-4-1106-preview"
     group.add_argument(
         "--4-turbo",

commit 20271454c37ef81e7b6cdb09cc2cbc4bb4c9e466
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Aug 10 10:19:15 2024 -0700

    copy

diff --git a/aider/args.py b/aider/args.py
index 20708b2a..8b0b2fa0 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -361,7 +361,7 @@ def get_parser(default_config_files, git_root):
         "--attribute-commit-message",
         action=argparse.BooleanOptionalAction,
         default=False,
-        help="Prefix commit messages with 'aider: ' (default: False)",
+        help="Prefix commit messages with 'aider: ' if aider authored the changes (default: False)",
     )
     group.add_argument(
         "--commit",

commit 58d401cb225dc1fc5f10434322c49c51ed6d560d
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Aug 10 11:09:28 2024 -0700

    feat: Add --attribute-commit-message-committer and pass to Repo

diff --git a/aider/args.py b/aider/args.py
index 8b0b2fa0..4c6c5334 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -358,11 +358,17 @@ def get_parser(default_config_files, git_root):
         help="Attribute aider commits in the git committer name (default: True)",
     )
     group.add_argument(
-        "--attribute-commit-message",
+        "--attribute-commit-message-author",
         action=argparse.BooleanOptionalAction,
         default=False,
         help="Prefix commit messages with 'aider: ' if aider authored the changes (default: False)",
     )
+    group.add_argument(
+        "--attribute-commit-message-committer",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Prefix all commit messages with 'aider: ' (default: False)",
+    )
     group.add_argument(
         "--commit",
         action="store_true",

commit 7d270127cb68349ca6ecdb0356889f264cb46df4
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sun Aug 11 09:55:12 2024 -0700

    feat: Add --chat-mode as an alias for --edit-format

diff --git a/aider/args.py b/aider/args.py
index 4c6c5334..c063eb4f 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -166,7 +166,7 @@ def get_parser(default_config_files, git_root):
         help="Verify the SSL cert when connecting to models (default: True)",
     )
     group.add_argument(
-        "--edit-format",
+        "--edit-format", "--chat-mode",
         metavar="EDIT_FORMAT",
         default=None,
         help="Specify what edit format the LLM should use (default depends on model)",

commit 8e46582938cf7a07344886db745f3cf7f1df05c1
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sun Aug 11 09:55:16 2024 -0700

    style: Format command line arguments

diff --git a/aider/args.py b/aider/args.py
index c063eb4f..cd844616 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -166,7 +166,8 @@ def get_parser(default_config_files, git_root):
         help="Verify the SSL cert when connecting to models (default: True)",
     )
     group.add_argument(
-        "--edit-format", "--chat-mode",
+        "--edit-format",
+        "--chat-mode",
         metavar="EDIT_FORMAT",
         default=None,
         help="Specify what edit format the LLM should use (default depends on model)",

commit b11c17dbd415aa174f202a20bb70fb923a5c0093
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Aug 12 16:10:20 2024 -0700

    feat: Add optional analytics tracking

diff --git a/aider/args.py b/aider/args.py
index cd844616..f9bf549b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -547,6 +547,12 @@ def get_parser(default_config_files, git_root):
         help="Run aider in your browser",
         default=False,
     )
+    group.add_argument(
+        "--analytics",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable/disable analytics tracking (default: True)",
+    )
 
     return parser
 

commit 1a8763d98940077f51ee8d2edb28cc3b13393a2f
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Aug 12 18:27:40 2024 -0700

    feat: Add --analytics-log argument and pass it to Analytics

diff --git a/aider/args.py b/aider/args.py
index f9bf549b..05b0073a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -553,6 +553,11 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable/disable analytics tracking (default: True)",
     )
+    group.add_argument(
+        "--analytics-log",
+        metavar="ANALYTICS_LOG_FILE",
+        help="Specify a file to log analytics events",
+    )
 
     return parser
 

commit 64df0ad590e21fa37a9e90ec080f1e7f00311eb6
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Aug 12 20:41:10 2024 -0700

    feat: Add --analytics-disable option to disable analytics tracking

diff --git a/aider/args.py b/aider/args.py
index 05b0073a..00d5dd0b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -558,6 +558,12 @@ def get_parser(default_config_files, git_root):
         metavar="ANALYTICS_LOG_FILE",
         help="Specify a file to log analytics events",
     )
+    group.add_argument(
+        "--analytics-disable",
+        action="store_true",
+        help="Disable analytics tracking and mark as disabled in mixpanel.json",
+        default=False,
+    )
 
     return parser
 

commit 5f8df315e453ba7f21768fc3c4e03f5c45372c1e
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Aug 12 15:05:16 2024 -0700

    feat: Add --deepseek option for deepseek/deepseek-coder model

diff --git a/aider/args.py b/aider/args.py
index cd844616..2b18fb6a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -109,6 +109,14 @@ def get_parser(default_config_files, git_root):
         const=gpt_3_model_name,
         help=f"Use {gpt_3_model_name} model for the main chat",
     )
+    deepseek_model = "deepseek/deepseek-coder"
+    group.add_argument(
+        "--deepseek",
+        action="store_const",
+        dest="model",
+        const=deepseek_model,
+        help=f"Use {deepseek_model} model for the main chat",
+    )
 
     ##########
     group = parser.add_argument_group("Model Settings")

commit 485418d917cbf8a379f638be05c68c19935bc076
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Aug 12 15:06:55 2024 -0700

    feat: Add --deepseek-beta bool arg to use DeepSeek Coder via the beta API endpoint

diff --git a/aider/args.py b/aider/args.py
index 2b18fb6a..2091a39c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -117,6 +117,12 @@ def get_parser(default_config_files, git_root):
         const=deepseek_model,
         help=f"Use {deepseek_model} model for the main chat",
     )
+    group.add_argument(
+        "--deepseek-beta",
+        action="store_true",
+        help="Uses DeepSeek Coder via the beta API endpoint",
+        default=False,
+    )
 
     ##########
     group = parser.add_argument_group("Model Settings")

commit 2a1fb7d1508d380d6ba1bcc5fc6b61bd92b56499
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Aug 12 15:35:32 2024 -0700

    Clean up DEEPSEEK_API_BASE

diff --git a/aider/args.py b/aider/args.py
index 2091a39c..2b18fb6a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -117,12 +117,6 @@ def get_parser(default_config_files, git_root):
         const=deepseek_model,
         help=f"Use {deepseek_model} model for the main chat",
     )
-    group.add_argument(
-        "--deepseek-beta",
-        action="store_true",
-        help="Uses DeepSeek Coder via the beta API endpoint",
-        default=False,
-    )
 
     ##########
     group = parser.add_argument_group("Model Settings")

commit f52265362f44d931f04ca2e7bec1acb09d52a184
Merge: 00aa43d9 60a83215
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Aug 13 07:09:34 2024 -0700

    Merge branch 'main' into mixpanel


commit 1c321df457efa4934eeb31189351a548fe8f82dd
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Aug 13 07:23:46 2024 -0700

    feat: Move analytics arguments to their own section

diff --git a/aider/args.py b/aider/args.py
index e29d37d0..a04e020e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -436,6 +436,25 @@ def get_parser(default_config_files, git_root):
     )
 
     ##########
+    group = parser.add_argument_group("Analytics Settings")
+    group.add_argument(
+        "--analytics",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable/disable analytics tracking (default: True)",
+    )
+    group.add_argument(
+        "--analytics-log",
+        metavar="ANALYTICS_LOG_FILE",
+        help="Specify a file to log analytics events",
+    )
+    group.add_argument(
+        "--analytics-disable",
+        action="store_true",
+        help="Disable analytics tracking and mark as disabled in mixpanel.json",
+        default=False,
+    )
+
     group = parser.add_argument_group("Other Settings")
     group.add_argument(
         "--file",
@@ -555,23 +574,6 @@ def get_parser(default_config_files, git_root):
         help="Run aider in your browser",
         default=False,
     )
-    group.add_argument(
-        "--analytics",
-        action=argparse.BooleanOptionalAction,
-        default=False,
-        help="Enable/disable analytics tracking (default: True)",
-    )
-    group.add_argument(
-        "--analytics-log",
-        metavar="ANALYTICS_LOG_FILE",
-        help="Specify a file to log analytics events",
-    )
-    group.add_argument(
-        "--analytics-disable",
-        action="store_true",
-        help="Disable analytics tracking and mark as disabled in mixpanel.json",
-        default=False,
-    )
 
     return parser
 

commit d2435c2e00abef0654771e004985ace4a1810eb2
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Aug 13 10:02:54 2024 -0700

    copy

diff --git a/aider/args.py b/aider/args.py
index a04e020e..b70fa04c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -436,12 +436,12 @@ def get_parser(default_config_files, git_root):
     )
 
     ##########
-    group = parser.add_argument_group("Analytics Settings")
+    group = parser.add_argument_group("Analytics")
     group.add_argument(
         "--analytics",
         action=argparse.BooleanOptionalAction,
         default=False,
-        help="Enable/disable analytics tracking (default: True)",
+        help="Enable/disable analytics for one session (default: False)",
     )
     group.add_argument(
         "--analytics-log",
@@ -451,7 +451,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--analytics-disable",
         action="store_true",
-        help="Disable analytics tracking and mark as disabled in mixpanel.json",
+        help="Disable analytics forever",
         default=False,
     )
 

commit 4759297b67d3b273113cdf74b04db2ae3a107090
Author: Paul Gauthier <aider@paulg.org>
Date:   Fri Aug 16 11:03:14 2024 -0700

    disabled -> permanently_disabled

diff --git a/aider/args.py b/aider/args.py
index b70fa04c..9877e4e1 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -451,7 +451,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--analytics-disable",
         action="store_true",
-        help="Disable analytics forever",
+        help="Permanently disable analytics",
         default=False,
     )
 

commit 27a7102ad439f70838f01b7f25adc0fa864c9617
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Aug 17 06:32:34 2024 -0700

    feat: Add --map-refresh switch and pass it into RepoMap.refresh

diff --git a/aider/args.py b/aider/args.py
index 2b18fb6a..ab1839c4 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -201,6 +201,12 @@ def get_parser(default_config_files, git_root):
         default=None,
         help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
     )
+    group.add_argument(
+        "--map-refresh",
+        choices=["auto", "always", "files", "manual"],
+        default="auto",
+        help="Control when the repo map is refreshed (default: auto)",
+    )
     group.add_argument(
         "--max-chat-history-tokens",
         type=int,

commit 8326bd04dda90ac6c876199e1e8f3136ed7170fe
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Aug 17 06:46:18 2024 -0700

    feat: Add --cache-prompts bool option, default false

diff --git a/aider/args.py b/aider/args.py
index ab1839c4..71d42e34 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -207,6 +207,12 @@ def get_parser(default_config_files, git_root):
         default="auto",
         help="Control when the repo map is refreshed (default: auto)",
     )
+    group.add_argument(
+        "--cache-prompts",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable caching of prompts (forces map_refresh='files') (default: False)",
+    )
     group.add_argument(
         "--max-chat-history-tokens",
         type=int,

commit 34dc7cc37de0a8de1a7af7b4dca2cb10d01a7903
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Aug 19 15:36:13 2024 -0700

    fix: Improve prompt caching and repo map refresh logic

diff --git a/aider/args.py b/aider/args.py
index 71d42e34..d1b6e581 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -205,13 +205,13 @@ def get_parser(default_config_files, git_root):
         "--map-refresh",
         choices=["auto", "always", "files", "manual"],
         default="auto",
-        help="Control when the repo map is refreshed (default: auto)",
+        help="Control how often the repo map is refreshed (default: auto)",
     )
     group.add_argument(
         "--cache-prompts",
         action=argparse.BooleanOptionalAction,
         default=False,
-        help="Enable caching of prompts (forces map_refresh='files') (default: False)",
+        help="Enable caching of prompts (default: False)",
     )
     group.add_argument(
         "--max-chat-history-tokens",

commit 1ec02d7c7307a16a4cdada24951ddb9cd6251727
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Aug 20 12:45:56 2024 -0700

    Note that --map-tokens is suggested not max tokens

diff --git a/aider/args.py b/aider/args.py
index d1b6e581..eb1bb71d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -199,7 +199,7 @@ def get_parser(default_config_files, git_root):
         "--map-tokens",
         type=int,
         default=None,
-        help="Max number of tokens to use for repo map, use 0 to disable (default: 1024)",
+        help="Suggested number of tokens to use for repo map, use 0 to disable (default: 1024)",
     )
     group.add_argument(
         "--map-refresh",

commit 87d9a559cb83511f699316e2ae0f7c46810aaea7
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Aug 20 12:52:23 2024 -0700

    feat: Add --map-multiplier-no-files switch with default value of 2

diff --git a/aider/args.py b/aider/args.py
index eb1bb71d..a77d2804 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -213,6 +213,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable caching of prompts (default: False)",
     )
+    group.add_argument(
+        "--map-multiplier-no-files",
+        type=float,
+        default=2,
+        help="Multiplier for map tokens when no files are specified (default: 2)",
+    )
     group.add_argument(
         "--max-chat-history-tokens",
         type=int,

commit 27190c279d1ea9e9858aad610b353ff5113cbd2e
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Aug 21 11:12:44 2024 -0700

    updated gpt-4o date versions

diff --git a/aider/args.py b/aider/args.py
index a77d2804..0b32bd3c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -74,7 +74,7 @@ def get_parser(default_config_files, git_root):
         const=gpt_4_model,
         help=f"Use {gpt_4_model} model for the main chat",
     )
-    gpt_4o_model = "gpt-4o"
+    gpt_4o_model = "gpt-4o-2024-08-06"
     group.add_argument(
         "--4o",
         action="store_const",

commit 9d593c5fa27fede2479e923c6b5587aed76dea72
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Aug 26 16:26:23 2024 -0700

    feat: Add --cache-warming-pings option to Coder.create

diff --git a/aider/args.py b/aider/args.py
index 0b32bd3c..1341fda0 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -213,6 +213,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable caching of prompts (default: False)",
     )
+    group.add_argument(
+        "--cache-warming-pings",
+        type=int,
+        default=0,
+        help="Number of pings to warm up the cache (default: 0)",
+    )
     group.add_argument(
         "--map-multiplier-no-files",
         type=float,

commit a5c283d7c83c08004b9eb14a33101a2b9d46837d
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Aug 26 16:33:25 2024 -0700

    feat: Add prompt cache warming via `--cache-warming-pings`

diff --git a/aider/args.py b/aider/args.py
index 1341fda0..53b2dffb 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -217,7 +217,7 @@ def get_parser(default_config_files, git_root):
         "--cache-warming-pings",
         type=int,
         default=0,
-        help="Number of pings to warm up the cache (default: 0)",
+        help="Number of times to ping every 5min to keep prompt cache warm (default: 0)",
     )
     group.add_argument(
         "--map-multiplier-no-files",

commit 88195c4323b05895e32b67579e164698f1700574
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Aug 26 20:12:56 2024 -0700

    fix: Update prompt cache keepalive configuration

diff --git a/aider/args.py b/aider/args.py
index 53b2dffb..b2d3aead 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -214,10 +214,10 @@ def get_parser(default_config_files, git_root):
         help="Enable caching of prompts (default: False)",
     )
     group.add_argument(
-        "--cache-warming-pings",
+        "--cache-keepalive-pings",
         type=int,
         default=0,
-        help="Number of times to ping every 5min to keep prompt cache warm (default: 0)",
+        help="Number of times to ping at 5min intervals to keep prompt cache warm (default: 0)",
     )
     group.add_argument(
         "--map-multiplier-no-files",

commit 475a1ed6d6951e689e1f71a6f98d6739dbd2c0d6
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Aug 27 05:36:13 2024 -0700

    feat: Add --install-main-branch switch

diff --git a/aider/args.py b/aider/args.py
index b2d3aead..f228bbfd 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -503,6 +503,12 @@ def get_parser(default_config_files, git_root):
         help="Check for new aider versions on launch",
         default=True,
     )
+    group.add_argument(
+        "--install-main-branch",
+        action="store_true",
+        help="Install the latest version from the main branch",
+        default=False,
+    )
     group.add_argument(
         "--apply",
         metavar="FILE",

commit 17c2626f3903311aa69273ece86227e86f27734e
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Aug 27 08:46:54 2024 -0700

    feat: Add --upgrade argument to upgrade aider to the latest version

diff --git a/aider/args.py b/aider/args.py
index f228bbfd..b952f62e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -509,6 +509,12 @@ def get_parser(default_config_files, git_root):
         help="Install the latest version from the main branch",
         default=False,
     )
+    group.add_argument(
+        "--upgrade",
+        action="store_true",
+        help="Upgrade aider to the latest version from PyPI",
+        default=False,
+    )
     group.add_argument(
         "--apply",
         metavar="FILE",

commit 57809fbbbb4028a2c941314682361d36492d3023
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Aug 27 11:51:38 2024 -0700

    copy

diff --git a/aider/args.py b/aider/args.py
index b952f62e..652b6dfe 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -22,7 +22,7 @@ def default_env_file(git_root):
 
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
-        description="aider is GPT powered coding in your terminal",
+        description="aider is AI pair programming in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
         auto_env_var_prefix="AIDER_",

commit f33850ceabb00724b3a79205e098b1e3908af4bb
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Aug 27 13:30:31 2024 -0700

    feat: add --suggest-shell-commands option with default true

diff --git a/aider/args.py b/aider/args.py
index 652b6dfe..7d885758 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -591,6 +591,12 @@ def get_parser(default_config_files, git_root):
         help="Run aider in your browser",
         default=False,
     )
+    group.add_argument(
+        "--suggest-shell-commands",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable suggesting shell commands (default: True)",
+    )
 
     return parser
 

commit 81925241cba1f565a8b4dc3f1eca78a2d6d4e3d7
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Wed Aug 28 22:19:36 2024 -0700

    feat: add --update as alias for --upgrade option

diff --git a/aider/args.py b/aider/args.py
index 7d885758..65ddba5d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -511,6 +511,7 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--upgrade",
+        "--update",
         action="store_true",
         help="Upgrade aider to the latest version from PyPI",
         default=False,

commit 84b5433acea2d0e67bb7209ed12a702292cea5e9
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Sep 3 12:42:25 2024 -0700

    feat: add tool_warning_color argument and update color modes

diff --git a/aider/args.py b/aider/args.py
index 65ddba5d..dd1ab0e3 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -290,6 +290,12 @@ def get_parser(default_config_files, git_root):
         help="Use colors suitable for a light terminal background (default: False)",
         default=False,
     )
+    group.add_argument(
+        "--light-mode",
+        action="store_true",
+        help="Use colors suitable for a light terminal background (default: False)",
+        default=False,
+    )
     group.add_argument(
         "--pretty",
         action=argparse.BooleanOptionalAction,
@@ -315,7 +321,12 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--tool-error-color",
         default="#FF2222",
-        help="Set the color for tool error messages (default: red)",
+        help="Set the color for tool error messages (default: #FF2222)",
+    )
+    group.add_argument(
+        "--tool-warning-color",
+        default="#FFA500",
+        help="Set the color for tool warning messages (default: #FFA500)",
     )
     group.add_argument(
         "--assistant-output-color",

commit 00fa9efba4bfa584284bda5b41da9e53ff3c23db
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Sep 3 12:43:59 2024 -0700

    refactor: remove duplicate --light-mode argument

diff --git a/aider/args.py b/aider/args.py
index dd1ab0e3..ac6d86de 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -290,12 +290,6 @@ def get_parser(default_config_files, git_root):
         help="Use colors suitable for a light terminal background (default: False)",
         default=False,
     )
-    group.add_argument(
-        "--light-mode",
-        action="store_true",
-        help="Use colors suitable for a light terminal background (default: False)",
-        default=False,
-    )
     group.add_argument(
         "--pretty",
         action=argparse.BooleanOptionalAction,

commit 485d5487afffc2ec175abc8674f982d99bde481b
Author: fry69 (aider) <142489379+fry69@users.noreply.github.com>
Date:   Thu Sep 5 18:27:05 2024 +0200

    feat: add --list-models alias for --models option

diff --git a/aider/args.py b/aider/args.py
index ac6d86de..c09de2f3 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -121,7 +121,7 @@ def get_parser(default_config_files, git_root):
     ##########
     group = parser.add_argument_group("Model Settings")
     group.add_argument(
-        "--models",
+        "--models", "--list-models",
         metavar="MODEL",
         help="List known models which match the (partial) MODEL name",
     )

commit 6c739d391b79e59925dc68e8451e5ae4592ce059
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Sep 5 11:40:31 2024 -0700

    refactor: rename --models flag to --list-models

diff --git a/aider/args.py b/aider/args.py
index c09de2f3..588f1dac 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -121,7 +121,8 @@ def get_parser(default_config_files, git_root):
     ##########
     group = parser.add_argument_group("Model Settings")
     group.add_argument(
-        "--models", "--list-models",
+        "--list-models",
+        "--models",
         metavar="MODEL",
         help="List known models which match the (partial) MODEL name",
     )

commit 2bcc9a54a922f603c3baa27e3710f08512d6b33f
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Sep 5 12:47:53 2024 -0700

    feat: add --chat-language argument for specifying chat language

diff --git a/aider/args.py b/aider/args.py
index 588f1dac..b67aeb43 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -491,6 +491,12 @@ def get_parser(default_config_files, git_root):
         default="en",
         help="Specify the language for voice using ISO 639-1 code (default: auto)",
     )
+    group.add_argument(
+        "--chat-language",
+        metavar="CHAT_LANGUAGE",
+        default=None,
+        help="Specify the language to use in the chat (default: None, uses system settings)",
+    )
     group.add_argument(
         "--version",
         action="version",

commit 925560ac1fd96f195af371e83a68e75d91e82f44
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Sep 21 13:56:32 2024 -0700

    feat: switch --deepseek to use model "deepseek-coder"

diff --git a/aider/args.py b/aider/args.py
index b67aeb43..c771dcfe 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -109,7 +109,7 @@ def get_parser(default_config_files, git_root):
         const=gpt_3_model_name,
         help=f"Use {gpt_3_model_name} model for the main chat",
     )
-    deepseek_model = "deepseek/deepseek-coder"
+    deepseek_model = "deepseek-coder"
     group.add_argument(
         "--deepseek",
         action="store_const",

commit dced6c805246e006d545ffd148314fdfae4edd7d
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Sep 21 17:06:11 2024 -0700

    Revert "feat: switch --deepseek to use model "deepseek-coder""
    
    This reverts commit 925560ac1fd96f195af371e83a68e75d91e82f44.

diff --git a/aider/args.py b/aider/args.py
index c771dcfe..b67aeb43 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -109,7 +109,7 @@ def get_parser(default_config_files, git_root):
         const=gpt_3_model_name,
         help=f"Use {gpt_3_model_name} model for the main chat",
     )
-    deepseek_model = "deepseek-coder"
+    deepseek_model = "deepseek/deepseek-coder"
     group.add_argument(
         "--deepseek",
         action="store_const",

commit 1cc30a22f9df7be3208f951f5c113431809cc957
Author: Mike Bailey <mike@failmode.com>
Date:   Sun Sep 22 18:19:22 2024 +1000

    feat: Option to compress audio files by ~90%
    
    Add option to reduce bandwidth (and potentially latency) by converting
    voice recordings (wav) into a compressed audio format (webm or mp3).
    
    Default behaviour is unchanged.
    
    > File uploads are currently limited to 25 MB and the following input file
    > types are supported: mp3, mp4, mpeg, mpga, m4a, wav, and webm.
    >
    > - https://platform.openai.com/docs/guides/speech-to-text

diff --git a/aider/args.py b/aider/args.py
index b67aeb43..4b9c745a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -485,6 +485,13 @@ def get_parser(default_config_files, git_root):
         help="Use VI editing mode in the terminal (default: False)",
         default=False,
     )
+    group.add_argument(
+        "--voice-format",
+        metavar="VOICE_FORMAT",
+        default="wav",
+        choices=["wav", "mp3", "webm"],
+        help="Audio format for voice recording (default: wav). webm and mp3 require ffmpeg",
+    )
     group.add_argument(
         "--voice-language",
         metavar="VOICE_LANGUAGE",

commit c9ac01f4742f74face2c012a236a1f94e77cb3a7
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Sep 23 09:02:45 2024 -0700

    docs: update help message for --map-refresh option

diff --git a/aider/args.py b/aider/args.py
index 4b9c745a..1533db47 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -206,7 +206,7 @@ def get_parser(default_config_files, git_root):
         "--map-refresh",
         choices=["auto", "always", "files", "manual"],
         default="auto",
-        help="Control how often the repo map is refreshed (default: auto)",
+        help="Control how often the repo map is refreshed. Options: auto, always, files, manual (default: auto)",
     )
     group.add_argument(
         "--cache-prompts",

commit b03d5d10990e791b4b552fcb1d27228b5537fe3f
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Sep 23 09:02:49 2024 -0700

    style: Wrap long help text in args.py

diff --git a/aider/args.py b/aider/args.py
index 1533db47..e1661c28 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -206,7 +206,10 @@ def get_parser(default_config_files, git_root):
         "--map-refresh",
         choices=["auto", "always", "files", "manual"],
         default="auto",
-        help="Control how often the repo map is refreshed. Options: auto, always, files, manual (default: auto)",
+        help=(
+            "Control how often the repo map is refreshed. Options: auto, always, files, manual"
+            " (default: auto)"
+        ),
     )
     group.add_argument(
         "--cache-prompts",

commit 5e9a4e01f9abe60b46d371a5ff7bd544102dd5c3
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Sep 23 09:04:46 2024 -0700

    feat: Move map-tokens, map-refresh and map-multiplier into a new Repomap Setting section

diff --git a/aider/args.py b/aider/args.py
index e1661c28..ad8d17c7 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -196,21 +196,6 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Only work with models that have meta-data available (default: True)",
     )
-    group.add_argument(
-        "--map-tokens",
-        type=int,
-        default=None,
-        help="Suggested number of tokens to use for repo map, use 0 to disable (default: 1024)",
-    )
-    group.add_argument(
-        "--map-refresh",
-        choices=["auto", "always", "files", "manual"],
-        default="auto",
-        help=(
-            "Control how often the repo map is refreshed. Options: auto, always, files, manual"
-            " (default: auto)"
-        ),
-    )
     group.add_argument(
         "--cache-prompts",
         action=argparse.BooleanOptionalAction,
@@ -223,12 +208,6 @@ def get_parser(default_config_files, git_root):
         default=0,
         help="Number of times to ping at 5min intervals to keep prompt cache warm (default: 0)",
     )
-    group.add_argument(
-        "--map-multiplier-no-files",
-        type=float,
-        default=2,
-        help="Multiplier for map tokens when no files are specified (default: 2)",
-    )
     group.add_argument(
         "--max-chat-history-tokens",
         type=int,
@@ -247,6 +226,30 @@ def get_parser(default_config_files, git_root):
         help="Specify the .env file to load (default: .env in git root)",
     )
 
+    ##########
+    group = parser.add_argument_group("Repomap Settings")
+    group.add_argument(
+        "--map-tokens",
+        type=int,
+        default=None,
+        help="Suggested number of tokens to use for repo map, use 0 to disable (default: 1024)",
+    )
+    group.add_argument(
+        "--map-refresh",
+        choices=["auto", "always", "files", "manual"],
+        default="auto",
+        help=(
+            "Control how often the repo map is refreshed. Options: auto, always, files, manual"
+            " (default: auto)"
+        ),
+    )
+    group.add_argument(
+        "--map-multiplier-no-files",
+        type=float,
+        default=2,
+        help="Multiplier for map tokens when no files are specified (default: 2)",
+    )
+
     ##########
     group = parser.add_argument_group("History Files")
     default_input_history_file = (

commit 39b2f7bdee72131211b304cd9d881db35ced5f9f
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Sep 23 09:06:31 2024 -0700

    feat: Add Cache Settings section

diff --git a/aider/args.py b/aider/args.py
index ad8d17c7..89f81dff 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -196,18 +196,6 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Only work with models that have meta-data available (default: True)",
     )
-    group.add_argument(
-        "--cache-prompts",
-        action=argparse.BooleanOptionalAction,
-        default=False,
-        help="Enable caching of prompts (default: False)",
-    )
-    group.add_argument(
-        "--cache-keepalive-pings",
-        type=int,
-        default=0,
-        help="Number of times to ping at 5min intervals to keep prompt cache warm (default: 0)",
-    )
     group.add_argument(
         "--max-chat-history-tokens",
         type=int,
@@ -226,6 +214,21 @@ def get_parser(default_config_files, git_root):
         help="Specify the .env file to load (default: .env in git root)",
     )
 
+    ##########
+    group = parser.add_argument_group("Cache Settings")
+    group.add_argument(
+        "--cache-prompts",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable caching of prompts (default: False)",
+    )
+    group.add_argument(
+        "--cache-keepalive-pings",
+        type=int,
+        default=0,
+        help="Number of times to ping at 5min intervals to keep prompt cache warm (default: 0)",
+    )
+
     ##########
     group = parser.add_argument_group("Repomap Settings")
     group.add_argument(

commit 5779006db05083700abe66db2a042f0d2f69338e
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Sep 23 09:06:57 2024 -0700

    feat: Add Voice Settings section

diff --git a/aider/args.py b/aider/args.py
index 89f81dff..2b156d3b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -494,6 +494,21 @@ def get_parser(default_config_files, git_root):
         help="Use VI editing mode in the terminal (default: False)",
         default=False,
     )
+    group.add_argument(
+        "--chat-language",
+        metavar="CHAT_LANGUAGE",
+        default=None,
+        help="Specify the language to use in the chat (default: None, uses system settings)",
+    )
+    group.add_argument(
+        "--version",
+        action="version",
+        version=f"%(prog)s {__version__}",
+        help="Show the version number and exit",
+    )
+
+    ##########
+    group = parser.add_argument_group("Voice Settings")
     group.add_argument(
         "--voice-format",
         metavar="VOICE_FORMAT",
@@ -507,18 +522,6 @@ def get_parser(default_config_files, git_root):
         default="en",
         help="Specify the language for voice using ISO 639-1 code (default: auto)",
     )
-    group.add_argument(
-        "--chat-language",
-        metavar="CHAT_LANGUAGE",
-        default=None,
-        help="Specify the language to use in the chat (default: None, uses system settings)",
-    )
-    group.add_argument(
-        "--version",
-        action="version",
-        version=f"%(prog)s {__version__}",
-        help="Show the version number and exit",
-    )
     group.add_argument(
         "--just-check-update",
         action="store_true",

commit f2397bb0ccea1f3ea7106400f9223e6fa2524be4
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Sep 23 09:08:07 2024 -0700

    chore: Reorganize command-line arguments in aider/args.py

diff --git a/aider/args.py b/aider/args.py
index 2b156d3b..ab88f2e9 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -506,22 +506,6 @@ def get_parser(default_config_files, git_root):
         version=f"%(prog)s {__version__}",
         help="Show the version number and exit",
     )
-
-    ##########
-    group = parser.add_argument_group("Voice Settings")
-    group.add_argument(
-        "--voice-format",
-        metavar="VOICE_FORMAT",
-        default="wav",
-        choices=["wav", "mp3", "webm"],
-        help="Audio format for voice recording (default: wav). webm and mp3 require ffmpeg",
-    )
-    group.add_argument(
-        "--voice-language",
-        metavar="VOICE_LANGUAGE",
-        default="en",
-        help="Specify the language for voice using ISO 639-1 code (default: auto)",
-    )
     group.add_argument(
         "--just-check-update",
         action="store_true",
@@ -630,6 +614,22 @@ def get_parser(default_config_files, git_root):
         help="Enable/disable suggesting shell commands (default: True)",
     )
 
+    ##########
+    group = parser.add_argument_group("Voice Settings")
+    group.add_argument(
+        "--voice-format",
+        metavar="VOICE_FORMAT",
+        default="wav",
+        choices=["wav", "mp3", "webm"],
+        help="Audio format for voice recording (default: wav). webm and mp3 require ffmpeg",
+    )
+    group.add_argument(
+        "--voice-language",
+        metavar="VOICE_LANGUAGE",
+        default="en",
+        help="Specify the language for voice using ISO 639-1 code (default: auto)",
+    )
+
     return parser
 
 

commit a91d3fed01b4b06ceed907bb392c91c93a28983e
Author: Stein Martin Hustad <stein@hustad.com>
Date:   Sat Sep 21 21:05:51 2024 +0400

    style: completion menu colors customizable

diff --git a/aider/args.py b/aider/args.py
index b67aeb43..10c606d8 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -328,6 +328,30 @@ def get_parser(default_config_files, git_root):
         default="#0088ff",
         help="Set the color for assistant output (default: #0088ff)",
     )
+    group.add_argument(
+        "--completion-menu-color",
+        metavar="COLOR",
+        default="default",
+        help="Set the color for the completion menu (default: terminal's default text color)",
+    )
+    group.add_argument(
+        "--completion-menu-bg-color",
+        metavar="COLOR",
+        default="default",
+        help="Set the background color for the completion menu (default: terminal's default background color)",
+    )
+    group.add_argument(
+        "--completion-menu-current-color",
+        metavar="COLOR",
+        default="default",
+        help="Set the color for the current item in the completion menu (default: terminal's default background color)",
+    )
+    group.add_argument(
+        "--completion-menu-current-bg-color",
+        metavar="COLOR",
+        default="default",
+        help="Set the background color for the current item in the completion menu (default: terminal's default text color)",
+    )
     group.add_argument(
         "--code-theme",
         default="default",

commit bbfafed37249ac02b584ae397fea507fcf49bd89
Merge: 0adb7e0f ef75ba94
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Tue Sep 24 13:19:34 2024 -0700

    Merge pull request #1634 from smh/customize-completion-menu-colors
    
    style: completion menu colors customizable


commit 926b3c9240d271fb8379951578d4bb831e3739d9
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Wed Sep 25 11:03:15 2024 -0700

    feat: Add --junior-model argument and plumb it into Model()

diff --git a/aider/args.py b/aider/args.py
index cdcf8531..94e81480 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -190,6 +190,14 @@ def get_parser(default_config_files, git_root):
             " depends on --model)"
         ),
     )
+    group.add_argument(
+        "--junior-model",
+        metavar="JUNIOR_MODEL",
+        default=None,
+        help=(
+            "Specify the model to use for junior tasks (default depends on --model)"
+        ),
+    )
     group.add_argument(
         "--show-model-warnings",
         action=argparse.BooleanOptionalAction,

commit e74e76e51c0651690a3ba483321d1ece2528e6a9
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Wed Sep 25 11:03:25 2024 -0700

    style: run linter

diff --git a/aider/args.py b/aider/args.py
index 94e81480..37903484 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -194,9 +194,7 @@ def get_parser(default_config_files, git_root):
         "--junior-model",
         metavar="JUNIOR_MODEL",
         default=None,
-        help=(
-            "Specify the model to use for junior tasks (default depends on --model)"
-        ),
+        help="Specify the model to use for junior tasks (default depends on --model)",
     )
     group.add_argument(
         "--show-model-warnings",
@@ -355,19 +353,28 @@ def get_parser(default_config_files, git_root):
         "--completion-menu-bg-color",
         metavar="COLOR",
         default="default",
-        help="Set the background color for the completion menu (default: terminal's default background color)",
+        help=(
+            "Set the background color for the completion menu (default: terminal's default"
+            " background color)"
+        ),
     )
     group.add_argument(
         "--completion-menu-current-color",
         metavar="COLOR",
         default="default",
-        help="Set the color for the current item in the completion menu (default: terminal's default background color)",
+        help=(
+            "Set the color for the current item in the completion menu (default: terminal's default"
+            " background color)"
+        ),
     )
     group.add_argument(
         "--completion-menu-current-bg-color",
         metavar="COLOR",
         default="default",
-        help="Set the background color for the current item in the completion menu (default: terminal's default text color)",
+        help=(
+            "Set the background color for the current item in the completion menu (default:"
+            " terminal's default text color)"
+        ),
     )
     group.add_argument(
         "--code-theme",

commit 888d60d472b238b9e51e7f04f629cf17ef67ee86
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Wed Sep 25 11:09:56 2024 -0700

    feat: Add --junior-edit-format argument and plumb it into Model()

diff --git a/aider/args.py b/aider/args.py
index 37903484..6709627b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -196,6 +196,12 @@ def get_parser(default_config_files, git_root):
         default=None,
         help="Specify the model to use for junior tasks (default depends on --model)",
     )
+    group.add_argument(
+        "--junior-edit-format",
+        metavar="JUNIOR_EDIT_FORMAT",
+        default=None,
+        help="Specify the edit format for the junior model (default: depends on junior model)",
+    )
     group.add_argument(
         "--show-model-warnings",
         action=argparse.BooleanOptionalAction,

commit 3fe3e0f700c9156bc47a91021b0ff4d27d1c5bb2
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Sep 26 11:27:14 2024 -0700

    feat: Add --o1-mini and --o1-preview aliases for model selection

diff --git a/aider/args.py b/aider/args.py
index 6709627b..a94c97a0 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -117,6 +117,22 @@ def get_parser(default_config_files, git_root):
         const=deepseek_model,
         help=f"Use {deepseek_model} model for the main chat",
     )
+    o1_mini_model = "o1-mini"
+    group.add_argument(
+        "--o1-mini",
+        action="store_const",
+        dest="model",
+        const=o1_mini_model,
+        help=f"Use {o1_mini_model} model for the main chat",
+    )
+    o1_preview_model = "o1-preview"
+    group.add_argument(
+        "--o1-preview",
+        action="store_const",
+        dest="model",
+        const=o1_preview_model,
+        help=f"Use {o1_preview_model} model for the main chat",
+    )
 
     ##########
     group = parser.add_argument_group("Model Settings")

commit bf015e27d67577478aae706fc26ae58d8f2046ba
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Sep 26 11:27:55 2024 -0700

    feat: Add --senior switch as alias for --edit-format senior

diff --git a/aider/args.py b/aider/args.py
index a94c97a0..26ec41b5 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -197,6 +197,13 @@ def get_parser(default_config_files, git_root):
         default=None,
         help="Specify what edit format the LLM should use (default depends on model)",
     )
+    group.add_argument(
+        "--senior",
+        action="store_const",
+        dest="edit_format",
+        const="senior",
+        help="Use senior edit format for the main chat",
+    )
     group.add_argument(
         "--weak-model",
         metavar="WEAK_MODEL",

commit eb21cf2830ce7e79891a6ed4ab2ecd62bba1ee73
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Sep 26 16:10:19 2024 -0700

    architect/editor

diff --git a/aider/args.py b/aider/args.py
index 26ec41b5..f594d889 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -198,11 +198,11 @@ def get_parser(default_config_files, git_root):
         help="Specify what edit format the LLM should use (default depends on model)",
     )
     group.add_argument(
-        "--senior",
+        "--architect",
         action="store_const",
         dest="edit_format",
-        const="senior",
-        help="Use senior edit format for the main chat",
+        const="architect",
+        help="Use architect edit format for the main chat",
     )
     group.add_argument(
         "--weak-model",
@@ -214,16 +214,16 @@ def get_parser(default_config_files, git_root):
         ),
     )
     group.add_argument(
-        "--junior-model",
+        "--editor-model",
         metavar="JUNIOR_MODEL",
         default=None,
-        help="Specify the model to use for junior tasks (default depends on --model)",
+        help="Specify the model to use for editor tasks (default depends on --model)",
     )
     group.add_argument(
-        "--junior-edit-format",
+        "--editor-edit-format",
         metavar="JUNIOR_EDIT_FORMAT",
         default=None,
-        help="Specify the edit format for the junior model (default: depends on junior model)",
+        help="Specify the edit format for the editor model (default: depends on editor model)",
     )
     group.add_argument(
         "--show-model-warnings",

commit e3e0d5751263f5e409713cc922a27e3e688d1a22
Author: fry69 <142489379+fry69@users.noreply.github.com>
Date:   Fri Sep 27 08:57:22 2024 +0200

    chore: update parameter names in args and benchmark

diff --git a/aider/args.py b/aider/args.py
index f594d889..9be32e44 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -215,13 +215,13 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--editor-model",
-        metavar="JUNIOR_MODEL",
+        metavar="EDITOR_MODEL",
         default=None,
         help="Specify the model to use for editor tasks (default depends on --model)",
     )
     group.add_argument(
         "--editor-edit-format",
-        metavar="JUNIOR_EDIT_FORMAT",
+        metavar="EDITOR_EDIT_FORMAT",
         default=None,
         help="Specify the edit format for the editor model (default: depends on editor model)",
     )

commit e465cda5c88d349a0caeb426fb5b624078984b2a
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Fri Sep 27 19:49:17 2024 -0700

    fix: change default values for completion menu arguments from "default" to None in aider/args.py

diff --git a/aider/args.py b/aider/args.py
index 9be32e44..a5b36e6d 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -375,13 +375,13 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--completion-menu-color",
         metavar="COLOR",
-        default="default",
+        default=None,
         help="Set the color for the completion menu (default: terminal's default text color)",
     )
     group.add_argument(
         "--completion-menu-bg-color",
         metavar="COLOR",
-        default="default",
+        default=None,
         help=(
             "Set the background color for the completion menu (default: terminal's default"
             " background color)"
@@ -390,7 +390,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--completion-menu-current-color",
         metavar="COLOR",
-        default="default",
+        default=None,
         help=(
             "Set the color for the current item in the completion menu (default: terminal's default"
             " background color)"
@@ -399,7 +399,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--completion-menu-current-bg-color",
         metavar="COLOR",
-        default="default",
+        default=None,
         help=(
             "Set the background color for the current item in the completion menu (default:"
             " terminal's default text color)"

commit 510fa24ade6b597568c7166139767e833aa03945
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Oct 1 17:31:34 2024 -0700

    feat: add --skip-sanity-check-repo switch

diff --git a/aider/args.py b/aider/args.py
index a5b36e6d..3b7bc882 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -502,6 +502,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Perform a dry run without modifying files (default: False)",
     )
+    group.add_argument(
+        "--skip-sanity-check-repo",
+        action="store_true",
+        help="Skip the sanity check for the git repository (default: False)",
+        default=False,
+    )
     group = parser.add_argument_group("Fixing and committing")
     group.add_argument(
         "--lint",

commit d4fe0b18adbd035b16b4aa824a5cde6c18b4ffb3
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Oct 2 10:45:11 2024 -0700

    rename `--yes` to `--yes-always` #767

diff --git a/aider/args.py b/aider/args.py
index 3b7bc882..567160ab 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -25,6 +25,7 @@ def get_parser(default_config_files, git_root):
         description="aider is AI pair programming in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
+        config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
     group = parser.add_argument_group("Main")
@@ -611,7 +612,7 @@ def get_parser(default_config_files, git_root):
         help="Apply the changes from the given file instead of running the chat (debug)",
     )
     group.add_argument(
-        "--yes",
+        "--yes-always",
         action="store_true",
         help="Always say yes to every confirmation",
         default=None,

commit f3ff24e35af55351fe6156ce7e34dffd90bc6770
Author: fry69 <142489379+fry69@users.noreply.github.com>
Date:   Tue Oct 8 00:48:50 2024 +0200

    doc: clarify soft limit for chat history tokens

diff --git a/aider/args.py b/aider/args.py
index 567160ab..5b94097a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -237,8 +237,10 @@ def get_parser(default_config_files, git_root):
         type=int,
         default=None,
         help=(
-            "Maximum number of tokens to use for chat history. If not specified, uses the model's"
-            " max_chat_history_tokens."
+            (
+                "Soft limit on tokens for chat history, after which summarization begins."
+                " If unspecified, defaults to the model's max_chat_history_tokens."
+            ),
         ),
     )
     # This is a duplicate of the argument in the preparser and is a no-op by this time of

commit 3bc056a107056f0d2f4f61ac5b4ebb81bd1d7cc0
Author: fry69 <142489379+fry69@users.noreply.github.com>
Date:   Tue Oct 8 01:22:01 2024 +0200

    doc: fix wrong encapsulation

diff --git a/aider/args.py b/aider/args.py
index 5b94097a..0807020e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -237,10 +237,8 @@ def get_parser(default_config_files, git_root):
         type=int,
         default=None,
         help=(
-            (
-                "Soft limit on tokens for chat history, after which summarization begins."
-                " If unspecified, defaults to the model's max_chat_history_tokens."
-            ),
+            "Soft limit on tokens for chat history, after which summarization begins."
+            " If unspecified, defaults to the model's max_chat_history_tokens."
         ),
     )
     # This is a duplicate of the argument in the preparser and is a no-op by this time of

commit 27ddf8aeab9c6931e38278d35972dfe0c78bbb83
Author: fry69 <142489379+fry69@users.noreply.github.com>
Date:   Thu Oct 10 06:46:10 2024 +0200

    fix: remove unreachable return statements

diff --git a/aider/args.py b/aider/args.py
index 0807020e..6ac07149 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -719,7 +719,6 @@ def get_md_help():
     parser.formatter_class = MarkdownHelpFormatter
 
     return argparse.ArgumentParser.format_help(parser)
-    return parser.format_help()
 
 
 def get_sample_yaml():
@@ -733,7 +732,6 @@ def get_sample_yaml():
     parser.formatter_class = YamlHelpFormatter
 
     return argparse.ArgumentParser.format_help(parser)
-    return parser.format_help()
 
 
 def get_sample_dotenv():
@@ -747,7 +745,6 @@ def get_sample_dotenv():
     parser.formatter_class = DotEnvFormatter
 
     return argparse.ArgumentParser.format_help(parser)
-    return parser.format_help()
 
 
 def main():

commit 3c4dad7eb4690078ec1eadbebe4065de01d06330
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Oct 22 10:09:35 2024 -0700

    use sonnet 1022 by default

diff --git a/aider/args.py b/aider/args.py
index 6ac07149..9897baf3 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -58,7 +58,7 @@ def get_parser(default_config_files, git_root):
         const=opus_model,
         help=f"Use {opus_model} model for the main chat",
     )
-    sonnet_model = "claude-3-5-sonnet-20240620"
+    sonnet_model = "anthropic/claude-3-5-sonnet-20241022"
     group.add_argument(
         "--sonnet",
         action="store_const",

commit 4a3e6ef1e58b44e81f89d8ff469dae7adbb7bcc5
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Oct 22 12:53:26 2024 -0700

    update sonnet model names since they are in litellm json now

diff --git a/aider/args.py b/aider/args.py
index 9897baf3..ae626a03 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -58,7 +58,7 @@ def get_parser(default_config_files, git_root):
         const=opus_model,
         help=f"Use {opus_model} model for the main chat",
     )
-    sonnet_model = "anthropic/claude-3-5-sonnet-20241022"
+    sonnet_model = "claude-3-5-sonnet-20241022"
     group.add_argument(
         "--sonnet",
         action="store_const",

commit 43fbda0faf394f7592631084d5341b6eaf10fdb1
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Oct 24 14:24:09 2024 -0700

    feat: add --fancy-input flag to control input history and completion

diff --git a/aider/args.py b/aider/args.py
index ae626a03..cfc13659 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -688,6 +688,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable suggesting shell commands (default: True)",
     )
+    group.add_argument(
+        "--fancy-input",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable fancy input with history and completion (default: True)",
+    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit d288122fab93155a16ab2c9abfab6ba34256234a
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Oct 29 13:53:17 2024 -0700

    chore: add comment for load command implementation

diff --git a/aider/args.py b/aider/args.py
index cfc13659..15dc0efb 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
 
+#ai add --load <fname> and call cmd_load with it in main!
 import argparse
 import os
 import sys

commit 347a9f2a6d9b0f90f7619de5e91e508b885c0475
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Oct 29 13:53:19 2024 -0700

    feat: add --load argument to execute commands from file

diff --git a/aider/args.py b/aider/args.py
index 15dc0efb..42ea02fe 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -661,6 +661,11 @@ def get_parser(default_config_files, git_root):
             " (disables chat mode)"
         ),
     )
+    group.add_argument(
+        "--load",
+        metavar="LOAD_FILE",
+        help="Load and execute commands from a file",
+    )
     group.add_argument(
         "--encoding",
         default="utf-8",

commit 717592463eb9f0bf99bd867f0e7463c9571a5bbd
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Oct 29 13:54:42 2024 -0700

    feat: add --load option to execute commands from file on launch

diff --git a/aider/args.py b/aider/args.py
index 42ea02fe..5dca896e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,6 +1,5 @@
 #!/usr/bin/env python
 
-#ai add --load <fname> and call cmd_load with it in main!
 import argparse
 import os
 import sys
@@ -664,7 +663,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--load",
         metavar="LOAD_FILE",
-        help="Load and execute commands from a file",
+        help="Load and execute /commands from a file on launch",
     )
     group.add_argument(
         "--encoding",

commit 068fb38a5db0234d75b10996885233c7a8b0881a
Merge: 0aad7b46 53e7eba0
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Oct 30 09:40:01 2024 -0700

    Merge branch 'main' into mixpanel


commit 401967c27f3908b518bd0961b68a9eb808995994
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Oct 31 15:01:26 2024 -0700

    refactor: convert browser flag to boolean argument

diff --git a/aider/args.py b/aider/args.py
index 5d2e841a..75236018 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -701,7 +701,7 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--gui",
-        "--browser",
+        "--browser", # ai turn into a boolean!
         action="store_true",
         help="Run aider in your browser",
         default=False,

commit 27711010a0813618de75c5709845e2e27dd2de4c
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Oct 31 15:01:29 2024 -0700

    refactor: update --gui/--browser to use BooleanOptionalAction

diff --git a/aider/args.py b/aider/args.py
index 75236018..c02254e4 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -701,9 +701,9 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--gui",
-        "--browser", # ai turn into a boolean!
-        action="store_true",
-        help="Run aider in your browser",
+        "--browser",
+        action=argparse.BooleanOptionalAction,
+        help="Run aider in your browser (default: False)",
         default=False,
     )
     group.add_argument(

commit 8bc0d5544d0bb656a028407dbf14fb187151e529
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Nov 4 10:34:21 2024 -0800

    feat: add --apply-clipboard-edits switch for direct clipboard editing

diff --git a/aider/args.py b/aider/args.py
index c02254e4..852b42ee 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -630,6 +630,12 @@ def get_parser(default_config_files, git_root):
         metavar="FILE",
         help="Apply the changes from the given file instead of running the chat (debug)",
     )
+    group.add_argument(
+        "--apply-clipboard-edits",
+        action="store_true",
+        help="Apply clipboard contents as edits using the main model's editor format",
+        default=False,
+    )
     group.add_argument(
         "--yes-always",
         action="store_true",

commit d9193387ccde5b45fcc541d03958c70633d9b38f
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Nov 4 12:13:04 2024 -0800

    feat: add haiku command line argument placeholder

diff --git a/aider/args.py b/aider/args.py
index 852b42ee..24f07808 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
 
+#ai add --haiku!
 import argparse
 import os
 import sys

commit 09d21b59513fd10807ebcbc0a83065a1790a612e
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Nov 4 12:13:05 2024 -0800

    feat: add --haiku flag to format responses as haikus

diff --git a/aider/args.py b/aider/args.py
index 24f07808..f916a45f 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,6 +1,5 @@
 #!/usr/bin/env python
 
-#ai add --haiku!
 import argparse
 import os
 import sys
@@ -725,6 +724,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable fancy input with history and completion (default: True)",
     )
+    group.add_argument(
+        "--haiku",
+        action="store_true",
+        help="Format assistant responses as haikus",
+        default=False,
+    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit 711b2a431c2d3c549b78d3300444a5874e6453c0
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Nov 4 12:13:25 2024 -0800

    chore: add comment about sonnet flag placement

diff --git a/aider/args.py b/aider/args.py
index f916a45f..bb30a33b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,5 +1,6 @@
 #!/usr/bin/env python
 
+#ai put it next to --sonnet!
 import argparse
 import os
 import sys

commit d33104aec1659dc4e5e62c7660dffd6cf637624f
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Nov 4 12:13:27 2024 -0800

    refactor: move haiku flag next to sonnet flag in args

diff --git a/aider/args.py b/aider/args.py
index bb30a33b..f916a45f 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -1,6 +1,5 @@
 #!/usr/bin/env python
 
-#ai put it next to --sonnet!
 import argparse
 import os
 import sys

commit 0cfc23b1a8b66c7400b1663554cf9edb25d85e29
Author: Paul Gauthier <aider@paulg.org>
Date:   Mon Nov 4 12:14:22 2024 -0800

    refactor: remove unused haiku formatting option

diff --git a/aider/args.py b/aider/args.py
index f916a45f..852b42ee 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -724,12 +724,6 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable fancy input with history and completion (default: True)",
     )
-    group.add_argument(
-        "--haiku",
-        action="store_true",
-        help="Format assistant responses as haikus",
-        default=False,
-    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit 7883db1834675a65efa97394aed7cc67ee7185b4
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Nov 4 12:14:23 2024 -0800

    feat: add --haiku flag for claude-3-5-haiku model selection

diff --git a/aider/args.py b/aider/args.py
index 852b42ee..c083f21a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -66,6 +66,14 @@ def get_parser(default_config_files, git_root):
         const=sonnet_model,
         help=f"Use {sonnet_model} model for the main chat",
     )
+    haiku_model = "claude-3-5-haiku-20241022"
+    group.add_argument(
+        "--haiku",
+        action="store_const",
+        dest="model",
+        const=haiku_model,
+        help=f"Use {haiku_model} model for the main chat",
+    )
     gpt_4_model = "gpt-4-0613"
     group.add_argument(
         "--4",

commit 90a28e31e8c23c5bf18f78d3550abf2bb787491d
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Tue Nov 19 17:33:16 2024 -0800

    feat: Add --show-release-notes option to control release notes display

diff --git a/aider/args.py b/aider/args.py
index c083f21a..2a266f30 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -620,6 +620,12 @@ def get_parser(default_config_files, git_root):
         help="Check for new aider versions on launch",
         default=True,
     )
+    group.add_argument(
+        "--show-release-notes",
+        action=argparse.BooleanOptionalAction,
+        help="Show release notes on first run of new version (default: None, ask user)",
+        default=None,
+    )
     group.add_argument(
         "--install-main-branch",
         action="store_true",

commit 539a6cde634780e690cc02e20f7ef4c65082bac9
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Nov 20 16:22:01 2024 -0800

    feat: Enhance analytics opt-in logic with user sampling and explicit control

diff --git a/aider/args.py b/aider/args.py
index 2a266f30..ec2545c8 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -562,8 +562,8 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--analytics",
         action=argparse.BooleanOptionalAction,
-        default=False,
-        help="Enable/disable analytics for one session (default: False)",
+        default=None,
+        help="Enable/disable analytics for current session (default: random)",
     )
     group.add_argument(
         "--analytics-log",

commit 2a387707ef44166f6c2efe60682161b6fb1d88c1
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Nov 21 09:52:14 2024 -0800

    feat: Add --editor switch to specify editor for /editor command

diff --git a/aider/args.py b/aider/args.py
index ec2545c8..0ea85182 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -738,6 +738,10 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable fancy input with history and completion (default: True)",
     )
+    group.add_argument(
+        "--editor",
+        help="Specify which editor to use for the /editor command",
+    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit 7122ceb16c9c1b9a3af530b003757c5006c5d9eb
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Nov 25 18:34:05 2024 -0800

    feat: add --detect-urls flag to control URL detection behavior

diff --git a/aider/args.py b/aider/args.py
index 0ea85182..f38113a3 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -738,6 +738,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable fancy input with history and completion (default: True)",
     )
+    group.add_argument(
+        "--detect-urls",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable detection and offering to add URLs to chat (default: True)",
+    )
     group.add_argument(
         "--editor",
         help="Specify which editor to use for the /editor command",

commit 217e9b96d89456adb6754f330c276504db80fb54
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Mon Nov 25 20:56:04 2024 -0800

    feat: add command-line model alias support via --alias flag

diff --git a/aider/args.py b/aider/args.py
index f38113a3..58a08f5a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -193,6 +193,12 @@ def get_parser(default_config_files, git_root):
         default=".aider.model.metadata.json",
         help="Specify a file with context window and costs for unknown models",
     )
+    group.add_argument(
+        "--alias",
+        action="append",
+        metavar="ALIAS:MODEL",
+        help="Add a model alias (can be used multiple times)",
+    )
     group.add_argument(
         "--verify-ssl",
         action=argparse.BooleanOptionalAction,

commit c682bd858a9499a1913e40a5e87bf48b79ca0070
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Nov 30 09:19:01 2024 -0800

    copy

diff --git a/aider/args.py b/aider/args.py
index 58a08f5a..754ef23e 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -559,7 +559,7 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--test",
         action="store_true",
-        help="Run tests and fix problems found",
+        help="Run tests, fix problems found and then exit",
         default=False,
     )
 

commit e11faadf39058463e2715f688eda59bf6ec4e60c
Author: Philippe de Reynal <1218704+preynal@users.noreply.github.com>
Date:   Sat Nov 30 11:24:34 2024 +0100

    feat: ability to select audio input device

diff --git a/aider/args.py b/aider/args.py
index 58a08f5a..0c4df7eb 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -22,7 +22,7 @@ def default_env_file(git_root):
 
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
-        description="aider is AI pair programming in your terminal",
+        description="Aider is AI pair programming in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
         config_file_parser_class=configargparse.YAMLConfigFileParser,
@@ -770,6 +770,12 @@ def get_parser(default_config_files, git_root):
         default="en",
         help="Specify the language for voice using ISO 639-1 code (default: auto)",
     )
+    group.add_argument(
+        "--voice-input-device",
+        metavar="VOICE_INPUT_DEVICE",
+        default=None,
+        help="Specify the input device name for voice recording",
+    )
 
     return parser
 

commit 23825cafe730039ee6669fb2b04d2af71424e664
Author: Philippe de Reynal <1218704+preynal@users.noreply.github.com>
Date:   Sat Nov 30 11:33:10 2024 +0100

    fix options diff + missing docs

diff --git a/aider/args.py b/aider/args.py
index 0c4df7eb..52604503 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -22,7 +22,7 @@ def default_env_file(git_root):
 
 def get_parser(default_config_files, git_root):
     parser = configargparse.ArgumentParser(
-        description="Aider is AI pair programming in your terminal",
+        description="aider is AI pair programming in your terminal",
         add_config_file_help=True,
         default_config_files=default_config_files,
         config_file_parser_class=configargparse.YAMLConfigFileParser,

commit 82929f650c081dad71a9bcef25feab9633f1f952
Merge: 37b31c46 23825caf
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Sat Nov 30 09:33:00 2024 -0800

    Merge pull request #2497 from preynal/main
    
    feat: ability to select audio input device


commit bbabd38a48c9fe69b3526b325781a530d196fe83
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Nov 30 12:59:39 2024 -0800

    feat: add timeout option for API calls

diff --git a/aider/args.py b/aider/args.py
index 0627b1a6..23983041 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -205,6 +205,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Verify the SSL cert when connecting to models (default: True)",
     )
+    group.add_argument(
+        "--timeout",
+        type=float,
+        default=None,
+        help="Timeout in seconds for API calls (default: None)",
+    )
     group.add_argument(
         "--edit-format",
         "--chat-mode",

commit a3e72033311a49cdbf297bed688096c523143df9
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Nov 30 13:00:24 2024 -0800

    refactor: change timeout argument type from float to int

diff --git a/aider/args.py b/aider/args.py
index 23983041..15172456 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -207,7 +207,7 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--timeout",
-        type=float,
+        type=int,
         default=None,
         help="Timeout in seconds for API calls (default: None)",
     )

commit 935832028a98c7c717c3c71bdebe8a27777c544c
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun Dec 1 09:33:56 2024 -0800

    feat: add --watch-files switch for FileWatcher control

diff --git a/aider/args.py b/aider/args.py
index 15172456..d6564ad9 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -15,6 +15,7 @@ from aider.args_formatter import (
 
 from .dump import dump  # noqa: F401
 
+# add --watch-files switch to control FileWatcher ai!
 
 def default_env_file(git_root):
     return os.path.join(git_root, ".env") if git_root else ".env"

commit 93c9bdcec71d78fa77fa05cf4bf3648a2d04ff96
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sun Dec 1 09:33:58 2024 -0800

    feat: add --watch-files switch to control FileWatcher

diff --git a/aider/args.py b/aider/args.py
index d6564ad9..0f282cfd 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -15,8 +15,6 @@ from aider.args_formatter import (
 
 from .dump import dump  # noqa: F401
 
-# add --watch-files switch to control FileWatcher ai!
-
 def default_env_file(git_root):
     return os.path.join(git_root, ".env") if git_root else ".env"
 
@@ -530,6 +528,12 @@ def get_parser(default_config_files, git_root):
         help="Skip the sanity check for the git repository (default: False)",
         default=False,
     )
+    group.add_argument(
+        "--watch-files",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable watching files for external changes (default: True)",
+    )
     group = parser.add_argument_group("Fixing and committing")
     group.add_argument(
         "--lint",

commit 260806053bdd9ca78016f2f6e0ffff10c4e19a40
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sun Dec 1 09:34:03 2024 -0800

    style: fix linting issues and whitespace in args.py

diff --git a/aider/args.py b/aider/args.py
index 0f282cfd..8d4c62f9 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -15,6 +15,7 @@ from aider.args_formatter import (
 
 from .dump import dump  # noqa: F401
 
+
 def default_env_file(git_root):
     return os.path.join(git_root, ".env") if git_root else ".env"
 

commit 41e6fb961b1b94d72a1efbbe593a970bdcd1451b
Author: Paul Gauthier <aider@paulg.org>
Date:   Sun Dec 1 09:35:28 2024 -0800

    feat: disable watch-files by default and update help text

diff --git a/aider/args.py b/aider/args.py
index 8d4c62f9..971f3c5c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -532,8 +532,8 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--watch-files",
         action=argparse.BooleanOptionalAction,
-        default=True,
-        help="Enable/disable watching files for external changes (default: True)",
+        default=False,
+        help="Enable/disable watching files for ai coding comments (default: False)",
     )
     group = parser.add_argument_group("Fixing and committing")
     group.add_argument(

commit 44909912cdaff6583032a4727e71be9df933ca81
Author: Paul Gauthier <aider@paulg.org>
Date:   Tue Dec 3 07:50:19 2024 -0800

    refactor: update GPT-4o model name to simpler format

diff --git a/aider/args.py b/aider/args.py
index 971f3c5c..5e4b09f7 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -83,7 +83,7 @@ def get_parser(default_config_files, git_root):
         const=gpt_4_model,
         help=f"Use {gpt_4_model} model for the main chat",
     )
-    gpt_4o_model = "gpt-4o-2024-08-06"
+    gpt_4o_model = "gpt-4o"
     group.add_argument(
         "--4o",
         action="store_const",

commit d2d5887936fccbde4c7404abc59a50213f5845ef
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Thu Dec 5 18:44:50 2024 -0800

    feat: add clipboard watcher with --copypaste flag

diff --git a/aider/args.py b/aider/args.py
index 5e4b09f7..e123801a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -535,6 +535,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable/disable watching files for ai coding comments (default: False)",
     )
+    group.add_argument(
+        "--copypaste",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable/disable watching clipboard for changes (default: False)",
+    )
     group = parser.add_argument_group("Fixing and committing")
     group.add_argument(
         "--lint",

commit 6efdf8a7f462ddcf5bb884877ce441b07d06ae13
Author: Paul Gauthier <aider@paulg.org>
Date:   Thu Dec 5 20:43:14 2024 -0800

    refactor: rename copypaste flag to copy-paste and update help text

diff --git a/aider/args.py b/aider/args.py
index e123801a..c4b9af2c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -536,10 +536,10 @@ def get_parser(default_config_files, git_root):
         help="Enable/disable watching files for ai coding comments (default: False)",
     )
     group.add_argument(
-        "--copypaste",
+        "--copy-paste",
         action=argparse.BooleanOptionalAction,
         default=False,
-        help="Enable/disable watching clipboard for changes (default: False)",
+        help="Enable automatic copy/paste of chat between aider and web UI (default: False)",
     )
     group = parser.add_argument_group("Fixing and committing")
     group.add_argument(

commit e41bf67f73e03e25eececf410afd07a233a170ae
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Dec 7 08:05:57 2024 -0800

    feat: add --set-env flag to set environment variables from command line

diff --git a/aider/args.py b/aider/args.py
index c4b9af2c..7bbd4a94 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -772,6 +772,13 @@ def get_parser(default_config_files, git_root):
         "--editor",
         help="Specify which editor to use for the /editor command",
     )
+    group.add_argument(
+        "--set-env",
+        action="append",
+        metavar="ENV_VAR_NAME=value",
+        help="Set an environment variable (can be used multiple times)",
+        default=[],
+    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit 13ff038e586afdbd601b487716cfc0049568b1ef
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Dec 7 08:23:50 2024 -0800

    feat: add --api-key flag to set provider API keys as env vars

diff --git a/aider/args.py b/aider/args.py
index 7bbd4a94..f4eb09ff 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -779,6 +779,13 @@ def get_parser(default_config_files, git_root):
         help="Set an environment variable (can be used multiple times)",
         default=[],
     )
+    group.add_argument(
+        "--api-key",
+        action="append",
+        metavar="PROVIDER=KEY",
+        help="Set an API key for a provider (eg: --api-key anthropic=sk-123)",
+        default=[],
+    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit 3efcd154f3c2ac8ed37147997d07bab215987204
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Dec 7 10:55:18 2024 -0800

    refactor: consolidate API key and environment variable handling

diff --git a/aider/args.py b/aider/args.py
index f4eb09ff..e2aaceeb 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -34,14 +34,10 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--openai-api-key",
-        metavar="OPENAI_API_KEY",
-        env_var="OPENAI_API_KEY",
         help="Specify the OpenAI API key",
     )
     group.add_argument(
         "--anthropic-api-key",
-        metavar="ANTHROPIC_API_KEY",
-        env_var="ANTHROPIC_API_KEY",
         help="Specify the Anthropic API key",
     )
     group.add_argument(
@@ -153,32 +149,22 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--openai-api-base",
-        metavar="OPENAI_API_BASE",
-        env_var="OPENAI_API_BASE",
         help="Specify the api base url",
     )
     group.add_argument(
         "--openai-api-type",
-        metavar="OPENAI_API_TYPE",
-        env_var="OPENAI_API_TYPE",
         help="Specify the api_type",
     )
     group.add_argument(
         "--openai-api-version",
-        metavar="OPENAI_API_VERSION",
-        env_var="OPENAI_API_VERSION",
         help="Specify the api_version",
     )
     group.add_argument(
         "--openai-api-deployment-id",
-        metavar="OPENAI_API_DEPLOYMENT_ID",
-        env_var="OPENAI_API_DEPLOYMENT_ID",
         help="Specify the deployment_id",
     )
     group.add_argument(
         "--openai-organization-id",
-        metavar="OPENAI_ORGANIZATION_ID",
-        env_var="OPENAI_ORGANIZATION_ID",
         help="Specify the OpenAI organization ID",
     )
     group.add_argument(

commit cacba526b31234104032bcf8af5c0a7889b7f173
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Dec 7 11:23:03 2024 -0800

    refactor: reorganize API key and environment settings arguments

diff --git a/aider/args.py b/aider/args.py
index e2aaceeb..a209fa87 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -32,14 +32,6 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
-    group.add_argument(
-        "--openai-api-key",
-        help="Specify the OpenAI API key",
-    )
-    group.add_argument(
-        "--anthropic-api-key",
-        help="Specify the Anthropic API key",
-    )
     group.add_argument(
         "--model",
         metavar="MODEL",
@@ -140,12 +132,14 @@ def get_parser(default_config_files, git_root):
     )
 
     ##########
-    group = parser.add_argument_group("Model Settings")
+    group = parser.add_argument_group("API Keys and settings")
     group.add_argument(
-        "--list-models",
-        "--models",
-        metavar="MODEL",
-        help="List known models which match the (partial) MODEL name",
+        "--openai-api-key",
+        help="Specify the OpenAI API key",
+    )
+    group.add_argument(
+        "--anthropic-api-key",
+        help="Specify the Anthropic API key",
     )
     group.add_argument(
         "--openai-api-base",
@@ -167,6 +161,27 @@ def get_parser(default_config_files, git_root):
         "--openai-organization-id",
         help="Specify the OpenAI organization ID",
     )
+    group.add_argument(
+        "--set-env",
+        action="append",
+        metavar="ENV_VAR_NAME=value",
+        help="Set an environment variable (can be used multiple times)",
+        default=[],
+    )
+    group.add_argument(
+        "--api-key",
+        action="append",
+        metavar="PROVIDER=KEY",
+        help="Set an API key for a provider (eg: --api-key anthropic=sk-123)",
+        default=[],
+    )
+    group = parser.add_argument_group("Model Settings")
+    group.add_argument(
+        "--list-models",
+        "--models",
+        metavar="MODEL",
+        help="List known models which match the (partial) MODEL name",
+    )
     group.add_argument(
         "--model-settings-file",
         metavar="MODEL_SETTINGS_FILE",
@@ -758,20 +773,6 @@ def get_parser(default_config_files, git_root):
         "--editor",
         help="Specify which editor to use for the /editor command",
     )
-    group.add_argument(
-        "--set-env",
-        action="append",
-        metavar="ENV_VAR_NAME=value",
-        help="Set an environment variable (can be used multiple times)",
-        default=[],
-    )
-    group.add_argument(
-        "--api-key",
-        action="append",
-        metavar="PROVIDER=KEY",
-        help="Set an API key for a provider (eg: --api-key anthropic=sk-123)",
-        default=[],
-    )
 
     ##########
     group = parser.add_argument_group("Voice Settings")

commit 7ae95698166b9dcd6c94d31122e7888ae3fcb236
Author: Paul Gauthier (aider) <aider@paulg.org>
Date:   Sat Dec 7 11:23:05 2024 -0800

    docs: update deprecated OpenAI args help text to suggest --set-env

diff --git a/aider/args.py b/aider/args.py
index a209fa87..bbf101dc 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -135,7 +135,7 @@ def get_parser(default_config_files, git_root):
     group = parser.add_argument_group("API Keys and settings")
     group.add_argument(
         "--openai-api-key",
-        help="Specify the OpenAI API key",
+        help="(deprecated, use --set-env OPENAI_API_KEY=<value>)",
     )
     group.add_argument(
         "--anthropic-api-key",
@@ -143,23 +143,23 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--openai-api-base",
-        help="Specify the api base url",
+        help="(deprecated, use --set-env OPENAI_API_BASE=<value>)",
     )
     group.add_argument(
         "--openai-api-type",
-        help="Specify the api_type",
+        help="(deprecated, use --set-env OPENAI_API_TYPE=<value>)",
     )
     group.add_argument(
         "--openai-api-version",
-        help="Specify the api_version",
+        help="(deprecated, use --set-env OPENAI_API_VERSION=<value>)",
     )
     group.add_argument(
         "--openai-api-deployment-id",
-        help="Specify the deployment_id",
+        help="(deprecated, use --set-env OPENAI_API_DEPLOYMENT_ID=<value>)",
     )
     group.add_argument(
         "--openai-organization-id",
-        help="Specify the OpenAI organization ID",
+        help="(deprecated, use --set-env OPENAI_ORGANIZATION=<value>)",
     )
     group.add_argument(
         "--set-env",

commit 20042334fffcf82fa4740dcce47b6a07976f6422
Author: Paul Gauthier <aider@paulg.org>
Date:   Sat Dec 7 11:45:20 2024 -0800

    refactor: reorganize command line arguments and improve help messages

diff --git a/aider/args.py b/aider/args.py
index bbf101dc..bfd8280c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -28,7 +28,7 @@ def get_parser(default_config_files, git_root):
         config_file_parser_class=configargparse.YAMLConfigFileParser,
         auto_env_var_prefix="AIDER_",
     )
-    group = parser.add_argument_group("Main")
+    group = parser.add_argument_group("Main model")
     group.add_argument(
         "files", metavar="FILE", nargs="*", help="files to edit with an LLM (optional)"
     )
@@ -135,7 +135,7 @@ def get_parser(default_config_files, git_root):
     group = parser.add_argument_group("API Keys and settings")
     group.add_argument(
         "--openai-api-key",
-        help="(deprecated, use --set-env OPENAI_API_KEY=<value>)",
+        help="Specify the OpenAI API key",
     )
     group.add_argument(
         "--anthropic-api-key",
@@ -143,7 +143,7 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--openai-api-base",
-        help="(deprecated, use --set-env OPENAI_API_BASE=<value>)",
+        help="Specify the api base url",
     )
     group.add_argument(
         "--openai-api-type",
@@ -165,17 +165,20 @@ def get_parser(default_config_files, git_root):
         "--set-env",
         action="append",
         metavar="ENV_VAR_NAME=value",
-        help="Set an environment variable (can be used multiple times)",
+        help="Set an environment variable (to control API settings, can be used multiple times)",
         default=[],
     )
     group.add_argument(
         "--api-key",
         action="append",
         metavar="PROVIDER=KEY",
-        help="Set an API key for a provider (eg: --api-key anthropic=sk-123)",
+        help=(
+            "Set an API key for a provider (eg: --api-key provider=<key> sets"
+            " PROVIDER_API_KEY=<key>)"
+        ),
         default=[],
     )
-    group = parser.add_argument_group("Model Settings")
+    group = parser.add_argument_group("Model settings")
     group.add_argument(
         "--list-models",
         "--models",
@@ -262,17 +265,9 @@ def get_parser(default_config_files, git_root):
             " If unspecified, defaults to the model's max_chat_history_tokens."
         ),
     )
-    # This is a duplicate of the argument in the preparser and is a no-op by this time of
-    # argument parsing, but it's here so that the help is displayed as expected.
-    group.add_argument(
-        "--env-file",
-        metavar="ENV_FILE",
-        default=default_env_file(git_root),
-        help="Specify the .env file to load (default: .env in git root)",
-    )
 
     ##########
-    group = parser.add_argument_group("Cache Settings")
+    group = parser.add_argument_group("Cache settings")
     group.add_argument(
         "--cache-prompts",
         action=argparse.BooleanOptionalAction,
@@ -287,7 +282,7 @@ def get_parser(default_config_files, git_root):
     )
 
     ##########
-    group = parser.add_argument_group("Repomap Settings")
+    group = parser.add_argument_group("Repomap settings")
     group.add_argument(
         "--map-tokens",
         type=int,
@@ -344,7 +339,7 @@ def get_parser(default_config_files, git_root):
     )
 
     ##########
-    group = parser.add_argument_group("Output Settings")
+    group = parser.add_argument_group("Output settings")
     group.add_argument(
         "--dark-mode",
         action="store_true",
@@ -443,7 +438,7 @@ def get_parser(default_config_files, git_root):
     )
 
     ##########
-    group = parser.add_argument_group("Git Settings")
+    group = parser.add_argument_group("Git settings")
     group.add_argument(
         "--git",
         action=argparse.BooleanOptionalAction,
@@ -536,12 +531,6 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable/disable watching files for ai coding comments (default: False)",
     )
-    group.add_argument(
-        "--copy-paste",
-        action=argparse.BooleanOptionalAction,
-        default=False,
-        help="Enable automatic copy/paste of chat between aider and web UI (default: False)",
-    )
     group = parser.add_argument_group("Fixing and committing")
     group.add_argument(
         "--lint",
@@ -602,37 +591,8 @@ def get_parser(default_config_files, git_root):
         default=False,
     )
 
-    group = parser.add_argument_group("Other Settings")
-    group.add_argument(
-        "--file",
-        action="append",
-        metavar="FILE",
-        help="specify a file to edit (can be used multiple times)",
-    )
-    group.add_argument(
-        "--read",
-        action="append",
-        metavar="FILE",
-        help="specify a read-only file (can be used multiple times)",
-    )
-    group.add_argument(
-        "--vim",
-        action="store_true",
-        help="Use VI editing mode in the terminal (default: False)",
-        default=False,
-    )
-    group.add_argument(
-        "--chat-language",
-        metavar="CHAT_LANGUAGE",
-        default=None,
-        help="Specify the language to use in the chat (default: None, uses system settings)",
-    )
-    group.add_argument(
-        "--version",
-        action="version",
-        version=f"%(prog)s {__version__}",
-        help="Show the version number and exit",
-    )
+    #########
+    group = parser.add_argument_group("Upgrading")
     group.add_argument(
         "--just-check-update",
         action="store_true",
@@ -664,6 +624,46 @@ def get_parser(default_config_files, git_root):
         help="Upgrade aider to the latest version from PyPI",
         default=False,
     )
+    group.add_argument(
+        "--version",
+        action="version",
+        version=f"%(prog)s {__version__}",
+        help="Show the version number and exit",
+    )
+
+    ##########
+    group = parser.add_argument_group("Modes")
+    group.add_argument(
+        "--message",
+        "--msg",
+        "-m",
+        metavar="COMMAND",
+        help=(
+            "Specify a single message to send the LLM, process reply then exit (disables chat mode)"
+        ),
+    )
+    group.add_argument(
+        "--message-file",
+        "-f",
+        metavar="MESSAGE_FILE",
+        help=(
+            "Specify a file containing the message to send the LLM, process reply, then exit"
+            " (disables chat mode)"
+        ),
+    )
+    group.add_argument(
+        "--gui",
+        "--browser",
+        action=argparse.BooleanOptionalAction,
+        help="Run aider in your browser (default: False)",
+        default=False,
+    )
+    group.add_argument(
+        "--copy-paste",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable automatic copy/paste of chat between aider and web UI (default: False)",
+    )
     group.add_argument(
         "--apply",
         metavar="FILE",
@@ -676,16 +676,9 @@ def get_parser(default_config_files, git_root):
         default=False,
     )
     group.add_argument(
-        "--yes-always",
-        action="store_true",
-        help="Always say yes to every confirmation",
-        default=None,
-    )
-    group.add_argument(
-        "-v",
-        "--verbose",
+        "--exit",
         action="store_true",
-        help="Enable verbose output",
+        help="Do all startup activities then exit before accepting user input (debug)",
         default=False,
     )
     group.add_argument(
@@ -700,29 +693,67 @@ def get_parser(default_config_files, git_root):
         help="Print the system prompts and exit (debug)",
         default=False,
     )
+
+    ##########
+    group = parser.add_argument_group("Voice settings")
     group.add_argument(
-        "--exit",
+        "--voice-format",
+        metavar="VOICE_FORMAT",
+        default="wav",
+        choices=["wav", "mp3", "webm"],
+        help="Audio format for voice recording (default: wav). webm and mp3 require ffmpeg",
+    )
+    group.add_argument(
+        "--voice-language",
+        metavar="VOICE_LANGUAGE",
+        default="en",
+        help="Specify the language for voice using ISO 639-1 code (default: auto)",
+    )
+    group.add_argument(
+        "--voice-input-device",
+        metavar="VOICE_INPUT_DEVICE",
+        default=None,
+        help="Specify the input device name for voice recording",
+    )
+
+    ######
+    group = parser.add_argument_group("Other settings")
+    group.add_argument(
+        "--file",
+        action="append",
+        metavar="FILE",
+        help="specify a file to edit (can be used multiple times)",
+    )
+    group.add_argument(
+        "--read",
+        action="append",
+        metavar="FILE",
+        help="specify a read-only file (can be used multiple times)",
+    )
+    group.add_argument(
+        "--vim",
         action="store_true",
-        help="Do all startup activities then exit before accepting user input (debug)",
+        help="Use VI editing mode in the terminal (default: False)",
         default=False,
     )
     group.add_argument(
-        "--message",
-        "--msg",
-        "-m",
-        metavar="COMMAND",
-        help=(
-            "Specify a single message to send the LLM, process reply then exit (disables chat mode)"
-        ),
+        "--chat-language",
+        metavar="CHAT_LANGUAGE",
+        default=None,
+        help="Specify the language to use in the chat (default: None, uses system settings)",
     )
     group.add_argument(
-        "--message-file",
-        "-f",
-        metavar="MESSAGE_FILE",
-        help=(
-            "Specify a file containing the message to send the LLM, process reply, then exit"
-            " (disables chat mode)"
-        ),
+        "--yes-always",
+        action="store_true",
+        help="Always say yes to every confirmation",
+        default=None,
+    )
+    group.add_argument(
+        "-v",
+        "--verbose",
+        action="store_true",
+        help="Enable verbose output",
+        default=False,
     )
     group.add_argument(
         "--load",
@@ -744,12 +775,13 @@ def get_parser(default_config_files, git_root):
             " or home directory)"
         ),
     )
+    # This is a duplicate of the argument in the preparser and is a no-op by this time of
+    # argument parsing, but it's here so that the help is displayed as expected.
     group.add_argument(
-        "--gui",
-        "--browser",
-        action=argparse.BooleanOptionalAction,
-        help="Run aider in your browser (default: False)",
-        default=False,
+        "--env-file",
+        metavar="ENV_FILE",
+        default=default_env_file(git_root),
+        help="Specify the .env file to load (default: .env in git root)",
     )
     group.add_argument(
         "--suggest-shell-commands",
@@ -774,28 +806,6 @@ def get_parser(default_config_files, git_root):
         help="Specify which editor to use for the /editor command",
     )
 
-    ##########
-    group = parser.add_argument_group("Voice Settings")
-    group.add_argument(
-        "--voice-format",
-        metavar="VOICE_FORMAT",
-        default="wav",
-        choices=["wav", "mp3", "webm"],
-        help="Audio format for voice recording (default: wav). webm and mp3 require ffmpeg",
-    )
-    group.add_argument(
-        "--voice-language",
-        metavar="VOICE_LANGUAGE",
-        default="en",
-        help="Specify the language for voice using ISO 639-1 code (default: auto)",
-    )
-    group.add_argument(
-        "--voice-input-device",
-        metavar="VOICE_INPUT_DEVICE",
-        default=None,
-        help="Specify the input device name for voice recording",
-    )
-
     return parser
 
 

commit aaf7e3f94311ac6ac63ed6e1bad3db59231c64da
Author: Mir Adnan ALI <maali@socialdynamics.ca>
Date:   Wed Dec 11 04:58:42 2024 -0500

    Implement multiline-mode, swaps Enter & Meta-Enter

diff --git a/aider/args.py b/aider/args.py
index bfd8280c..a44cffa4 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -795,6 +795,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Enable/disable fancy input with history and completion (default: True)",
     )
+    group.add_argument(
+        "--multiline",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable/disable multi-line input mode with Meta-Enter to submit (default: False, env: AIDER_MULTILINE)",
+    )
     group.add_argument(
         "--detect-urls",
         action=argparse.BooleanOptionalAction,

commit b7984a05af1f246990e32713602ec52227f92c41
Author: Paul Gauthier <aider@paulg.org>
Date:   Wed Dec 11 09:51:51 2024 -0800

    copy

diff --git a/aider/args.py b/aider/args.py
index a44cffa4..529ffffb 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -799,7 +799,7 @@ def get_parser(default_config_files, git_root):
         "--multiline",
         action=argparse.BooleanOptionalAction,
         default=False,
-        help="Enable/disable multi-line input mode with Meta-Enter to submit (default: False, env: AIDER_MULTILINE)",
+        help="Enable/disable multi-line input mode with Meta-Enter to submit (default: False)",
     )
     group.add_argument(
         "--detect-urls",

commit 7f0d08ad77462dd9d36a3170d24e89168020f5fb
Author: Evan Johnson <ev.jonnson@gmail.com>
Date:   Tue Dec 17 13:18:31 2024 -0700

    doc that Pygments styles can be used for --code-theme

diff --git a/aider/args.py b/aider/args.py
index 529ffffb..2ba98853 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -427,7 +427,8 @@ def get_parser(default_config_files, git_root):
         default="default",
         help=(
             "Set the markdown code theme (default: default, other options include monokai,"
-            " solarized-dark, solarized-light)"
+            " solarized-dark, solarized-light, or a Pygments builtin style,"
+            " see https://pygments.org/styles for available themes)"
         ),
     )
     group.add_argument(

commit 5c3cca157d2801e33fc0f6948b2c870ce6cd26c1
Author: Paul Gauthier <paul@aider.chat>
Date:   Thu Dec 26 19:40:06 2024 -0400

    switch to deepseek-chat instead of deepseek-coder

diff --git a/aider/args.py b/aider/args.py
index 2ba98853..32f2a07b 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -106,7 +106,7 @@ def get_parser(default_config_files, git_root):
         const=gpt_3_model_name,
         help=f"Use {gpt_3_model_name} model for the main chat",
     )
-    deepseek_model = "deepseek/deepseek-coder"
+    deepseek_model = "deepseek/deepseek-chat"
     group.add_argument(
         "--deepseek",
         action="store_const",

commit d48008e13d8b444fb8c143899f994a477503fa27
Author: Paul Gauthier <paul@aider.chat>
Date:   Fri Jan 10 14:38:12 2025 -0800

    refactor: Update repo map token handling and improve warning message

diff --git a/aider/args.py b/aider/args.py
index 32f2a07b..642858ec 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -287,7 +287,7 @@ def get_parser(default_config_files, git_root):
         "--map-tokens",
         type=int,
         default=None,
-        help="Suggested number of tokens to use for repo map, use 0 to disable (default: 1024)",
+        help="Suggested number of tokens to use for repo map, use 0 to disable",
     )
     group.add_argument(
         "--map-refresh",

commit c3952cb985a8d9273fbcbbfcd19d2bcf503a3363
Author: Titusz Pan <titusz.pan@gmail.com>
Date:   Mon Jan 13 17:51:02 2025 +0100

    feat: Add line endings configuration option for file writing

diff --git a/aider/args.py b/aider/args.py
index 642858ec..b880605a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -766,6 +766,12 @@ def get_parser(default_config_files, git_root):
         default="utf-8",
         help="Specify the encoding for input and output (default: utf-8)",
     )
+    group.add_argument(
+        "--line-endings",
+        choices=["platform", "lf", "crlf"],
+        default="platform",
+        help="Line endings to use when writing files (default: platform)",
+    )
     group.add_argument(
         "-c",
         "--config",

commit 3fa796382eb373f95a73a897c0fe2e3ed74e36ab
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Fri Jan 31 13:07:08 2025 -0800

    feat: Add --reasoning-effort CLI parameter to control model reasoning effort

diff --git a/aider/args.py b/aider/args.py
index b880605a..5b960e97 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -304,6 +304,11 @@ def get_parser(default_config_files, git_root):
         default=2,
         help="Multiplier for map tokens when no files are specified (default: 2)",
     )
+    group.add_argument(
+        "--reasoning-effort",
+        type=float,
+        help="Control how much effort the model spends on reasoning (0.0-1.0)",
+    )
 
     ##########
     group = parser.add_argument_group("History Files")

commit 14612fc11646b6b49975ba4af3d87cb0b7e896ca
Author: Paul Gauthier <paul@aider.chat>
Date:   Fri Jan 31 13:10:19 2025 -0800

    better arg desc

diff --git a/aider/args.py b/aider/args.py
index 5b960e97..88fd6853 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -203,6 +203,11 @@ def get_parser(default_config_files, git_root):
         metavar="ALIAS:MODEL",
         help="Add a model alias (can be used multiple times)",
     )
+    group.add_argument(
+        "--reasoning-effort",
+        type=str,
+        help="Set the reasoning_effort API parameter (default: not set)",
+    )
     group.add_argument(
         "--verify-ssl",
         action=argparse.BooleanOptionalAction,
@@ -304,11 +309,6 @@ def get_parser(default_config_files, git_root):
         default=2,
         help="Multiplier for map tokens when no files are specified (default: 2)",
     )
-    group.add_argument(
-        "--reasoning-effort",
-        type=float,
-        help="Control how much effort the model spends on reasoning (0.0-1.0)",
-    )
 
     ##########
     group = parser.add_argument_group("History Files")

commit 39855f4d2bf6f656109de3c2a2d8b1778b47aeb4
Author: Paul Gauthier <paul@aider.chat>
Date:   Thu Feb 6 11:36:15 2025 -0800

    refactor: Change timeout handling to use float type and global request_timeout

diff --git a/aider/args.py b/aider/args.py
index 88fd6853..e20d99db 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -216,7 +216,7 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--timeout",
-        type=int,
+        type=float,
         default=None,
         help="Timeout in seconds for API calls (default: None)",
     )

commit 42237ced800f6fd5e1d9ce4474eddf307faa1a37
Author: Paul Gauthier <paul@aider.chat>
Date:   Sun Feb 9 17:19:19 2025 -0800

    feat: Add CLI option to install tree-sitter language pack

diff --git a/aider/args.py b/aider/args.py
index e20d99db..554931fa 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -823,6 +823,12 @@ def get_parser(default_config_files, git_root):
         "--editor",
         help="Specify which editor to use for the /editor command",
     )
+    group.add_argument(
+        "--install-tree-sitter-language-pack",
+        action="store_true",
+        help="Install the tree_sitter_language_pack (experimental)",
+        default=False,
+    )
 
     return parser
 

commit c156b2f817172c73bdea0145a7f379de95a483ab
Author: Paul Gauthier <paul@aider.chat>
Date:   Mon Feb 24 12:11:49 2025 -0800

    feat: Update Claude Sonnet model to latest version

diff --git a/aider/args.py b/aider/args.py
index 554931fa..2a55b4d2 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -46,7 +46,7 @@ def get_parser(default_config_files, git_root):
         const=opus_model,
         help=f"Use {opus_model} model for the main chat",
     )
-    sonnet_model = "claude-3-5-sonnet-20241022"
+    sonnet_model = "anthropic/claude-3-7-sonnet-20250219"
     group.add_argument(
         "--sonnet",
         action="store_const",

commit 38e8d274162fd4cce3339ee9d386d4dc9a049ef4
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 6 11:45:37 2025 -0800

    feat: Add desktop notification support with notify-py package

diff --git a/aider/args.py b/aider/args.py
index 2a55b4d2..21c12b69 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -795,6 +795,12 @@ def get_parser(default_config_files, git_root):
         default=default_env_file(git_root),
         help="Specify the .env file to load (default: .env in git root)",
     )
+    group.add_argument(
+        "--notification",
+        choices=["bell", "desktop", "both", "none"],
+        default="bell",
+        help="Notification method when LLM completes (default: bell)",
+    )
     group.add_argument(
         "--suggest-shell-commands",
         action=argparse.BooleanOptionalAction,

commit c3401047e0c9f3b9b6623ae760d92555e6e050e5
Author: Paul Gauthier <paul@aider.chat>
Date:   Thu Mar 6 11:53:58 2025 -0800

    Revert "feat: Add desktop notification support with notify-py package"
    
    This reverts commit 38e8d274162fd4cce3339ee9d386d4dc9a049ef4.

diff --git a/aider/args.py b/aider/args.py
index 21c12b69..2a55b4d2 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -795,12 +795,6 @@ def get_parser(default_config_files, git_root):
         default=default_env_file(git_root),
         help="Specify the .env file to load (default: .env in git root)",
     )
-    group.add_argument(
-        "--notification",
-        choices=["bell", "desktop", "both", "none"],
-        default="bell",
-        help="Notification method when LLM completes (default: bell)",
-    )
     group.add_argument(
         "--suggest-shell-commands",
         action=argparse.BooleanOptionalAction,

commit 2fe1b1e16ee5dd5709164ca4722fd9b9ae3bdfbd
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 6 11:55:32 2025 -0800

    feat: Add --notifications flag to control terminal bell

diff --git a/aider/args.py b/aider/args.py
index 2a55b4d2..bdfe74e2 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -813,6 +813,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable/disable multi-line input mode with Meta-Enter to submit (default: False)",
     )
+    group.add_argument(
+        "--notifications",
+        action=argparse.BooleanOptionalAction,
+        default=False,
+        help="Enable/disable terminal bell notifications when LLM responses are ready (default: False)",
+    )
     group.add_argument(
         "--detect-urls",
         action=argparse.BooleanOptionalAction,

commit 65e059a7d2518422b37d07ce2bb4ef8c816fd92d
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 6 12:00:21 2025 -0800

    feat: Add notifications-command option to run custom notification commands

diff --git a/aider/args.py b/aider/args.py
index bdfe74e2..871cbd9c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -819,6 +819,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Enable/disable terminal bell notifications when LLM responses are ready (default: False)",
     )
+    group.add_argument(
+        "--notifications-command",
+        metavar="COMMAND",
+        default=None,
+        help="Specify a command to run for notifications instead of the terminal bell",
+    )
     group.add_argument(
         "--detect-urls",
         action=argparse.BooleanOptionalAction,

commit e817c76e3877cbe986b7abf308f427f6d069a2c2
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 6 12:00:33 2025 -0800

    style: Format code with linter and improve line breaks

diff --git a/aider/args.py b/aider/args.py
index 871cbd9c..f8531692 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -817,7 +817,10 @@ def get_parser(default_config_files, git_root):
         "--notifications",
         action=argparse.BooleanOptionalAction,
         default=False,
-        help="Enable/disable terminal bell notifications when LLM responses are ready (default: False)",
+        help=(
+            "Enable/disable terminal bell notifications when LLM responses are ready (default:"
+            " False)"
+        ),
     )
     group.add_argument(
         "--notifications-command",

commit 93b86a8800914a28fe45acb933d6904d45f1790b
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 6 12:04:14 2025 -0800

    feat: Add OS-specific default notification commands with custom message

diff --git a/aider/args.py b/aider/args.py
index f8531692..a447eea2 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -826,7 +826,7 @@ def get_parser(default_config_files, git_root):
         "--notifications-command",
         metavar="COMMAND",
         default=None,
-        help="Specify a command to run for notifications instead of the terminal bell",
+        help="Specify a command to run for notifications instead of the terminal bell. If not specified, a default command for your OS may be used.",
     )
     group.add_argument(
         "--detect-urls",

commit c79db2581b6776da13d55119ed1ae317c10bd9c3
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 6 12:04:23 2025 -0800

    style: Reformat code to improve linter compliance

diff --git a/aider/args.py b/aider/args.py
index a447eea2..ca287e71 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -826,7 +826,10 @@ def get_parser(default_config_files, git_root):
         "--notifications-command",
         metavar="COMMAND",
         default=None,
-        help="Specify a command to run for notifications instead of the terminal bell. If not specified, a default command for your OS may be used.",
+        help=(
+            "Specify a command to run for notifications instead of the terminal bell. If not"
+            " specified, a default command for your OS may be used."
+        ),
     )
     group.add_argument(
         "--detect-urls",

commit cf089abb64095b794cb284bcec6e3188a113be7f
Author: Paul Gauthier <paul@aider.chat>
Date:   Thu Mar 6 12:32:06 2025 -0800

    switch to tslp

diff --git a/aider/args.py b/aider/args.py
index ca287e71..591183f7 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -841,12 +841,6 @@ def get_parser(default_config_files, git_root):
         "--editor",
         help="Specify which editor to use for the /editor command",
     )
-    group.add_argument(
-        "--install-tree-sitter-language-pack",
-        action="store_true",
-        help="Install the tree_sitter_language_pack (experimental)",
-        default=False,
-    )
 
     return parser
 

commit fe60832492787b18e0cde37987fad7466923fe1c
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sat Mar 8 13:38:06 2025 -0800

    refactor: move model shortcut args to deprecated module with warnings

diff --git a/aider/args.py b/aider/args.py
index 591183f7..e4b27a88 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -12,6 +12,7 @@ from aider.args_formatter import (
     MarkdownHelpFormatter,
     YamlHelpFormatter,
 )
+from aider.deprecated import add_deprecated_model_args
 
 from .dump import dump  # noqa: F401
 
@@ -38,98 +39,9 @@ def get_parser(default_config_files, git_root):
         default=None,
         help="Specify the model to use for the main chat",
     )
-    opus_model = "claude-3-opus-20240229"
-    group.add_argument(
-        "--opus",
-        action="store_const",
-        dest="model",
-        const=opus_model,
-        help=f"Use {opus_model} model for the main chat",
-    )
-    sonnet_model = "anthropic/claude-3-7-sonnet-20250219"
-    group.add_argument(
-        "--sonnet",
-        action="store_const",
-        dest="model",
-        const=sonnet_model,
-        help=f"Use {sonnet_model} model for the main chat",
-    )
-    haiku_model = "claude-3-5-haiku-20241022"
-    group.add_argument(
-        "--haiku",
-        action="store_const",
-        dest="model",
-        const=haiku_model,
-        help=f"Use {haiku_model} model for the main chat",
-    )
-    gpt_4_model = "gpt-4-0613"
-    group.add_argument(
-        "--4",
-        "-4",
-        action="store_const",
-        dest="model",
-        const=gpt_4_model,
-        help=f"Use {gpt_4_model} model for the main chat",
-    )
-    gpt_4o_model = "gpt-4o"
-    group.add_argument(
-        "--4o",
-        action="store_const",
-        dest="model",
-        const=gpt_4o_model,
-        help=f"Use {gpt_4o_model} model for the main chat",
-    )
-    gpt_4o_mini_model = "gpt-4o-mini"
-    group.add_argument(
-        "--mini",
-        action="store_const",
-        dest="model",
-        const=gpt_4o_mini_model,
-        help=f"Use {gpt_4o_mini_model} model for the main chat",
-    )
-    gpt_4_turbo_model = "gpt-4-1106-preview"
-    group.add_argument(
-        "--4-turbo",
-        action="store_const",
-        dest="model",
-        const=gpt_4_turbo_model,
-        help=f"Use {gpt_4_turbo_model} model for the main chat",
-    )
-    gpt_3_model_name = "gpt-3.5-turbo"
-    group.add_argument(
-        "--35turbo",
-        "--35-turbo",
-        "--3",
-        "-3",
-        action="store_const",
-        dest="model",
-        const=gpt_3_model_name,
-        help=f"Use {gpt_3_model_name} model for the main chat",
-    )
-    deepseek_model = "deepseek/deepseek-chat"
-    group.add_argument(
-        "--deepseek",
-        action="store_const",
-        dest="model",
-        const=deepseek_model,
-        help=f"Use {deepseek_model} model for the main chat",
-    )
-    o1_mini_model = "o1-mini"
-    group.add_argument(
-        "--o1-mini",
-        action="store_const",
-        dest="model",
-        const=o1_mini_model,
-        help=f"Use {o1_mini_model} model for the main chat",
-    )
-    o1_preview_model = "o1-preview"
-    group.add_argument(
-        "--o1-preview",
-        action="store_const",
-        dest="model",
-        const=o1_preview_model,
-        help=f"Use {o1_preview_model} model for the main chat",
-    )
+    
+    # Add deprecated model shortcut arguments
+    add_deprecated_model_args(parser, group)
 
     ##########
     group = parser.add_argument_group("API Keys and settings")

commit 18d27ab4e4df9e2239ad2d727f125b4481816103
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sat Mar 8 13:38:17 2025 -0800

    style: fix linting issues and whitespace cleanup

diff --git a/aider/args.py b/aider/args.py
index e4b27a88..04ceb3ba 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -39,7 +39,7 @@ def get_parser(default_config_files, git_root):
         default=None,
         help="Specify the model to use for the main chat",
     )
-    
+
     # Add deprecated model shortcut arguments
     add_deprecated_model_args(parser, group)
 

commit ac1c05389a3ae3b6ae6deadbab3773af0a8e2bcb
Author: Paul Gauthier <paul@aider.chat>
Date:   Sat Mar 8 17:13:50 2025 -0800

    refactor: move deprecated model args to dedicated group

diff --git a/aider/args.py b/aider/args.py
index 04ceb3ba..cbb325ae 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -40,9 +40,6 @@ def get_parser(default_config_files, git_root):
         help="Specify the model to use for the main chat",
     )
 
-    # Add deprecated model shortcut arguments
-    add_deprecated_model_args(parser, group)
-
     ##########
     group = parser.add_argument_group("API Keys and settings")
     group.add_argument(
@@ -754,6 +751,11 @@ def get_parser(default_config_files, git_root):
         help="Specify which editor to use for the /editor command",
     )
 
+    ##########
+    group = parser.add_argument_group("Deprecated model settings")
+    # Add deprecated model shortcut arguments
+    add_deprecated_model_args(parser, group)
+
     return parser
 
 

commit 6f99392eda26ae6c2af36e18203aad5f670fe76e
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Sat Mar 8 17:26:09 2025 -0800

    feat: add thinking token budget configuration option

diff --git a/aider/args.py b/aider/args.py
index cbb325ae..846c8ab0 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -117,6 +117,11 @@ def get_parser(default_config_files, git_root):
         type=str,
         help="Set the reasoning_effort API parameter (default: not set)",
     )
+    group.add_argument(
+        "--thinking-tokens",
+        type=int,
+        help="Set the thinking token budget for models that support it (default: not set)",
+    )
     group.add_argument(
         "--verify-ssl",
         action=argparse.BooleanOptionalAction,

commit a348c2d013ec535076b530c3dfc97818d13a51ff
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Tue Mar 11 11:36:17 2025 -0700

    feat: Change --thinking-tokens argument type to string

diff --git a/aider/args.py b/aider/args.py
index 846c8ab0..f111b6dc 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -119,7 +119,7 @@ def get_parser(default_config_files, git_root):
     )
     group.add_argument(
         "--thinking-tokens",
-        type=int,
+        type=str,
         help="Set the thinking token budget for models that support it (default: not set)",
     )
     group.add_argument(

commit c05227004816a653308b62b4d18f9a54d1a0a56a
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Wed Mar 12 13:08:59 2025 -0700

    feat: Add --auto-accept-architect option with default true

diff --git a/aider/args.py b/aider/args.py
index f111b6dc..01238360 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -148,6 +148,12 @@ def get_parser(default_config_files, git_root):
         const="architect",
         help="Use architect edit format for the main chat",
     )
+    group.add_argument(
+        "--auto-accept-architect",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable automatic acceptance of architect changes (default: True)",
+    )
     group.add_argument(
         "--weak-model",
         metavar="WEAK_MODEL",

commit 076c38526a08aafb30ce517140e152b57c7b2249
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Tue Mar 18 12:01:45 2025 -0700

    feat: Add --check-model-accepts-settings flag with default true

diff --git a/aider/args.py b/aider/args.py
index 01238360..6db9dacd 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -181,6 +181,12 @@ def get_parser(default_config_files, git_root):
         default=True,
         help="Only work with models that have meta-data available (default: True)",
     )
+    group.add_argument(
+        "--check-model-accepts-settings",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Check if model accepts settings like reasoning_effort/thinking_tokens (default: True)",
+    )
     group.add_argument(
         "--max-chat-history-tokens",
         type=int,

commit 2589c29b1ce419d29a7da45ae512fcf476efd62f
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Tue Mar 18 12:01:55 2025 -0700

    style: Format code to comply with linter rules

diff --git a/aider/args.py b/aider/args.py
index 6db9dacd..8a0be245 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -185,7 +185,9 @@ def get_parser(default_config_files, git_root):
         "--check-model-accepts-settings",
         action=argparse.BooleanOptionalAction,
         default=True,
-        help="Check if model accepts settings like reasoning_effort/thinking_tokens (default: True)",
+        help=(
+            "Check if model accepts settings like reasoning_effort/thinking_tokens (default: True)"
+        ),
     )
     group.add_argument(
         "--max-chat-history-tokens",

commit ac231e43adc0f14029ea098263dd2cb38725e784
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 20 15:06:44 2025 -0700

    feat: Add --git-commit-verify flag to control git hook verification

diff --git a/aider/args.py b/aider/args.py
index 8a0be245..fb89062c 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -436,6 +436,12 @@ def get_parser(default_config_files, git_root):
         default=False,
         help="Prefix all commit messages with 'aider: ' (default: False)",
     )
+    group.add_argument(
+        "--git-commit-verify",
+        action=argparse.BooleanOptionalAction,
+        default=True,
+        help="Enable/disable git pre-commit hooks with --no-verify (default: True)",
+    )
     group.add_argument(
         "--commit",
         action="store_true",

commit fe795cc2d53bb33d2bc7649a9a382dd4cd0a3f62
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Thu Mar 20 15:08:44 2025 -0700

    chore: Change default git commit verify flag to False

diff --git a/aider/args.py b/aider/args.py
index fb89062c..bdcf1ac9 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -439,8 +439,8 @@ def get_parser(default_config_files, git_root):
     group.add_argument(
         "--git-commit-verify",
         action=argparse.BooleanOptionalAction,
-        default=True,
-        help="Enable/disable git pre-commit hooks with --no-verify (default: True)",
+        default=False,
+        help="Enable/disable git pre-commit hooks with --no-verify (default: False)",
     )
     group.add_argument(
         "--commit",

commit 6b76ed8098ae4090cf2622deb06f1ed9c2edff95
Author: Yutaka Matsubara <mopemope>
Date:   Mon Mar 10 08:41:49 2025 +0900

    refactor: enhance --aiderignore argument to resolve absolute and relative paths

diff --git a/aider/args.py b/aider/args.py
index 846c8ab0..914a477a 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -3,6 +3,7 @@
 import argparse
 import os
 import sys
+from pathlib import Path
 
 import configargparse
 
@@ -374,9 +375,19 @@ def get_parser(default_config_files, git_root):
     default_aiderignore_file = (
         os.path.join(git_root, ".aiderignore") if git_root else ".aiderignore"
     )
+
+    def resolve_aiderignore_path(path_str):
+        path = Path(path_str)
+        if path.is_absolute():
+            return str(path)
+        elif git_root:
+            return str(Path(git_root) / path)
+        return str(path)
+
     group.add_argument(
         "--aiderignore",
         metavar="AIDERIGNORE",
+        type=resolve_aiderignore_path,
         default=default_aiderignore_file,
         help="Specify the aider ignore file (default: .aiderignore in git root)",
     )

commit ffe89362ab212f074c266963d0eb2cfe73bf4844
Merge: a82c0f9e 6b76ed80
Author: paul-gauthier <69695708+paul-gauthier@users.noreply.github.com>
Date:   Fri Mar 21 11:02:04 2025 -0700

    Merge pull request #3478 from mopemope/fix-ignore
    
    refactor: enhance --aiderignore argument to resolve absolute and relative paths


commit 1ec257278e7cc0f2a6049449e40c5d1af5b12a73
Author: Paul Gauthier (aider) <paul@aider.chat>
Date:   Fri Mar 21 11:04:51 2025 -0700

    refactor: Move resolve_aiderignore_path to top level and add tests

diff --git a/aider/args.py b/aider/args.py
index 60e18970..6df19778 100644
--- a/aider/args.py
+++ b/aider/args.py
@@ -18,6 +18,15 @@ from aider.deprecated import add_deprecated_model_args
 from .dump import dump  # noqa: F401
 
 
+def resolve_aiderignore_path(path_str, git_root=None):
+    path = Path(path_str)
+    if path.is_absolute():
+        return str(path)
+    elif git_root:
+        return str(Path(git_root) / path)
+    return str(path)
+
+
 def default_env_file(git_root):
     return os.path.join(git_root, ".env") if git_root else ".env"
 
@@ -390,18 +399,10 @@ def get_parser(default_config_files, git_root):
         os.path.join(git_root, ".aiderignore") if git_root else ".aiderignore"
     )
 
-    def resolve_aiderignore_path(path_str):
-        path = Path(path_str)
-        if path.is_absolute():
-            return str(path)
-        elif git_root:
-            return str(Path(git_root) / path)
-        return str(path)
-
     group.add_argument(
         "--aiderignore",
         metavar="AIDERIGNORE",
-        type=resolve_aiderignore_path,
+        type=lambda path_str: resolve_aiderignore_path(path_str, git_root),
         default=default_aiderignore_file,
         help="Specify the aider ignore file (default: .aiderignore in git root)",
     )

