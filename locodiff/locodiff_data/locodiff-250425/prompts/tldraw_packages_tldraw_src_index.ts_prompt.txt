# Instructions

You are being benchmarked. You will see the output of a git log command, and from that must infer the current state of a file. Think carefully, as you must output the exact state of the file to earn full marks.

**Important:** Your goal is to reproduce the file's content *exactly* as it exists at the final commit, even if the code appears broken, buggy, or contains obvious errors. Do **not** try to "fix" the code. Attempting to correct issues will result in a poor score, as this benchmark evaluates your ability to reproduce the precise state of the file based on its history.

# Required Response Format

Wrap the content of the file in triple backticks (```). Any text outside the final closing backticks will be ignored. End your response after outputting the closing backticks.

# Example Response

```python
#!/usr/bin/env python
print('Hello, world!')
```

# File History

> git log -p --cc --topo-order --reverse -- packages/tldraw/src/index.ts

commit 5998879e249b77c4cc3441e96e726b4a7d5ca2ca
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Tue Aug 10 17:12:55 2021 +0100

    Replace

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
new file mode 100644
index 000000000..5fd99bf02
--- /dev/null
+++ b/packages/tldraw/src/index.ts
@@ -0,0 +1,4 @@
+export * from './components/tldraw'
+export * from './types'
+export * from './shape'
+export { TLDrawState } from './state'

commit 2e6c33342d72ce193828cf346cec63b3524ccce0
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed Oct 27 16:15:01 2021 +0100

    [refactor] ShapeUtils (#206)
    
    * Starts refactor
    
    * tests passing, got it
    
    * Fix next

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 5fd99bf02..5b8376434 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,4 +1,4 @@
 export * from './components/tldraw'
 export * from './types'
-export * from './shape'
+export * from './shape-utils'
 export { TLDrawState } from './state'

commit e2369003c6b40f274642f080c9500e7448f45e86
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed Nov 3 16:46:33 2021 +0000

    [improvement] UI (#215)
    
    * move folders out of packages
    
    * Remove custom yarn stuff, remove duplicate readme
    
    * Remove stitches config
    
    * Add README script.
    
    * bump deps
    
    * Fix script
    
    * Update package.json
    
    * rehauls UI
    
    * further rehauls UI
    
    * UI polish
    
    * Update ToolButton.tsx
    
    * Update ToolButton.tsx
    
    * Bump license
    
    * move tldraw to root
    
    * Remove SW

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 5b8376434..2e45b1fdf 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,4 +1,4 @@
-export * from './components/tldraw'
+export * from './TLDraw'
 export * from './types'
 export * from './shape-utils'
 export { TLDrawState } from './state'

commit fb77323ef2c81f16d72ea85f3f6c39cacee83701
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Nov 5 14:13:14 2021 +0000

    [feature] filesystem + readonly (#218)
    
    * Fix escape key for menu
    
    * Adds filesystem support, readonly mode
    
    * Move file system events to external hook
    
    * Adds onSignIn callback, prevent event by default

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 2e45b1fdf..b8a7c6603 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,3 +2,4 @@ export * from './TLDraw'
 export * from './types'
 export * from './shape-utils'
 export { TLDrawState } from './state'
+export { useFileSystem } from './hooks'

commit e11f05028f32b203aa6f066ebe3152a90121d4b5
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sat Nov 6 11:16:30 2021 +0000

    [mega-chore] renaming (#223)
    
    * Rename shape utils
    
    * renames files
    
    * Add husky
    
    * Delete .babelrc
    
    * Update TLDR.ts
    
    * renames commands
    
    * Update package.json
    
    * more pre-commit work

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b8a7c6603..75fa44917 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,5 @@
 export * from './TLDraw'
 export * from './types'
-export * from './shape-utils'
+export * from './state/shapes'
 export { TLDrawState } from './state'
 export { useFileSystem } from './hooks'

commit 0c5f8dda48392b5f4f1418c0112451565bd31b0d
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Tue Nov 16 16:01:29 2021 +0000

    1.0.0 (#267)
    
    * remove sponsorwall for main route
    
    * Adds sponsorship link
    
    * Remove all sponsorwall
    
    * Fix sponsorship link appearance on dark mode
    
    * Add heart icon
    
    * Fix text bug
    
    * Fix toolbar, hide resize handles on sticky
    
    * Add eraser
    
    * Update Kbd.tsx
    
    * cleanup
    
    * base zoom delta on event deltaMode
    
    * Fix image in example
    
    * Fix eraser icon
    
    * eraser tool resets to previous tool
    
    * Update EraseTool.spec.ts
    
    * Improves support for locked shapes
    
    * Update _document.tsx
    
    * Update CHANGELOG.md
    
    * Adds multiplayer menu, fix develop route in example
    
    * Tighten up top panel padding
    
    * Update top bar, bump packages
    
    * refactor TLDrawState -> TLDrawApp, mutables, new tests
    
    * Fix scaling bug, delete groups bug
    
    * fix snapping
    
    * add pressure to points
    
    * Remove mutables, rename to tldraw (or Tldraw)
    
    * Clean up types, add darkmode prop
    
    * more renaming
    
    * rename getShapeUtils to getShapeUtil
    
    * Fix file names
    
    * Fix last bugs related to renaming
    
    * Update state to app in tests
    
    * rename types to TD
    
    * remove unused styles / rename styles
    
    * slight update to panel
    
    * Fix rogue radix perf issue
    
    * Update ZoomMenu.tsx
    
    * Consolidate style panel
    
    * Fix text wrapping in text shape, improve action menu
    
    * Fix props
    
    * add indicators for tool lock
    
    * fix calloits
    
    * Add click to erase shapes
    
    * Slightly improve loading screen
    
    * Update PrimaryTools.tsx
    
    * remove force consistent filenames from tsconfig
    
    * Update useTldrawApp.tsx
    
    * fix capitalization
    
    * Update main.yml

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 75fa44917..42fbc3671 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,5 @@
-export * from './TLDraw'
+export * from './Tldraw'
 export * from './types'
 export * from './state/shapes'
-export { TLDrawState } from './state'
+export { TldrawApp } from './state'
 export { useFileSystem } from './hooks'

commit c54c8006756cc368c2f5e7a6d3dbd1f417a05a94
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed May 11 14:25:08 2022 +0100

    [improvement] local copy and export for images (#669)
    
    * local images
    
    use assets for local copy
    
    add menu options
    
    * clean up packages
    
    * cleanup unused content, move file handling into app.paste
    
    * Add tldraw-assets.json to other files.
    
    * add path to editor
    
    * Update build.mjs
    
    * add export to server example with link to gist
    
    * Fix onAssetCreate and onAssetDelete APIs
    
    * Update yarn.lock
    
    * fix bugs on paste, adjust api for getting images, fix readonly on cut, copy, paste
    
    * re-enable swc
    
    * paste svg strings as svg images
    
    * cleanup
    
    * fix string case for tldraw json

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 42fbc3671..3eb28432e 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,6 @@
 export * from './Tldraw'
 export * from './types'
 export * from './state/shapes'
+export * from './state/TLDR'
 export { TldrawApp } from './state'
 export { useFileSystem } from './hooks'

commit ec84f64e637998396f38c8f868236aae7bc931a4
Author: alex <alex@dytry.ch>
Date:   Fri Apr 21 16:53:31 2023 +0100

    lite: delete all

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
deleted file mode 100644
index 3eb28432e..000000000
--- a/packages/tldraw/src/index.ts
+++ /dev/null
@@ -1,6 +0,0 @@
-export * from './Tldraw'
-export * from './types'
-export * from './state/shapes'
-export * from './state/TLDR'
-export { TldrawApp } from './state'
-export { useFileSystem } from './hooks'

commit 29ed921c6745923dcc8daa72ba6f815a5c4b279a
Author: alex <alex@dytry.ch>
Date:   Tue Apr 25 12:01:25 2023 +0100

    transfer-out: transfer out

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
new file mode 100644
index 000000000..0f366bafb
--- /dev/null
+++ b/packages/tldraw/src/index.ts
@@ -0,0 +1,10 @@
+/** @internal */
+import '@tldraw/polyfills'
+
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/editor'
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/tlsync-client'
+// eslint-disable-next-line local/no-export-star
+export * from '@tldraw/ui'
+export { Tldraw } from './lib/Tldraw'

commit 0c4174c0b8b0ef1250cc3bd4c4030f99e5204929
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Thu Jun 1 16:47:34 2023 +0100

    [refactor] User-facing APIs (#1478)
    
    This PR updates our user-facing APIs for the Tldraw and TldrawEditor
    components, as well as the Editor (App). It mainly incorporates surface
    changes from #1450 without any changes to validators or migrators,
    incorporating feedback / discussion with @SomeHats and @ds300.
    
    Here we:
    - remove the TldrawEditorConfig
    - bring back a loose version of shape definitions
    - make a separation between "core" shapes and "default" shapes
    - do not allow custom shapes, migrators or validators to overwrite core
    shapes
    - but _do_ allow new shapes
    
    ## `<Tldraw>` component
    
    In this PR, the `Tldraw` component wraps both the `TldrawEditor`
    component and our `TldrawUi` component. It accepts a union of props for
    both components. Previously, this component also added local syncing via
    a `useLocalSyncClient` hook call, however that has been pushed down to
    the `TldrawEditor` component.
    
    ## `<TldrawEditor>` component
    
    The `TldrawEditor` component now more neatly wraps up the different ways
    that the editor can be configured.
    
    ## The store prop (`TldrawEditorProps.store`)
    
    There are three main ways for the `TldrawEditor` component to be run:
    1. with an externally defined store
    2. with an externally defined syncing store (local or remote)
    3. with an internally defined store
    4. with an internally defined locally syncing store
    
    The `store` prop allows for these configurations.
    
    If the `store` prop is defined, it may be defined either as a `TLStore`
    or as a `SyncedStore`. If the store is a `TLStore`, then the Editor will
    assume that the store is ready to go; if it is defined as a SyncedStore,
    then the component will display the loading / error screens as needed,
    or the final editor once the store's status is "synced".
    
    When the store is left undefined, then the `TldrawEditor` will create
    its own internal store using the optional `instanceId`, `initialData`,
    or `shapes` props to define the store / store schema.
    
    If the `persistenceKey` prop is left undefined, then the store will not
    be synced. If the `persistenceKey` is defined, then the store will be
    synced locally. In the future, we may also here accept the API key /
    roomId / etc for creating a remotely synced store.
    
    The `SyncedStore` type has been expanded to also include types used for
    remote syncing, e.g. with `ConnectionStatus`.
    
    ## Tools
    
    By default, the App has two "baked-in" tools: the select tool and the
    zoom tool. These cannot (for now) be replaced or removed. The default
    tools are used by default, but may be replaced by other tools if
    provided.
    
    ## Shapes
    
    By default, the App has a set of "core" shapes:
    - group
    - embed
    - bookmark
    - image
    - video
    - text
    
    That cannot by overwritten because they're created by the app at
    different moments, such as when double clicking on the canvas or via a
    copy and paste event. In follow up PRs, we'll split these out so that
    users can replace parts of the code where these shapes are created.
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking Change
    
    ### Test Plan
    
    - [x] Unit Tests

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 0f366bafb..999e55610 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -4,7 +4,5 @@ import '@tldraw/polyfills'
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 // eslint-disable-next-line local/no-export-star
-export * from '@tldraw/tlsync-client'
-// eslint-disable-next-line local/no-export-star
 export * from '@tldraw/ui'
 export { Tldraw } from './lib/Tldraw'

commit 55acf046aad3616d67c1f8e5f1056ddcc2c4393b
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sun Jun 18 21:26:06 2023 +0100

    [fix] tldraw api report (#1615)
    
    This PR adds a dumb reference that is presence on the bublic branch but
    not on tldraw repo. Ridiculous.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 999e55610..126f0a2f8 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,3 +1,5 @@
+/// <reference types="react" />
+
 /** @internal */
 import '@tldraw/polyfills'
 

commit 57bb341593d5f66261de4f0341736681aa6a71b6
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Jun 19 15:01:18 2023 +0100

    `ShapeUtil` refactor, `Editor` cleanup (#1611)
    
    This PR improves the ergonomics of `ShapeUtil` classes.
    
    ### Cached methods
    
    First, I've remove the cached methods (such as `bounds`) from the
    `ShapeUtil` class and lifted this to the `Editor` class.
    
    Previously, calling `ShapeUtil.getBounds` would return the un-cached
    bounds of a shape, while calling `ShapeUtil.bounds` would return the
    cached bounds of a shape. We also had `Editor.getBounds`, which would
    call `ShapeUtil.bounds`. It was confusing. The cached methods like
    `outline` were also marked with "please don't override", which suggested
    the architecture was just wrong.
    
    The only weirdness from this is that utils sometimes reach out to the
    editor for cached versions of data rather than calling their own cached
    methods. It's still an easier story to tell than what we had before.
    
    ### More defaults
    
    We now have three and only three `abstract` methods for a `ShapeUtil`:
    - `getDefaultProps` (renamed from `defaultProps`)
    - `getBounds`,
    - `component`
    -  `indicator`
    
    Previously, we also had `getCenter` as an abstract method, though this
    was usually just the middle of the bounds anyway.
    
    ### Editing bounds
    
    This PR removes the concept of editingBounds. The viewport will no
    longer animate to editing shapes.
    
    ### Active area manager
    
    This PR also removes the active area manager, which was not being used
    in the way we expected it to be.
    
    ### Dpr manager
    
    This PR removes the dpr manager and uses a hook instead to update it
    from React. This is one less runtime browser dependency in the app, one
    less thing to document.
    
    ### Moving things around
    
    This PR also continues to try to organize related methods and properties
    in the editor.
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    
    ### Release Notes
    
    - [editor] renames `defaultProps` to `getDefaultProps`
    - [editor] removes `outline`, `outlineSegments`, `handles`, `bounds`
    - [editor] renames `renderBackground` to `backgroundComponent`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 126f0a2f8..e460fa35e 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,9 +2,10 @@
 
 /** @internal */
 import '@tldraw/polyfills'
-
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 // eslint-disable-next-line local/no-export-star
+export * from '@tldraw/primitives'
+// eslint-disable-next-line local/no-export-star
 export * from '@tldraw/ui'
 export { Tldraw } from './lib/Tldraw'

commit b7d9c8684cb6cf7bd710af5420135ea3516cc3bf
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Jul 17 22:22:34 2023 +0100

    tldraw zero - package shuffle (#1710)
    
    This PR moves code between our packages so that:
    - @tldraw/editor is a ‚Äúcore‚Äù library with the engine and canvas but no
    shapes, tools, or other things
    - @tldraw/tldraw contains everything particular to the experience we‚Äôve
    built for tldraw
    
    At first look, this might seem like a step away from customization and
    configuration, however I believe it greatly increases the configuration
    potential of the @tldraw/editor while also providing a more accurate
    reflection of what configuration options actually exist for
    @tldraw/tldraw.
    
    ## Library changes
    
    @tldraw/editor re-exports its dependencies and @tldraw/tldraw re-exports
    @tldraw/editor.
    
    - users of @tldraw/editor WITHOUT @tldraw/tldraw should almost always
    only import things from @tldraw/editor.
    - users of @tldraw/tldraw should almost always only import things from
    @tldraw/tldraw.
    
    - @tldraw/polyfills is merged into @tldraw/editor
    - @tldraw/indices is merged into @tldraw/editor
    - @tldraw/primitives is merged mostly into @tldraw/editor, partially
    into @tldraw/tldraw
    - @tldraw/file-format is merged into @tldraw/tldraw
    - @tldraw/ui is merged into @tldraw/tldraw
    
    Many (many) utils and other code is moved from the editor to tldraw. For
    example, embeds now are entirely an feature of @tldraw/tldraw. The only
    big chunk of code left in core is related to arrow handling.
    
    ## API Changes
    
    The editor can now be used without tldraw's assets. We load them in
    @tldraw/tldraw instead, so feel free to use whatever fonts or images or
    whatever that you like with the editor.
    
    All tools and shapes (except for the `Group` shape) are moved to
    @tldraw/tldraw. This includes the `select` tool.
    
    You should use the editor with at least one tool, however, so you now
    also need to send in an `initialState` prop to the Editor /
    <TldrawEditor> component indicating which state the editor should begin
    in.
    
    The `components` prop now also accepts `SelectionForeground`.
    
    The complex selection component that we use for tldraw is moved to
    @tldraw/tldraw. The default component is quite basic but can easily be
    replaced via the `components` prop. We pass down our tldraw-flavored
    SelectionFg via `components`.
    
    Likewise with the `Scribble` component: the `DefaultScribble` no longer
    uses our freehand tech and is a simple path instead. We pass down the
    tldraw-flavored scribble via `components`.
    
    The `ExternalContentManager` (`Editor.externalContentManager`) is
    removed and replaced with a mapping of types to handlers.
    
    - Register new content handlers with
    `Editor.registerExternalContentHandler`.
    - Register new asset creation handlers (for files and URLs) with
    `Editor.registerExternalAssetHandler`
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    
    ### Test Plan
    
    - [x] Unit Tests
    - [x] End to end tests
    
    ### Release Notes
    
    - [@tldraw/editor] lots, wip
    - [@tldraw/ui] gone, merged to tldraw/tldraw
    - [@tldraw/polyfills] gone, merged to tldraw/editor
    - [@tldraw/primitives] gone, merged to tldraw/editor / tldraw/tldraw
    - [@tldraw/indices] gone, merged to tldraw/editor
    - [@tldraw/file-format] gone, merged to tldraw/tldraw
    
    ---------
    
    Co-authored-by: alex <alex@dytry.ch>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index e460fa35e..93622b0a7 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,11 +1,131 @@
 /// <reference types="react" />
 
-/** @internal */
-import '@tldraw/polyfills'
+import * as Dialog from './lib/ui/components/primitives/Dialog'
+import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
+
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
-// eslint-disable-next-line local/no-export-star
-export * from '@tldraw/primitives'
-// eslint-disable-next-line local/no-export-star
-export * from '@tldraw/ui'
 export { Tldraw } from './lib/Tldraw'
+export { defaultShapeTools } from './lib/defaultShapeTools'
+export { defaultShapeUtils } from './lib/defaultShapeUtils'
+export { defaultTools } from './lib/defaultTools'
+// UI
+export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/TldrawUi'
+export {
+	TldrawUiContextProvider,
+	type TldrawUiContextProviderProps,
+} from './lib/ui/TldrawUiContextProvider'
+export { setDefaultUiAssetUrls } from './lib/ui/assetUrls'
+export { ContextMenu, type TLUiContextMenuProps } from './lib/ui/components/ContextMenu'
+export { Button, type TLUiButtonProps } from './lib/ui/components/primitives/Button'
+export { Icon, type TLUiIconProps } from './lib/ui/components/primitives/Icon'
+export { Input, type TLUiInputProps } from './lib/ui/components/primitives/Input'
+export {
+	compactMenuItems,
+	findMenuItem,
+	menuCustom,
+	menuGroup,
+	menuItem,
+	menuSubmenu,
+	type TLUiCustomMenuItem,
+	type TLUiMenuChild,
+	type TLUiMenuGroup,
+	type TLUiMenuItem,
+	type TLUiMenuSchema,
+	type TLUiSubMenu,
+} from './lib/ui/hooks/menuHelpers'
+export {
+	useActions,
+	type TLUiActionItem,
+	type TLUiActionsContextType,
+} from './lib/ui/hooks/useActions'
+export {
+	useActionsMenuSchema,
+	type TLUiActionsMenuSchemaContextType,
+} from './lib/ui/hooks/useActionsMenuSchema'
+export { AssetUrlsProvider, useAssetUrls } from './lib/ui/hooks/useAssetUrls'
+export { BreakPointProvider, useBreakpoint } from './lib/ui/hooks/useBreakpoint'
+export { useCanRedo } from './lib/ui/hooks/useCanRedo'
+export { useCanUndo } from './lib/ui/hooks/useCanUndo'
+export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
+export {
+	useContextMenuSchema,
+	type TLUiContextTTLUiMenuSchemaContextType,
+} from './lib/ui/hooks/useContextMenuSchema'
+export { useCopyAs } from './lib/ui/hooks/useCopyAs'
+export {
+	useDialogs,
+	type TLUiDialog,
+	type TLUiDialogProps,
+	type TLUiDialogsContextType,
+} from './lib/ui/hooks/useDialogsProvider'
+export {
+	useEvents,
+	type TLUiEventContextType,
+	type TLUiEventHandler,
+	type TLUiEventSource,
+} from './lib/ui/hooks/useEventsProvider'
+export { useExportAs } from './lib/ui/hooks/useExportAs'
+export {
+	useHelpMenuSchema,
+	type TLUiHelpMenuSchemaContextType,
+} from './lib/ui/hooks/useHelpMenuSchema'
+export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
+export {
+	useKeyboardShortcutsSchema,
+	type TLUiKeyboardShortcutsSchemaContextType,
+	type TLUiKeyboardShortcutsSchemaProviderProps,
+} from './lib/ui/hooks/useKeyboardShortcutsSchema'
+export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
+export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
+export {
+	useMenuSchema,
+	type TLUiMenuSchemaContextType,
+	type TLUiMenuSchemaProviderProps,
+} from './lib/ui/hooks/useMenuSchema'
+export { useReadonly } from './lib/ui/hooks/useReadonly'
+export {
+	useToasts,
+	type TLUiToast,
+	type TLUiToastAction,
+	type TLUiToastsContextType,
+} from './lib/ui/hooks/useToastsProvider'
+export {
+	toolbarItem,
+	useToolbarSchema,
+	type TLUiToolbarItem,
+	type TLUiToolbarSchemaContextType,
+} from './lib/ui/hooks/useToolbarSchema'
+export {
+	useTools,
+	type TLUiToolItem,
+	type TLUiToolsContextType,
+	type TLUiToolsProviderProps,
+} from './lib/ui/hooks/useTools'
+export { type TLUiTranslationKey } from './lib/ui/hooks/useTranslation/TLUiTranslationKey'
+export { type TLUiTranslation } from './lib/ui/hooks/useTranslation/translations'
+export {
+	useTranslation as useTranslation,
+	type TLUiTranslationContextType,
+} from './lib/ui/hooks/useTranslation/useTranslation'
+export { type TLUiIconType } from './lib/ui/icon-types'
+export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
+export {
+	ACCEPTED_IMG_TYPE,
+	getFileMetaData,
+	getImageSizeFromSrc,
+	getVideoSizeFromSrc,
+	isImage,
+} from './lib/utils/assets'
+export { buildFromV1Document, type LegacyTldrawDocument } from './lib/utils/buildFromV1Document'
+export { getEmbedInfo } from './lib/utils/embeds'
+export {
+	TLDRAW_FILE_EXTENSION,
+	parseAndLoadDocument,
+	parseTldrawJsonFile,
+	serializeTldrawJson,
+	serializeTldrawJsonBlob,
+	type TldrawFile,
+} from './lib/utils/file'
+export { truncateStringWithEllipsis } from './lib/utils/text'
+export { Dialog, DropdownMenu }

commit 3e31ef2a7d01467ef92ca4f7aed13ee708db73ef
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Tue Jul 18 22:50:23 2023 +0100

    Remove helpers / extraneous API methods. (#1745)
    
    This PR removes several extraneous computed values from the editor. It
    adds some silly instance state onto the instance state record and
    unifies a few methods which were inconsistent. This is fit and finish
    work üßΩ
    
    ## Computed Values
    
    In general, where once we had a getter and setter for `isBlahMode`,
    which really masked either an `_isBlahMode` atom on the editor or
    `instanceState.isBlahMode`, these are merged into `instanceState`; they
    can be accessed / updated via `editor.instanceState` /
    `editor.updateInstanceState`.
    
    ## tldraw select tool specific things
    
    This PR also removes some tldraw specific state checks and creates new
    component overrides to allow us to include them in tldraw/tldraw.
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    
    ### Test Plan
    
    - [x] Unit Tests
    - [x] End to end tests
    
    ### Release Notes
    
    - [tldraw] rename `useReadonly` to `useReadOnly`
    - [editor] remove `Editor.isDarkMode`
    - [editor] remove `Editor.isChangingStyle`
    - [editor] remove `Editor.isCoarsePointer`
    - [editor] remove `Editor.isDarkMode`
    - [editor] remove `Editor.isFocused`
    - [editor] remove `Editor.isGridMode`
    - [editor] remove `Editor.isPenMode`
    - [editor] remove `Editor.isReadOnly`
    - [editor] remove `Editor.isSnapMode`
    - [editor] remove `Editor.isToolLocked`
    - [editor] remove `Editor.locale`
    - [editor] rename `Editor.pageState` to `Editor.currentPageState`
    - [editor] add `Editor.pageStates`
    - [editor] add `Editor.setErasingIds`
    - [editor] add `Editor.setEditingId`
    - [editor] add several new component overrides

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 93622b0a7..e84dd08fb 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -83,7 +83,7 @@ export {
 	type TLUiMenuSchemaContextType,
 	type TLUiMenuSchemaProviderProps,
 } from './lib/ui/hooks/useMenuSchema'
-export { useReadonly } from './lib/ui/hooks/useReadonly'
+export { useReadOnly } from './lib/ui/hooks/useReadOnly'
 export {
 	useToasts,
 	type TLUiToast,

commit 6309cbe6a5daf261707a99ffbebff76a0aa41324
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed Jul 19 11:50:40 2023 +0100

    move some utils into tldraw/utils (#1750)
    
    This PR moves certain shared utilities (for images, etc.) to
    @tldraw/utils.
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index e84dd08fb..bb9ec47fe 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -110,13 +110,7 @@ export {
 } from './lib/ui/hooks/useTranslation/useTranslation'
 export { type TLUiIconType } from './lib/ui/icon-types'
 export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
-export {
-	ACCEPTED_IMG_TYPE,
-	getFileMetaData,
-	getImageSizeFromSrc,
-	getVideoSizeFromSrc,
-	isImage,
-} from './lib/utils/assets'
+export { ACCEPTED_IMG_TYPE, getFileMetaData, isImage } from './lib/utils/assets'
 export { buildFromV1Document, type LegacyTldrawDocument } from './lib/utils/buildFromV1Document'
 export { getEmbedInfo } from './lib/utils/embeds'
 export {

commit b22ea7cd4e6c27dcebd6615daa07116ecacbf554
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed Jul 19 11:52:21 2023 +0100

    More cleanup, focus bug fixes (#1749)
    
    This PR is another grab bag:
    - renames `readOnly` to `readonly` throughout editor
    - fixes a regression related to focus and keyboard shortcuts
    - adds a small outline for focused editors
    
    ### Change Type
    
    - [x] `major`
    
    ### Test Plan
    
    - [x] End to end tests

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index bb9ec47fe..3d8b01b82 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -83,7 +83,7 @@ export {
 	type TLUiMenuSchemaContextType,
 	type TLUiMenuSchemaProviderProps,
 } from './lib/ui/hooks/useMenuSchema'
-export { useReadOnly } from './lib/ui/hooks/useReadOnly'
+export { useReadonly } from './lib/ui/hooks/useReadonly'
 export {
 	useToasts,
 	type TLUiToast,

commit d750da8f40efda4b011a91962ef8f30c63d1e5da
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Tue Jul 25 17:10:15 2023 +0100

    `ShapeUtil.getGeometry`, selection rewrite (#1751)
    
    This PR is a significant rewrite of our selection / hit testing logic.
    
    It
    - replaces our current geometric helpers (`getBounds`, `getOutline`,
    `hitTestPoint`, and `hitTestLineSegment`) with a new geometry API
    - moves our hit testing entirely to JS using geometry
    - improves selection logic, especially around editing shapes, groups and
    frames
    - fixes many minor selection bugs (e.g. shapes behind frames)
    - removes hit-testing DOM elements from ShapeFill etc.
    - adds many new tests around selection
    - adds new tests around selection
    - makes several superficial changes to surface editor APIs
    
    This PR is hard to evaluate. The `selection-omnibus` test suite is
    intended to describe all of the selection behavior, however all existing
    tests are also either here preserved and passing or (in a few cases
    around editing shapes) are modified to reflect the new behavior.
    
    ## Geometry
    
    All `ShapeUtils` implement `getGeometry`, which returns a single
    geometry primitive (`Geometry2d`). For example:
    
    ```ts
    class BoxyShapeUtil {
      getGeometry(shape: BoxyShape) {
        return new Rectangle2d({
            width: shape.props.width,
            height: shape.props.height,
            isFilled: true,
            margin: shape.props.strokeWidth
          })
        }
    }
    ```
    
    This geometric primitive is used for all bounds calculation, hit
    testing, intersection with arrows, etc.
    
    There are several geometric primitives that extend `Geometry2d`:
    - `Arc2d`
    - `Circle2d`
    - `CubicBezier2d`
    - `CubicSpline2d`
    - `Edge2d`
    - `Ellipse2d`
    - `Group2d`
    - `Polygon2d`
    - `Rectangle2d`
    - `Stadium2d`
    
    For shapes that have more complicated geometric representations, such as
    an arrow with a label, the `Group2d` can accept other primitives as its
    children.
    
    ## Hit testing
    
    Previously, we did all hit testing via events set on shapes and other
    elements. In this PR, I've replaced those hit tests with our own
    calculation for hit tests in JavaScript. This removed the need for many
    DOM elements, such as hit test area borders and fills which only existed
    to trigger pointer events.
    
    ## Selection
    
    We now support selecting "hollow" shapes by clicking inside of them.
    This involves a lot of new logic but it should work intuitively. See
    `Editor.getShapeAtPoint` for the (thoroughly commented) implementation.
    
    ![Kapture 2023-07-23 at 23 27
    27](https://github.com/tldraw/tldraw/assets/23072548/a743275c-acdb-42d9-a3fe-b3e20dce86b6)
    
    every sunset is actually the sun hiding in fear and respect of tldraw's
    quality of interactions
    
    This PR also fixes several bugs with scribble selection, in particular
    around the shift key modifier.
    
    ![Kapture 2023-07-24 at 23 34
    07](https://github.com/tldraw/tldraw/assets/23072548/871d67d0-8d06-42ae-a2b2-021effba37c5)
    
    ...as well as issues with labels and editing.
    
    There are **over 100 new tests** for selection covering groups, frames,
    brushing, scribbling, hovering, and editing. I'll add a few more before
    I feel comfortable merging this PR.
    
    ## Arrow binding
    
    Using the same "hollow shape" logic as selection, arrow binding is
    significantly improved.
    
    ![Kapture 2023-07-22 at 07 46
    25](https://github.com/tldraw/tldraw/assets/23072548/5aa724b3-b57d-4fb7-92d0-80e34246753c)
    
    a thousand wise men could not improve on this
    
    ## Moving focus between editing shapes
    
    Previously, this was handled in the `editing_shapes` state. This is
    moved to `useEditableText`, and should generally be considered an
    advanced implementation detail on a shape-by-shape basis. This addresses
    a bug that I'd never noticed before, but which can be reproduced by
    selecting an shape‚Äîbut not focusing its input‚Äîwhile editing a different
    shape. Previously, the new shape became the editing shape but its input
    did not focus.
    
    ![Kapture 2023-07-23 at 23 19
    09](https://github.com/tldraw/tldraw/assets/23072548/a5e157fb-24a8-42bd-a692-04ce769b1a9c)
    
    In this PR, you can select a shape by clicking on its edge or body, or
    select its input to transfer editing / focus.
    
    ![Kapture 2023-07-23 at 23 22
    21](https://github.com/tldraw/tldraw/assets/23072548/7384e7ea-9777-4e1a-8f63-15de2166a53a)
    
    tldraw, glorious tldraw
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    
    ### Test Plan
    
    1. Erase shapes
    2. Select shapes
    3. Calculate their bounding boxes
    
    - [ ] Unit Tests // todo
    - [ ] End to end tests // todo
    
    ### Release Notes
    
    - [editor] Remove `ShapeUtil.getBounds`, `ShapeUtil.getOutline`,
    `ShapeUtil.hitTestPoint`, `ShapeUtil.hitTestLineSegment`
    - [editor] Add `ShapeUtil.getGeometry`
    - [editor] Add `Editor.getShapeGeometry`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 3d8b01b82..6fdd398ef 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,7 +2,6 @@
 
 import * as Dialog from './lib/ui/components/primitives/Dialog'
 import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
-
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw } from './lib/Tldraw'
@@ -110,6 +109,7 @@ export {
 } from './lib/ui/hooks/useTranslation/useTranslation'
 export { type TLUiIconType } from './lib/ui/icon-types'
 export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
+export { setDefaultEditorAssetUrls } from './lib/utils/assetUrls'
 export { ACCEPTED_IMG_TYPE, getFileMetaData, isImage } from './lib/utils/assets'
 export { buildFromV1Document, type LegacyTldrawDocument } from './lib/utils/buildFromV1Document'
 export { getEmbedInfo } from './lib/utils/embeds'

commit 2e4989255c2741889c21da0085242c82d0df0372
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Jul 28 10:24:58 2023 +0100

    export `UiEventsProvider` (#1774)
    
    This PR exports the `UiEventsProvider` component (and renames
    `useEvents` to `useUiEvents`). It also changes the `useUiEvents` hook to
    work outside of the context. When used outside of the context, the hook
    will no longer throw an error‚Äîthough it will also have no effect.
    
    ### Change Type
    
    - [x] `minor`
    
    ### Release Notes
    
    - [@tldraw/tldraw] export ui events, so that UI hooks can work without
    context

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 6fdd398ef..064d95799 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -59,7 +59,9 @@ export {
 	type TLUiDialogsContextType,
 } from './lib/ui/hooks/useDialogsProvider'
 export {
-	useEvents,
+	UiEventsProvider,
+	useUiEvents,
+	type EventsProviderProps,
 	type TLUiEventContextType,
 	type TLUiEventHandler,
 	type TLUiEventSource,

commit af0f0f8d8b2159c007d5491a054119c722c4f71c
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Jul 28 17:08:59 2023 +0100

    Add shapes to exports (#1776)
    
    This PR adds tldraw's shapes to its exports.
    
    ### Change Type
    
    - [x] `minor`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 064d95799..0a0965f30 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -8,6 +8,23 @@ export { Tldraw } from './lib/Tldraw'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'
+export { ArrowShapeUtil } from './lib/shapes/arrow/ArrowShapeUtil'
+export { BookmarkShapeUtil } from './lib/shapes/bookmark/BookmarkShapeUtil'
+export { DrawShapeUtil } from './lib/shapes/draw/DrawShapeUtil'
+export { EmbedShapeUtil } from './lib/shapes/embed/EmbedShapeUtil'
+export { FrameShapeUtil } from './lib/shapes/frame/FrameShapeUtil'
+export { GeoShapeUtil } from './lib/shapes/geo/GeoShapeUtil'
+export { HighlightShapeUtil } from './lib/shapes/highlight/HighlightShapeUtil'
+export { ImageShapeUtil } from './lib/shapes/image/ImageShapeUtil'
+export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
+export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
+export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
+export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
+export { EraserTool } from './lib/tools/EraserTool/EraserTool'
+export { HandTool } from './lib/tools/HandTool/HandTool'
+export { LaserTool } from './lib/tools/LaserTool/LaserTool'
+export { SelectTool } from './lib/tools/SelectTool/SelectTool'
+export { ZoomTool } from './lib/tools/ZoomTool/ZoomTool'
 // UI
 export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/TldrawUi'
 export {

commit 57fcb3d07b8e54f85777a15d0d931f38ac0b627f
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Aug 25 19:30:09 2023 +0200

    [feature] Asset props (#1824)
    
    This PR adds additional props to the <Tldraw> component for setting the
    maximum asset size, maximum image dimensions, accepted image types, and
    accepted video types. It adds an example for using these properties and
    for uploading image assets.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Test Plan
    
    1. Try (and fail) to upload image types other than the default types.
    2. Try (and fail) to upload images / videos larger than 10mb.
    3. Use the example to customize the properties.
    
    ### Release Notes
    
    - [@tldraw/tldraw] add asset props

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 0a0965f30..69eb7e536 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -129,7 +129,7 @@ export {
 export { type TLUiIconType } from './lib/ui/icon-types'
 export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
 export { setDefaultEditorAssetUrls } from './lib/utils/assetUrls'
-export { ACCEPTED_IMG_TYPE, getFileMetaData, isImage } from './lib/utils/assets'
+export { DEFAULT_ACCEPTED_IMG_TYPE, DEFAULT_ACCEPTED_VID_TYPE } from './lib/utils/assets'
 export { buildFromV1Document, type LegacyTldrawDocument } from './lib/utils/buildFromV1Document'
 export { getEmbedInfo } from './lib/utils/embeds'
 export {

commit 81b8e65741451c107adc84e3e4f0c79a0565a960
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sat Aug 26 10:30:29 2023 +0200

    export asset stuff (#1829)
    
    This PR adds several new exports related to assets.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 69eb7e536..8f19c8ba0 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -129,7 +129,13 @@ export {
 export { type TLUiIconType } from './lib/ui/icon-types'
 export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
 export { setDefaultEditorAssetUrls } from './lib/utils/assetUrls'
-export { DEFAULT_ACCEPTED_IMG_TYPE, DEFAULT_ACCEPTED_VID_TYPE } from './lib/utils/assets'
+export {
+	DEFAULT_ACCEPTED_IMG_TYPE,
+	DEFAULT_ACCEPTED_VID_TYPE,
+	containBoxSize,
+	getResizedImageDataUrl,
+	isGifAnimated,
+} from './lib/utils/assets'
 export { buildFromV1Document, type LegacyTldrawDocument } from './lib/utils/buildFromV1Document'
 export { getEmbedInfo } from './lib/utils/embeds'
 export {

commit edf79e56c0bc30c4e3ab00140d02c7fa319d8066
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sun Oct 8 23:31:16 2023 +0100

    Export tools (#2035)
    
    This PR adds the tldraw tools to its exports.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8f19c8ba0..9eba93ae5 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -8,16 +8,24 @@ export { Tldraw } from './lib/Tldraw'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'
+export { ArrowShapeTool } from './lib/shapes/arrow/ArrowShapeTool'
 export { ArrowShapeUtil } from './lib/shapes/arrow/ArrowShapeUtil'
 export { BookmarkShapeUtil } from './lib/shapes/bookmark/BookmarkShapeUtil'
+export { DrawShapeTool } from './lib/shapes/draw/DrawShapeTool'
 export { DrawShapeUtil } from './lib/shapes/draw/DrawShapeUtil'
 export { EmbedShapeUtil } from './lib/shapes/embed/EmbedShapeUtil'
+export { FrameShapeTool } from './lib/shapes/frame/FrameShapeTool'
 export { FrameShapeUtil } from './lib/shapes/frame/FrameShapeUtil'
+export { GeoShapeTool } from './lib/shapes/geo/GeoShapeTool'
 export { GeoShapeUtil } from './lib/shapes/geo/GeoShapeUtil'
+export { HighlightShapeTool } from './lib/shapes/highlight/HighlightShapeTool'
 export { HighlightShapeUtil } from './lib/shapes/highlight/HighlightShapeUtil'
 export { ImageShapeUtil } from './lib/shapes/image/ImageShapeUtil'
+export { LineShapeTool } from './lib/shapes/line/LineShapeTool'
 export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
+export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
+export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
 export { EraserTool } from './lib/tools/EraserTool/EraserTool'

commit 37f8a7a491a698acb87c1d05c4dbbfcea8352b76
Author: alex <alex@dytry.ch>
Date:   Mon Oct 9 07:02:43 2023 +0100

    Remove topBar prop from <TldrawUi /> (#2018)
    
    This diff removes the UI top center bar from the public API and tweaks
    some of the styling around the top bar as a whole. Now, the left and
    right bars shrink to fit their content, and the center bar is unstyled
    by us. It's also marked `@internal`.
    
    This also exposes `<Spinner />` for internal use.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Test Plan
    
    -
    
    ### Release Notes
    
    - [BREAKING] removed topBar prop

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 9eba93ae5..10fdbc1c9 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -41,6 +41,7 @@ export {
 } from './lib/ui/TldrawUiContextProvider'
 export { setDefaultUiAssetUrls } from './lib/ui/assetUrls'
 export { ContextMenu, type TLUiContextMenuProps } from './lib/ui/components/ContextMenu'
+export { Spinner } from './lib/ui/components/Spinner'
 export { Button, type TLUiButtonProps } from './lib/ui/components/primitives/Button'
 export { Icon, type TLUiIconProps } from './lib/ui/components/primitives/Icon'
 export { Input, type TLUiInputProps } from './lib/ui/components/primitives/Input'

commit aaf810b015ab502e388544c38faae523dfc908cb
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Tue Oct 17 09:32:41 2023 +0100

    Add offline indicator (also to top zone example) (#2083)
    
    This PR adds an offline indicator to the UI package. It's not used in
    the default app but we'll use it on tldraw.com, and it makes sense to
    include it here as it's generally useful.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Test Plan
    
    1. See the zones example.
    
    ### Release Notes
    
    - [@tldraw/tldraw] add offline indicator to ui components

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 10fdbc1c9..78b96c13a 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,7 +1,5 @@
 /// <reference types="react" />
 
-import * as Dialog from './lib/ui/components/primitives/Dialog'
-import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw } from './lib/Tldraw'
@@ -41,6 +39,7 @@ export {
 } from './lib/ui/TldrawUiContextProvider'
 export { setDefaultUiAssetUrls } from './lib/ui/assetUrls'
 export { ContextMenu, type TLUiContextMenuProps } from './lib/ui/components/ContextMenu'
+export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { Spinner } from './lib/ui/components/Spinner'
 export { Button, type TLUiButtonProps } from './lib/ui/components/primitives/Button'
 export { Icon, type TLUiIconProps } from './lib/ui/components/primitives/Icon'
@@ -157,3 +156,5 @@ export {
 } from './lib/utils/file'
 export { truncateStringWithEllipsis } from './lib/utils/text'
 export { Dialog, DropdownMenu }
+import * as Dialog from './lib/ui/components/primitives/Dialog'
+import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'

commit 4ab0a9d35192de79bb286313ee853bbee391520c
Author: alex <alex@dytry.ch>
Date:   Tue Oct 17 14:09:39 2023 +0100

    move imports (#2099)
    
    These got moved in another diff and it broke our build for the dotcom
    app.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 78b96c13a..fa79ed7d3 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,8 @@
 /// <reference types="react" />
 
+import * as Dialog from './lib/ui/components/primitives/Dialog'
+import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
+
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw } from './lib/Tldraw'
@@ -156,5 +159,3 @@ export {
 } from './lib/utils/file'
 export { truncateStringWithEllipsis } from './lib/utils/text'
 export { Dialog, DropdownMenu }
-import * as Dialog from './lib/ui/components/primitives/Dialog'
-import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'

commit 3e78b18f728fa364d980c02514c184e7491dd9c3
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Thu Nov 9 16:46:52 2023 +0000

    Add tldraw component exports (#2188)
    
    This PR adds the default tldraw components to the library's exports.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index fa79ed7d3..8c841e30c 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,11 +1,14 @@
 /// <reference types="react" />
 
-import * as Dialog from './lib/ui/components/primitives/Dialog'
-import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
-
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw } from './lib/Tldraw'
+export { TldrawCropHandles, type TldrawCropHandlesProps } from './lib/canvas/TldrawCropHandles'
+export { TldrawHandles } from './lib/canvas/TldrawHandles'
+export { TldrawHoveredShapeIndicator } from './lib/canvas/TldrawHoveredShapeIndicator'
+export { TldrawScribble } from './lib/canvas/TldrawScribble'
+export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackground'
+export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'
@@ -159,3 +162,5 @@ export {
 } from './lib/utils/file'
 export { truncateStringWithEllipsis } from './lib/utils/text'
 export { Dialog, DropdownMenu }
+import * as Dialog from './lib/ui/components/primitives/Dialog'
+import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'

commit 14e8d19a713fb21c3f976a15cdbdf0dd05167366
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed Nov 15 18:06:02 2023 +0000

    Custom Tools DX + screenshot example (#2198)
    
    This PR adds a custom tool example, the `Screenshot Tool`.
    
    It demonstrates how a user can create a custom tool together with custom
    tool UI.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Test Plan
    
    1. Use the screenshot example
    
    ### Release Notes
    
    - adds ScreenshotTool custom tool example
    - improvements and new exports related to copying and exporting images /
    files
    - loosens up types around icons and translations
    - moving `StateNode.isActive` into an atom
    - adding `Editor.path`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8c841e30c..405ec6849 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,7 +2,7 @@
 
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
-export { Tldraw } from './lib/Tldraw'
+export { Tldraw, type TldrawProps } from './lib/Tldraw'
 export { TldrawCropHandles, type TldrawCropHandlesProps } from './lib/canvas/TldrawCropHandles'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawHoveredShapeIndicator } from './lib/canvas/TldrawHoveredShapeIndicator'
@@ -43,7 +43,7 @@ export {
 	TldrawUiContextProvider,
 	type TldrawUiContextProviderProps,
 } from './lib/ui/TldrawUiContextProvider'
-export { setDefaultUiAssetUrls } from './lib/ui/assetUrls'
+export { setDefaultUiAssetUrls, type TLUiAssetUrlOverrides } from './lib/ui/assetUrls'
 export { ContextMenu, type TLUiContextMenuProps } from './lib/ui/components/ContextMenu'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { Spinner } from './lib/ui/components/Spinner'
@@ -142,16 +142,22 @@ export {
 } from './lib/ui/hooks/useTranslation/useTranslation'
 export { type TLUiIconType } from './lib/ui/icon-types'
 export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
-export { setDefaultEditorAssetUrls } from './lib/utils/assetUrls'
 export {
 	DEFAULT_ACCEPTED_IMG_TYPE,
 	DEFAULT_ACCEPTED_VID_TYPE,
 	containBoxSize,
 	getResizedImageDataUrl,
 	isGifAnimated,
-} from './lib/utils/assets'
-export { buildFromV1Document, type LegacyTldrawDocument } from './lib/utils/buildFromV1Document'
-export { getEmbedInfo } from './lib/utils/embeds'
+} from './lib/utils/assets/assets'
+export { getEmbedInfo } from './lib/utils/embeds/embeds'
+export { copyAs } from './lib/utils/export/copyAs'
+export { exportAs } from './lib/utils/export/exportAs'
+export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'
+export { truncateStringWithEllipsis } from './lib/utils/text/text'
+export {
+	buildFromV1Document,
+	type LegacyTldrawDocument,
+} from './lib/utils/tldr/buildFromV1Document'
 export {
 	TLDRAW_FILE_EXTENSION,
 	parseAndLoadDocument,
@@ -159,8 +165,7 @@ export {
 	serializeTldrawJson,
 	serializeTldrawJsonBlob,
 	type TldrawFile,
-} from './lib/utils/file'
-export { truncateStringWithEllipsis } from './lib/utils/text'
+} from './lib/utils/tldr/file'
 export { Dialog, DropdownMenu }
 import * as Dialog from './lib/ui/components/primitives/Dialog'
 import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'

commit 81f6fae070ada42f6eb7e17af09bea13cc4003ca
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Wed Nov 15 18:40:20 2023 +0000

    Add `getSvgAsImage` to exports. (#2229)
    
    This PR adds `getSvgAsImage` to the package's exports.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 405ec6849..775b77b71 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -151,6 +151,7 @@ export {
 } from './lib/utils/assets/assets'
 export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
+export { getSvgAsImage } from './lib/utils/export/export'
 export { exportAs } from './lib/utils/export/exportAs'
 export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'
 export { truncateStringWithEllipsis } from './lib/utils/text/text'

commit ba4091c59418def43cbc5126ae7027f97a9e4acf
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Fri Nov 17 10:25:57 2023 +0100

    Also export `TLUiEventMap` (#2234)
    
    Export `TLUiEventMap` since other exports depend on it.
    
    Fixes https://github.com/tldraw/tldraw/issues/2227
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix
    - [ ] `minor` ‚Äî New feature
    - [ ] `major` ‚Äî Breaking change
    - [ ] `dependencies` ‚Äî Changes to package dependencies[^1]
    - [ ] `documentation` ‚Äî Changes to the documentation only[^2]
    - [ ] `tests` ‚Äî Changes to any test code only[^2]
    - [ ] `internal` ‚Äî Any other changes that don't affect the published
    package[^2]
    - [ ] I don't know
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    ### Release Notes
    
    - Export `TLUiEventMap` type.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 775b77b71..ffe6fac67 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -95,6 +95,7 @@ export {
 	type EventsProviderProps,
 	type TLUiEventContextType,
 	type TLUiEventHandler,
+	type TLUiEventMap,
 	type TLUiEventSource,
 } from './lib/ui/hooks/useEventsProvider'
 export { useExportAs } from './lib/ui/hooks/useExportAs'

commit 300466f52a3eae2f49186c0ac126337d8ec7c9fd
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Thu Dec 7 13:57:56 2023 +0100

    Add fit to content for frames. (#2275)
    
    Adds Fit to content option for frames. This resizes the frames so that
    the whole content fits. It also adds 50px padding on all sides so that
    the content does not touch the frame's borders.
    
    
    
    https://github.com/tldraw/tldraw/assets/2523721/b2f86e31-7dfb-495f-ac31-f1e0125e0af1
    
    
    
    https://github.com/tldraw/tldraw/assets/2523721/e0a73d25-ac9f-4a35-a1fd-4aed7a5b151c
    
    
    
    Fixes #1407
    
    ### Change Type
    
    - [ ] `patch` ‚Äî Bug fix
    - [x] `minor` ‚Äî New feature
    - [ ] `major` ‚Äî Breaking change
    - [ ] `dependencies` ‚Äî Changes to package dependencies[^1]
    - [ ] `documentation` ‚Äî Changes to the documentation only[^2]
    - [ ] `tests` ‚Äî Changes to any test code only[^2]
    - [ ] `internal` ‚Äî Any other changes that don't affect the published
    package[^2]
    - [ ] I don't know
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    ### Test Plan
    
    1. Add some shapes.
    2. Add a frame that encloses those shapes.
    3. Right click on the frame and choose `Fit to content`
    4. The frame should resize to fit all the children with some padding on
    all sides of the frame.
    
    - [x] Unit Tests
    - [ ] End to end tests
    
    ### Release Notes
    
    - Add Fit to content option to the context menu for frames. This resizes
    the frames to correctly fit all their content.
    
    ---------
    
    Co-authored-by: David Sheldrick <d.j.sheldrick@gmail.com>
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index ffe6fac67..a81f60c7b 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -154,6 +154,7 @@ export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
 export { getSvgAsImage } from './lib/utils/export/export'
 export { exportAs } from './lib/utils/export/exportAs'
+export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'
 export { truncateStringWithEllipsis } from './lib/utils/text/text'
 export {

commit 3c1aee492a4ba6acf10620b70445af291f7dc6b6
Author: alex <alex@dytry.ch>
Date:   Wed Jan 10 14:41:18 2024 +0000

    faster image processing in default asset handler (#2441)
    
    ![Kapture 2024-01-10 at 13 42
    06](https://github.com/tldraw/tldraw/assets/1489520/616bcda7-c05b-46f1-b985-3a36bb5c9476)
    (gif is with 6x CPU throttling to make the effect more visible)
    
    This is the first of a few diffs I'm working on to make dropping images
    onto the canvas feel a lot faster.
    
    There are three main changes here:
    1. We operate on `Blob`s and `File`s rather than data urls. This saves a
    fair bit on converting to/from base64 all the time. I've updated our
    `MediaHelper` APIs to encourage the same in consumers.
    2. We only check the max canvas size (slow) if images are above a
    certain dimension that we consider "safe" (8k x 8k)
    3. Switching from the `downscale` npm library to canvas native
    downscaling. that library claims to give better results than the
    browser, but hasn't been updated in ~7 years. in modern browsers, we can
    opt-in to native high-quality image smoothing to achieve similar results
    much faster than with an algorithm implemented in pure JS.
    
    I want to follow this up with a system to show image placeholders whilst
    we're waiting for long-running operations like resizing etc but i'm
    going to split that out into its own diff as it'll involve some fairly
    complex changes to the history management API.
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    ### Test Plan
    
    1. Tested manually, unit tests & end-to-end tests pass

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index a81f60c7b..de52d3e45 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -147,7 +147,7 @@ export {
 	DEFAULT_ACCEPTED_IMG_TYPE,
 	DEFAULT_ACCEPTED_VID_TYPE,
 	containBoxSize,
-	getResizedImageDataUrl,
+	downsizeImage,
 	isGifAnimated,
 } from './lib/utils/assets/assets'
 export { getEmbedInfo } from './lib/utils/embeds/embeds'

commit c823a44fd4a299f6cb261bfbdf65d5c2b3828a4f
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Wed Feb 7 16:30:29 2024 +0000

    rearrange export / import from tldraw to help builds (#2739)
    
    It seems like if the downstream build using tldraw has a different build
    setup you can run into this issue where it complains that tldraw is
    exporting before importing. Prettier tries to undo this so this
    preserves the order of things.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix
    
    ### Release Notes
    
    - Build: Help with import/export error on some builds.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index de52d3e45..0b3c94c64 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -169,6 +169,10 @@ export {
 	serializeTldrawJsonBlob,
 	type TldrawFile,
 } from './lib/utils/tldr/file'
-export { Dialog, DropdownMenu }
+
 import * as Dialog from './lib/ui/components/primitives/Dialog'
 import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
+
+// N.B. Preserve order of import / export here with this comment.
+// Sometimes this can cause an import problem depending on build setup downstream.
+export { Dialog, DropdownMenu }

commit ac0259a6af0ede496f26041d552119a6e7dce41c
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Thu Feb 15 12:10:09 2024 +0000

    Composable custom UI  (#2796)
    
    This PR refactors our menu systems and provides an interface to hide or
    replace individual user interface elements.
    
    # Background
    
    Previously, we've had two types of overrides:
    - "schema" overrides that would allow insertion or replacement of items
    in the different menus
    - "component" overrides that would replace components in the editor's
    user interface
    
    This PR is an attempt to unify the two and to provide for additional
    cases where the "schema-based" user interface had begun to break down.
    
    # Approach
    
    This PR makes no attempt to change the `actions` or `tools`
    overrides‚Äîthe current system seems to be correct for those because they
    are not reactive. The challenge with the other ui schemas is that they
    _are_ reactive, and thus the overrides both need to a) be fed in from
    outside of the editor as props, and b) react to changes from the editor,
    which is an impossible situation.
    
    The new approach is to use React to declare menu items. (Surprise!)
    
    ```tsx
    function CustomHelpMenuContent() {
            return (
                    <>
                            <DefaultHelpMenuContent />
                            <TldrawUiMenuGroup id="custom stuff">
                                    <TldrawUiMenuItem
                                            id="about"
                                            label="Like my posts"
                                            icon="external-link"
                                            readonlyOk
                                            onSelect={() => {
                                                    window.open('https://x.com/tldraw', '_blank')
                                            }}
                                    />
                            </TldrawUiMenuGroup>
                    </>
            )
    }
    
    const components: TLComponents = {
            HelpMenuContent: CustomHelpMenuContent,
    }
    
    export default function CustomHelpMenuContentExample() {
            return (
                    <div className="tldraw__editor">
                            <Tldraw components={components} />
                    </div>
            )
    }
    ```
    
    We use a `components` prop with the combined editor and ui components.
    
    - [ ] Create a "layout" component?
    - [ ] Make UI components more isolated? If possible, they shouldn't
    depend on styles outside of themselves, so that they can be used in
    other layouts. Maybe we wait on this because I'm feeling a slippery
    slope toward presumptions about configurability.
    - [ ] OTOH maybe we go hard and consider these things as separate
    components, even packages, with their own interfaces for customizability
    / configurability, just go all the way with it, and see what that looks
    like.
    
    # Pros
    
    Top line: you can customize tldraw's user interface in a MUCH more
    granular / powerful way than before.
    
    It solves a case where menu items could not be made stateful from
    outside of the editor context, and provides the option to do things in
    the menus that we couldn't allow previously with the "schema-based"
    approach.
    
    It also may (who knows) be more performant because we can locate the
    state inside of the components for individual buttons and groups,
    instead of all at the top level above the "schema". Because items /
    groups decide their own state, we don't have to have big checks on how
    many items are selected, or whether we have a flippable state. Items and
    groups themselves are allowed to re-build as part of the regular React
    lifecycle. Menus aren't constantly being rebuilt, if that were ever an
    issue.
    
    Menu items can be shared between different menu types. We'll are
    sometimes able to re-use items between, for example, the menu and the
    context menu and the actions menu.
    
    Our overrides no longer mutate anything, so there's less weird searching
    and finding.
    
    # Cons
    
    This approach can make customization menu contents significantly more
    complex, as an end user would need to re-declare most of a menu in order
    to make any change to it. Luckily a user can add things to the top or
    bottom of the context menu fairly easily. (And who knows, folks may
    actually want to do deep customization, and this allows for it.)
    
    It's more code. We are shipping more react components, basically one for
    each menu item / group.
    
    Currently this PR does not export the subcomponents, i.e. menu items. If
    we do want to export these, then heaven help us, it's going to be a
    _lot_ of exports.
    
    # Progress
    
    - [x] Context menu
    - [x] Main menu
    - [x] Zoom menu
    - [x] Help menu
    - [x] Actions menu
    - [x] Keyboard shortcuts menu
    - [x] Quick actions in main menu? (new)
    - [x] Helper buttons? (new)
    - [x] Debug Menu
    
    And potentially
    - [x] Toolbar
    - [x] Style menu
    - [ ] Share zone
    - [x] Navigation zone
    - [ ] Other zones
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    
    ### Test Plan
    
    1. use the context menu
    2. use the custom context menu example
    3. use cursor chat in the context menu
    
    - [x] Unit Tests
    - [ ] End to end tests
    
    ### Release Notes
    
    - Add a brief release note for your PR here.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 0b3c94c64..480d28eb0 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -39,56 +39,29 @@ export { SelectTool } from './lib/tools/SelectTool/SelectTool'
 export { ZoomTool } from './lib/tools/ZoomTool/ZoomTool'
 // UI
 export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/TldrawUi'
-export {
-	TldrawUiContextProvider,
-	type TldrawUiContextProviderProps,
-} from './lib/ui/TldrawUiContextProvider'
 export { setDefaultUiAssetUrls, type TLUiAssetUrlOverrides } from './lib/ui/assetUrls'
-export { ContextMenu, type TLUiContextMenuProps } from './lib/ui/components/ContextMenu'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { Spinner } from './lib/ui/components/Spinner'
 export { Button, type TLUiButtonProps } from './lib/ui/components/primitives/Button'
 export { Icon, type TLUiIconProps } from './lib/ui/components/primitives/Icon'
 export { Input, type TLUiInputProps } from './lib/ui/components/primitives/Input'
 export {
-	compactMenuItems,
-	findMenuItem,
-	menuCustom,
-	menuGroup,
-	menuItem,
-	menuSubmenu,
-	type TLUiCustomMenuItem,
-	type TLUiMenuChild,
-	type TLUiMenuGroup,
-	type TLUiMenuItem,
-	type TLUiMenuSchema,
-	type TLUiSubMenu,
-} from './lib/ui/hooks/menuHelpers'
+	TldrawUiContextProvider,
+	type TldrawUiContextProviderProps,
+} from './lib/ui/context/TldrawUiContextProvider'
 export {
 	useActions,
 	type TLUiActionItem,
 	type TLUiActionsContextType,
-} from './lib/ui/hooks/useActions'
-export {
-	useActionsMenuSchema,
-	type TLUiActionsMenuSchemaContextType,
-} from './lib/ui/hooks/useActionsMenuSchema'
-export { AssetUrlsProvider, useAssetUrls } from './lib/ui/hooks/useAssetUrls'
-export { BreakPointProvider, useBreakpoint } from './lib/ui/hooks/useBreakpoint'
-export { useCanRedo } from './lib/ui/hooks/useCanRedo'
-export { useCanUndo } from './lib/ui/hooks/useCanUndo'
-export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
-export {
-	useContextMenuSchema,
-	type TLUiContextTTLUiMenuSchemaContextType,
-} from './lib/ui/hooks/useContextMenuSchema'
-export { useCopyAs } from './lib/ui/hooks/useCopyAs'
+} from './lib/ui/context/actions'
+export { AssetUrlsProvider, useAssetUrls } from './lib/ui/context/asset-urls'
+export { BreakPointProvider, useBreakpoint } from './lib/ui/context/breakpoints'
 export {
 	useDialogs,
 	type TLUiDialog,
 	type TLUiDialogProps,
 	type TLUiDialogsContextType,
-} from './lib/ui/hooks/useDialogsProvider'
+} from './lib/ui/context/dialogs'
 export {
 	UiEventsProvider,
 	useUiEvents,
@@ -97,32 +70,20 @@ export {
 	type TLUiEventHandler,
 	type TLUiEventMap,
 	type TLUiEventSource,
-} from './lib/ui/hooks/useEventsProvider'
-export { useExportAs } from './lib/ui/hooks/useExportAs'
-export {
-	useHelpMenuSchema,
-	type TLUiHelpMenuSchemaContextType,
-} from './lib/ui/hooks/useHelpMenuSchema'
-export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
-export {
-	useKeyboardShortcutsSchema,
-	type TLUiKeyboardShortcutsSchemaContextType,
-	type TLUiKeyboardShortcutsSchemaProviderProps,
-} from './lib/ui/hooks/useKeyboardShortcutsSchema'
-export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
-export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
-export {
-	useMenuSchema,
-	type TLUiMenuSchemaContextType,
-	type TLUiMenuSchemaProviderProps,
-} from './lib/ui/hooks/useMenuSchema'
-export { useReadonly } from './lib/ui/hooks/useReadonly'
+} from './lib/ui/context/events'
 export {
 	useToasts,
 	type TLUiToast,
 	type TLUiToastAction,
 	type TLUiToastsContextType,
-} from './lib/ui/hooks/useToastsProvider'
+} from './lib/ui/context/toasts'
+export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
+export { useCopyAs } from './lib/ui/hooks/useCopyAs'
+export { useExportAs } from './lib/ui/hooks/useExportAs'
+export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
+export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
+export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
+export { useReadonly } from './lib/ui/hooks/useReadonly'
 export {
 	toolbarItem,
 	useToolbarSchema,
@@ -170,9 +131,150 @@ export {
 	type TldrawFile,
 } from './lib/utils/tldr/file'
 
-import * as Dialog from './lib/ui/components/primitives/Dialog'
-import * as DropdownMenu from './lib/ui/components/primitives/DropdownMenu'
+// Minimap default component
+export { DefaultMinimap } from './lib/ui/components/Minimap/DefaultMinimap'
+
+// Helper to unwrap label from action items
+export { unwrapLabel } from './lib/ui/context/actions'
 
-// N.B. Preserve order of import / export here with this comment.
-// Sometimes this can cause an import problem depending on build setup downstream.
-export { Dialog, DropdownMenu }
+// General UI components for building menus
+export {
+	TldrawUiMenuCheckboxItem,
+	type TLUiMenuCheckboxItemProps,
+} from './lib/ui/components/menus/TldrawUiMenuCheckboxItem'
+export {
+	TldrawUiMenuContextProvider,
+	type TLUiMenuContextProviderProps,
+} from './lib/ui/components/menus/TldrawUiMenuContext'
+export {
+	TldrawUiMenuGroup,
+	type TLUiMenuGroupProps,
+} from './lib/ui/components/menus/TldrawUiMenuGroup'
+export {
+	TldrawUiMenuItem,
+	type TLUiMenuItemProps,
+} from './lib/ui/components/menus/TldrawUiMenuItem'
+export {
+	TldrawUiMenuSubmenu,
+	type TLUiMenuSubmenuProps,
+} from './lib/ui/components/menus/TldrawUiMenuSubmenu'
+
+export {
+	TldrawUiComponentsProvider,
+	useTldrawUiComponents,
+	type TLUiComponents,
+} from './lib/ui/context/components'
+
+// Menus / UI elements that can be customized
+export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
+
+export {
+	DefaultStylePanel,
+	type TLUiStylePanelProps,
+} from './lib/ui/components/StylePanel/DefaultStylePanel'
+export {
+	DefaultStylePanelContent,
+	type TLUiStylePanelContentProps,
+} from './lib/ui/components/StylePanel/DefaultStylePanelContent'
+
+export {
+	DefaultActionsMenu,
+	type TLUiActionsMenuProps,
+} from './lib/ui/components/ActionsMenu/DefaultActionsMenu'
+export { DefaultActionsMenuContent } from './lib/ui/components/ActionsMenu/DefaultActionsMenuContent'
+
+export {
+	DefaultContextMenu as ContextMenu,
+	DefaultContextMenu,
+	type TLUiContextMenuProps,
+} from './lib/ui/components/ContextMenu/DefaultContextMenu'
+export { DefaultContextMenuContent } from './lib/ui/components/ContextMenu/DefaultContextMenuContent'
+
+export {
+	DefaultHelpMenu,
+	type TLUiHelpMenuProps,
+} from './lib/ui/components/HelpMenu/DefaultHelpMenu'
+export { DefaultHelpMenuContent } from './lib/ui/components/HelpMenu/DefaultHelpMenuContent'
+
+export {
+	DefaultMainMenu,
+	type TLUiMainMenuProps,
+} from './lib/ui/components/MainMenu/DefaultMainMenu'
+export { DefaultMainMenuContent } from './lib/ui/components/MainMenu/DefaultMainMenuContent'
+
+export {
+	DefaultQuickActions,
+	type TLUiQuickActionsProps,
+} from './lib/ui/components/QuickActions/DefaultQuickActions'
+export { DefaultQuickActionsContent } from './lib/ui/components/QuickActions/DefaultQuickActionsContent'
+
+export {
+	DefaultZoomMenu,
+	type TLUiZoomMenuProps,
+} from './lib/ui/components/ZoomMenu/DefaultZoomMenu'
+export { DefaultZoomMenuContent } from './lib/ui/components/ZoomMenu/DefaultZoomMenuContent'
+
+export {
+	DefaultHelperButtons,
+	type TLUiHelperButtonsProps,
+} from './lib/ui/components/HelperButtons/DefaultHelperButtons'
+export { DefaultHelperButtonsContent } from './lib/ui/components/HelperButtons/DefaultHelperButtonsContent'
+
+export {
+	DefaultKeyboardShortcutsDialog,
+	type TLUiKeyboardShortcutsDialogProps,
+} from './lib/ui/components/KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialog'
+export { DefaultKeyboardShortcutsDialogContent } from './lib/ui/components/KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialogContent'
+
+export {
+	DefaultDebugMenu,
+	type TLUiDebugMenuProps,
+} from './lib/ui/components/DebugMenu/DefaultDebugMenu'
+export { DefaultDebugMenuContent } from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
+
+export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
+
+export { type TLComponents } from './lib/Tldraw'
+
+export {
+	DialogBody,
+	DialogCloseButton,
+	DialogFooter,
+	DialogHeader,
+	DialogTitle,
+	type TLUiDialogBodyProps,
+	type TLUiDialogFooterProps,
+	type TLUiDialogHeaderProps,
+	type TLUiDialogTitleProps,
+} from './lib/ui/components/primitives/Dialog'
+
+export {
+	DropdownMenuCheckboxItem,
+	DropdownMenuContent,
+	DropdownMenuGroup,
+	DropdownMenuIndicator,
+	DropdownMenuItem,
+	DropdownMenuRadioItem,
+	DropdownMenuRoot,
+	DropdownMenuSub,
+	DropdownMenuSubTrigger,
+	DropdownMenuTrigger,
+	type TLUiDropdownMenuCheckboxItemProps,
+	type TLUiDropdownMenuContentProps,
+	type TLUiDropdownMenuGroupProps,
+	type TLUiDropdownMenuItemProps,
+	type TLUiDropdownMenuRadioItemProps,
+	type TLUiDropdownMenuRootProps,
+	type TLUiDropdownMenuSubProps,
+	type TLUiDropdownMenuSubTriggerProps,
+	type TLUiDropdownMenuTriggerProps,
+} from './lib/ui/components/primitives/DropdownMenu'
+
+export {
+	Popover,
+	PopoverContent,
+	PopoverTrigger,
+	type TLUiPopoverContentProps,
+	type TLUiPopoverProps,
+	type TLUiPopoverTriggerProps,
+} from './lib/ui/components/primitives/Popover'

commit 7ece89a3577c82a4f8c1e690bf8ca1b557f1a283
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Feb 16 09:13:04 2024 +0000

    UI components round two (#2847)
    
    This PR:
    - replaces the `shareZone` prop with `SharePanel` component
    - replaces the `topZone` prop with `TopPanel` components
    - replaces the `Button` component with `TldrawUiButton` and
    subcomponents
    - adds `TldrawUi` prefix to our primitives
    - fixes a couple of bugs with the components
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 480d28eb0..df6b9044e 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -42,9 +42,6 @@ export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/T
 export { setDefaultUiAssetUrls, type TLUiAssetUrlOverrides } from './lib/ui/assetUrls'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { Spinner } from './lib/ui/components/Spinner'
-export { Button, type TLUiButtonProps } from './lib/ui/components/primitives/Button'
-export { Icon, type TLUiIconProps } from './lib/ui/components/primitives/Icon'
-export { Input, type TLUiInputProps } from './lib/ui/components/primitives/Input'
 export {
 	TldrawUiContextProvider,
 	type TldrawUiContextProviderProps,
@@ -99,7 +96,7 @@ export {
 export { type TLUiTranslationKey } from './lib/ui/hooks/useTranslation/TLUiTranslationKey'
 export { type TLUiTranslation } from './lib/ui/hooks/useTranslation/translations'
 export {
-	useTranslation as useTranslation,
+	useTranslation,
 	type TLUiTranslationContextType,
 } from './lib/ui/hooks/useTranslation/useTranslation'
 export { type TLUiIconType } from './lib/ui/icon-types'
@@ -137,35 +134,13 @@ export { DefaultMinimap } from './lib/ui/components/Minimap/DefaultMinimap'
 // Helper to unwrap label from action items
 export { unwrapLabel } from './lib/ui/context/actions'
 
-// General UI components for building menus
-export {
-	TldrawUiMenuCheckboxItem,
-	type TLUiMenuCheckboxItemProps,
-} from './lib/ui/components/menus/TldrawUiMenuCheckboxItem'
-export {
-	TldrawUiMenuContextProvider,
-	type TLUiMenuContextProviderProps,
-} from './lib/ui/components/menus/TldrawUiMenuContext'
-export {
-	TldrawUiMenuGroup,
-	type TLUiMenuGroupProps,
-} from './lib/ui/components/menus/TldrawUiMenuGroup'
-export {
-	TldrawUiMenuItem,
-	type TLUiMenuItemProps,
-} from './lib/ui/components/menus/TldrawUiMenuItem'
-export {
-	TldrawUiMenuSubmenu,
-	type TLUiMenuSubmenuProps,
-} from './lib/ui/components/menus/TldrawUiMenuSubmenu'
-
 export {
 	TldrawUiComponentsProvider,
 	useTldrawUiComponents,
 	type TLUiComponents,
+	type TLUiComponentsProviderProps,
 } from './lib/ui/context/components'
 
-// Menus / UI elements that can be customized
 export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
 
 export {
@@ -236,45 +211,108 @@ export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
 
 export { type TLComponents } from './lib/Tldraw'
 
+/* ------------------- Primitives ------------------- */
+
+// Button
 export {
-	DialogBody,
-	DialogCloseButton,
-	DialogFooter,
-	DialogHeader,
-	DialogTitle,
+	TldrawUiButton,
+	type TLUiButtonProps,
+} from './lib/ui/components/primitives/Button/TldrawUiButton'
+export {
+	TldrawUiButtonCheck,
+	type TLUiButtonCheckProps,
+} from './lib/ui/components/primitives/Button/TldrawUiButtonCheck'
+export {
+	TldrawUiButtonIcon,
+	type TLUiButtonIconProps,
+} from './lib/ui/components/primitives/Button/TldrawUiButtonIcon'
+export {
+	TldrawUiButtonLabel,
+	type TLUiButtonLabelProps,
+} from './lib/ui/components/primitives/Button/TldrawUiButtonLabel'
+
+// Button picker
+export {
+	TldrawUiButtonPicker,
+	type TLUiButtonPickerProps,
+} from './lib/ui/components/primitives/TldrawUiButtonPicker'
+
+// Dialog
+export {
+	TldrawUiDialogBody,
+	TldrawUiDialogCloseButton,
+	TldrawUiDialogFooter,
+	TldrawUiDialogHeader,
+	TldrawUiDialogTitle,
 	type TLUiDialogBodyProps,
 	type TLUiDialogFooterProps,
 	type TLUiDialogHeaderProps,
 	type TLUiDialogTitleProps,
-} from './lib/ui/components/primitives/Dialog'
+} from './lib/ui/components/primitives/TldrawUiDialog'
 
+// Dropdown Menu
 export {
-	DropdownMenuCheckboxItem,
-	DropdownMenuContent,
-	DropdownMenuGroup,
-	DropdownMenuIndicator,
-	DropdownMenuItem,
-	DropdownMenuRadioItem,
-	DropdownMenuRoot,
-	DropdownMenuSub,
-	DropdownMenuSubTrigger,
-	DropdownMenuTrigger,
+	TldrawUiDropdownMenuCheckboxItem,
+	TldrawUiDropdownMenuContent,
+	TldrawUiDropdownMenuGroup,
+	TldrawUiDropdownMenuIndicator,
+	TldrawUiDropdownMenuItem,
+	TldrawUiDropdownMenuRoot,
+	TldrawUiDropdownMenuSub,
+	TldrawUiDropdownMenuSubTrigger,
+	TldrawUiDropdownMenuTrigger,
 	type TLUiDropdownMenuCheckboxItemProps,
 	type TLUiDropdownMenuContentProps,
 	type TLUiDropdownMenuGroupProps,
 	type TLUiDropdownMenuItemProps,
-	type TLUiDropdownMenuRadioItemProps,
 	type TLUiDropdownMenuRootProps,
 	type TLUiDropdownMenuSubProps,
 	type TLUiDropdownMenuSubTriggerProps,
 	type TLUiDropdownMenuTriggerProps,
-} from './lib/ui/components/primitives/DropdownMenu'
+} from './lib/ui/components/primitives/TldrawUiDropdownMenu'
+
+// Icon
+export { TldrawUiIcon, type TLUiIconProps } from './lib/ui/components/primitives/TldrawUiIcon'
+
+// Input
+export { TldrawUiInput, type TLUiInputProps } from './lib/ui/components/primitives/TldrawUiInput'
 
+// Kbd
+export { TldrawUiKbd, type TLUiKbdProps } from './lib/ui/components/primitives/TldrawUiKbd'
+
+// Popover
 export {
-	Popover,
-	PopoverContent,
-	PopoverTrigger,
+	TldrawUiPopover,
+	TldrawUiPopoverContent,
+	TldrawUiPopoverTrigger,
 	type TLUiPopoverContentProps,
 	type TLUiPopoverProps,
 	type TLUiPopoverTriggerProps,
-} from './lib/ui/components/primitives/Popover'
+} from './lib/ui/components/primitives/TldrawUiPopover'
+
+// Slider
+export { TldrawUiSlider, type TLUiSliderProps } from './lib/ui/components/primitives/TldrawUiSlider'
+
+/* ----------------- Menu Primitives ---------------- */
+
+// General UI components for building menus
+export {
+	TldrawUiMenuCheckboxItem,
+	type TLUiMenuCheckboxItemProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuCheckboxItem'
+export {
+	TldrawUiMenuContextProvider,
+	type TLUiMenuContextProviderProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuContext'
+export {
+	TldrawUiMenuGroup,
+	type TLUiMenuGroupProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuGroup'
+export {
+	TldrawUiMenuItem,
+	type TLUiMenuItemProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuItem'
+export {
+	TldrawUiMenuSubmenu,
+	type TLUiMenuSubmenuProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuSubmenu'

commit 212eb88480bd66b5b2930768e1594f814b8da150
Author: Lu Wilson <l2wilson94@gmail.com>
Date:   Fri Feb 16 13:54:48 2024 +0000

    Add component for viewing an image of a snapshot  (#2804)
    
    This PR adds the `TldrawImage` component that displays a tldraw snapshot
    as an SVG image.
    
    ![2024-02-15 at 12 29 52 - Coral
    Cod](https://github.com/tldraw/tldraw/assets/15892272/14140e9e-7d6d-4dd3-88a3-86a6786325c5)
    
    ## Why
    
    We've seen requests for this kind of thing from users. eg: GitBook, and
    on discord:
    
    <img width="710" alt="image"
    src="https://github.com/tldraw/tldraw/assets/15892272/3d3a3e9d-66b9-42e7-81de-a70aa7165bdc">
    
    The component provides a way to do that.
    This PR also untangles various bits of editor state from image
    exporting, which makes it easier for library users to export images more
    agnostically. (ie: they can now export any shapes on any page in any
    theme. previously, they had to change the user's state to do that).
    
    ## What else
    
    - This PR also adds an **Image snapshot** example to demonstrate the new
    component.
    - We now pass an `isDarkMode` property to the `toSvg` method (inside the
    `ctx` argument). This means that `toSvg` doesn't have to rely on editor
    state anymore. I updated all our `toSvg` methods to use it.
    - See code comments for more info.
    
    ## Any issues?
    
    When you toggle to editing mode in the new example, text measurements
    are initially wrong (until you edit the size of a text shape). Click on
    the text shape to see how its indicator is wrong. Not sure why this is,
    or if it's even related. Does it ring a bell with anyone? If not, I'll
    take a closer look. (fixed, see comments --steve)
    
    ## Future work
    
    Now that we've untangled image exporting from editor state, we could
    expose some more helpful helpers for making this easier.
    
    Fixes tld-2122
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    ### Test Plan
    
    1. Open the **Image snapshot** example.
    2. Try editing the image, saving the image, and making sure the image
    updates.
    
    - [ ] Unit Tests
    - [ ] End to end tests
    
    ### Release Notes
    
    - Dev: Added the `TldrawImage` component.
    
    ---------
    
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index df6b9044e..9fd8a1b36 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -3,6 +3,7 @@
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw, type TldrawProps } from './lib/Tldraw'
+export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
 export { TldrawCropHandles, type TldrawCropHandlesProps } from './lib/canvas/TldrawCropHandles'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawHoveredShapeIndicator } from './lib/canvas/TldrawHoveredShapeIndicator'
@@ -110,7 +111,7 @@ export {
 } from './lib/utils/assets/assets'
 export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
-export { getSvgAsImage } from './lib/utils/export/export'
+export { getSvgAsImage, getSvgAsString } from './lib/utils/export/export'
 export { exportAs } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'

commit 9fc5f4459f674b121cc177f8ae99efa9fdb442c8
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Feb 19 14:52:43 2024 +0000

    Roundup fixes (#2862)
    
    This one is a roundup of superficial changes, apologies for having them
    in a single PR.
    
    This PR:
    - does some chair re-arranging for one of our hotter paths related to
    updating shapes
    - changes our type exports for editor components
    - adds shape indicator to editor components
    - moves canvas to be an editor component
    - fixes a CSS bug with hinted buttons
    - fixes CSS bugs with the menus
    - fixes bad imports in examples
    
    ### Change Type
    
    - [x] `major`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 9fd8a1b36..9f6ed3d75 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -4,7 +4,6 @@
 export * from '@tldraw/editor'
 export { Tldraw, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
-export { TldrawCropHandles, type TldrawCropHandlesProps } from './lib/canvas/TldrawCropHandles'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawHoveredShapeIndicator } from './lib/canvas/TldrawHoveredShapeIndicator'
 export { TldrawScribble } from './lib/canvas/TldrawScribble'
@@ -82,6 +81,7 @@ export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
 export { useReadonly } from './lib/ui/hooks/useReadonly'
+export { useRelevantStyles } from './lib/ui/hooks/useRevelantStyles'
 export {
 	toolbarItem,
 	useToolbarSchema,

commit 3e12b27728c59276bb67773a23bfb0c13c1520fc
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Tue Feb 20 15:09:45 2024 +0000

    Fix 'style panel doesn't always disappear if you switch to the hand/laser tools' (#2886)
    
    We had some bad logic in `useRelevantStyles` explicitly allowing an
    opacity-slider to be rendered at all times when there is at least one
    shape selected.
    
    This shouldn't be the case when the editor is in non-shape-focused tools
    like the move tool and the laser pointer tool. I refactored the hook
    slightly to make it easier to express the correct logic. See the comment
    for a more detailed description.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix
    
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    
    ### Release Notes
    
    - Fixes an bug causing the opacity slider to show up in the move tool
    and laser pointer tool.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 9f6ed3d75..23b780c91 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -81,7 +81,7 @@ export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
 export { useReadonly } from './lib/ui/hooks/useReadonly'
-export { useRelevantStyles } from './lib/ui/hooks/useRevelantStyles'
+export { useRelevantStyles } from './lib/ui/hooks/useRelevantStyles'
 export {
 	toolbarItem,
 	useToolbarSchema,

commit e3ed84f1ff3a64a8ae461f95df18346bbb4856c9
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Thu Feb 22 19:25:08 2024 +0000

    Export history hooks (#2926)
    
    This PR restores `useCanUndo` and `useCanRedo` to exports from tldraw.
    
    ### Change Type
    
    - [ ] `patch` ‚Äî Bug fix
    - [x] `minor` ‚Äî New feature
    - [ ] `major` ‚Äî Breaking change
    - [ ] `dependencies` ‚Äî Changes to package dependencies[^1]
    - [ ] `documentation` ‚Äî Changes to the documentation only[^2]
    - [ ] `tests` ‚Äî Changes to any test code only[^2]
    - [ ] `internal` ‚Äî Any other changes that don't affect the published
    package[^2]
    - [ ] I don't know

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 23b780c91..33834f4fe 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,7 @@
 /// <reference types="react" />
 
+export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
+
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw, type TldrawProps } from './lib/Tldraw'

commit 521d84a61154eff064b8a5733db8b686dbf34499
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Feb 23 13:58:06 2024 +0000

    Add custom static assets example, extract preloadFont (#2932)
    
    This PR adds a custom static assets example.
    
    It also:
    - extracts preloadFont into a async function to make custom preloading
    easier
    - accounts for file-based formats
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Test Plan
    
    1. Test the example.
    
    ### Release Notes
    
    - Docs, added custom static assets example.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 33834f4fe..8b43fe2ed 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,7 @@
 /// <reference types="react" />
 
+export { preloadFont } from './lib/utils/assets/preload-font'
+
 export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
 
 // eslint-disable-next-line local/no-export-star

commit fb852459db10382bf3a67b624d542bf827f57d20
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Mon Feb 26 15:01:56 2024 +0000

    menu: rework File menu / ensure Export menu is present (#2783)
    
    <img width="428" alt="Screenshot 2024-02-16 at 16 46 28"
    src="https://github.com/tldraw/tldraw/assets/469604/334cd0db-d9d5-4993-8012-c6985173edfb">
    
    
    - re-orders to be the normative New / Open / Save order ‚Äî we shouldn't
    be messing with this conventional ordering
    - removes the "Don't ask again" from New/Open dialogs because they're
    non-undoable and not what _anybody_ should ever select. we shouldn't
    offer users a loaded footgun! :P
    - makes File menu be part of the default menu ‚Äî it's presence is
    glaringly missing for regular development
    - along with that, make the pieces of that menu available as lego pieces
    to use - it can't just be `DefaultMainMenuContent`, all or nothing,
    forcing downstream users to import everything from scratch
    - finally, adds the Export menu as initially intended by this PR!
    
    @steveruizok let's discuss if you have some notes on this and we can
    talk about the shape of things here.
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix
    
    ### Release Notes
    
    - Composable UI: makes File items be more granularly accessible / usable
    - Menu: show Export under the File menu.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8b43fe2ed..728673d3a 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -180,7 +180,15 @@ export {
 	DefaultMainMenu,
 	type TLUiMainMenuProps,
 } from './lib/ui/components/MainMenu/DefaultMainMenu'
-export { DefaultMainMenuContent } from './lib/ui/components/MainMenu/DefaultMainMenuContent'
+export {
+	DefaultMainMenuContent,
+	EditSubmenu,
+	ExportFileContentSubMenu,
+	ExtrasGroup,
+	ObjectSubmenu,
+	PreferencesGroup,
+	ViewSubmenu,
+} from './lib/ui/components/MainMenu/DefaultMainMenuContent'
 
 export {
 	DefaultQuickActions,

commit 2a8ae6188e5013ef9192a068a984f0fdfcce6a69
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Tue Feb 27 12:48:20 2024 +0000

    menu: export followup with different semantics for file menu (#2968)
    
    Renamed Object ‚Üí Shape
    Different semantics for Export under file menu. Thanks @TodePond !
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 728673d3a..e53de35d8 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -185,8 +185,8 @@ export {
 	EditSubmenu,
 	ExportFileContentSubMenu,
 	ExtrasGroup,
-	ObjectSubmenu,
 	PreferencesGroup,
+	ShapeSubmenu,
 	ViewSubmenu,
 } from './lib/ui/components/MainMenu/DefaultMainMenuContent'
 

commit e6513215b561014b08ceef6af8115fbdea1337c6
Author: Taha <98838967+Taha-Hassan-Git@users.noreply.github.com>
Date:   Tue Feb 27 15:36:35 2024 +0000

    export default ui items (#2973)
    
    This PR exports all the components within each of the default menu
    content components. Should make it easier to customise the default UI.
    
    
    - [x] `minor` ‚Äî New feature
    
    
    ### Release Notes
    
    - Components within default menu content components are now exported.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index e53de35d8..21582ebe4 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -147,13 +147,21 @@ export {
 } from './lib/ui/context/components'
 
 export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
+export { PageItemInput } from './lib/ui/components/PageMenu/PageItemInput'
+export { PageItemSubmenu } from './lib/ui/components/PageMenu/PageItemSubmenu'
 
 export {
 	DefaultStylePanel,
 	type TLUiStylePanelProps,
 } from './lib/ui/components/StylePanel/DefaultStylePanel'
 export {
+	ArrowheadStylePickerSet,
+	CommonStylePickerSet,
 	DefaultStylePanelContent,
+	GeoStylePickerSet,
+	OpacitySlider,
+	SplineStylePickerSet,
+	TextStylePickerSet,
 	type TLUiStylePanelContentProps,
 } from './lib/ui/components/StylePanel/DefaultStylePanelContent'
 
@@ -161,7 +169,16 @@ export {
 	DefaultActionsMenu,
 	type TLUiActionsMenuProps,
 } from './lib/ui/components/ActionsMenu/DefaultActionsMenu'
-export { DefaultActionsMenuContent } from './lib/ui/components/ActionsMenu/DefaultActionsMenuContent'
+export {
+	AlignMenuItems,
+	DefaultActionsMenuContent,
+	DistributeMenuItems,
+	GroupOrUngroupMenuItem,
+	ReorderMenuItems,
+	RotateCWMenuItem,
+	StackMenuItems,
+	ZoomOrRotateMenuItem,
+} from './lib/ui/components/ActionsMenu/DefaultActionsMenuContent'
 
 export {
 	DefaultContextMenu as ContextMenu,
@@ -174,7 +191,47 @@ export {
 	DefaultHelpMenu,
 	type TLUiHelpMenuProps,
 } from './lib/ui/components/HelpMenu/DefaultHelpMenu'
-export { DefaultHelpMenuContent } from './lib/ui/components/HelpMenu/DefaultHelpMenuContent'
+export {
+	DefaultHelpMenuContent,
+	KeyboardShortcutsMenuItem,
+} from './lib/ui/components/HelpMenu/DefaultHelpMenuContent'
+export { LanguageMenu } from './lib/ui/components/LanguageMenu'
+
+export {
+	ArrangeMenuSubmenu,
+	ClipboardMenuGroup,
+	ConversionsMenuGroup,
+	CopyMenuItem,
+	CutMenuItem,
+	DeleteMenuItem,
+	DuplicateMenuItem,
+	EditLinkMenuItem,
+	EmbedsGroup,
+	FitFrameToContentMenuItem,
+	GroupMenuItem,
+	MoveToPageMenu,
+	PasteMenuItem,
+	PrintItem,
+	RemoveFrameMenuItem,
+	ReorderMenuSubmenu,
+	SetSelectionGroup,
+	ToggleAutoSizeMenuItem,
+	ToggleDarkModeItem,
+	ToggleDebugModeItem,
+	ToggleEdgeScrollingItem,
+	ToggleFocusModeItem,
+	ToggleGridItem,
+	ToggleLockMenuItem,
+	ToggleReduceMotionItem,
+	ToggleSnapModeItem,
+	ToggleToolLockItem,
+	ToggleTransparentBgMenuItem,
+	UngroupMenuItem,
+	UnlockAllMenuItem,
+	ZoomTo100MenuItem,
+	ZoomToFitMenuItem,
+	ZoomToSelectionMenuItem,
+} from './lib/ui/components/menu-items'
 
 export {
 	DefaultMainMenu,
@@ -185,8 +242,12 @@ export {
 	EditSubmenu,
 	ExportFileContentSubMenu,
 	ExtrasGroup,
+	LockGroup,
+	MiscMenuGroup,
+	MultiShapeMenuGroup,
 	PreferencesGroup,
 	ShapeSubmenu,
+	UndoRedoGroup,
 	ViewSubmenu,
 } from './lib/ui/components/MainMenu/DefaultMainMenuContent'
 
@@ -218,7 +279,12 @@ export {
 	DefaultDebugMenu,
 	type TLUiDebugMenuProps,
 } from './lib/ui/components/DebugMenu/DefaultDebugMenu'
-export { DefaultDebugMenuContent } from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
+export {
+	DebugFlags,
+	DefaultDebugMenuContent,
+	ExampleDialog,
+	FeatureFlags,
+} from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
 
 export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
 

commit 22af179983ff22e1a5576030e2fdfb18e038a9a7
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Wed Feb 28 11:26:30 2024 +0000

    Make exportToBlob public (#2983)
    
    Solves #2939
    
    Also converts to named arguments to make it easier to add arguments in
    the future. We should be doing this everywhere from now on.
    
    ### Change Type
    
    
    - [x] `minor` ‚Äî New feature
    
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    ### Release Notes
    
    - Exposes the exportToBlob function for library users

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 21582ebe4..0e6ea21a3 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -115,7 +115,7 @@ export {
 } from './lib/utils/assets/assets'
 export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
-export { getSvgAsImage, getSvgAsString } from './lib/utils/export/export'
+export { exportToBlob, getSvgAsImage, getSvgAsString } from './lib/utils/export/export'
 export { exportAs } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'

commit 4f07e696e8aef003ada35551dcd00c2fc8b4f8dc
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Thu Feb 29 11:45:02 2024 +0000

    [feature] wrap mode (#2938)
    
    By default, tldraw's brushing mode will select when the box intersects
    an shape's geometry. A user can hold Command / Ctrl to require that the
    selection box fully contain a shape's bounds instead.
    
    Some people really prefer the opposite. Three years! Three years I've
    been saying "no no no".
    
    This PR adds a user preference to flip the logic. When `isWrapMode` is
    true, selection requires that the box completely contain a shape before
    it's added to the list of selecting shapes; and ctrl flips back to
    intersection instead.
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Test Plan
    
    1. Turn on wrap mode in the user preferences menu.
    2. Select stuff.
    3. Use the ctrl key to except the behavior back to intersection.
    
    - [x] Unit Tests
    
    ### Release Notes
    
    - Added `isWrapMode` to user preferences.
    - Added Wrap Mode toggle to user preferences menu.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 0e6ea21a3..740bf2072 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -226,6 +226,7 @@ export {
 	ToggleSnapModeItem,
 	ToggleToolLockItem,
 	ToggleTransparentBgMenuItem,
+	ToggleWrapModeItem,
 	UngroupMenuItem,
 	UnlockAllMenuItem,
 	ZoomTo100MenuItem,

commit 60cc0dcce34357f9a38256a933f7e2b47a801f5d
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Mar 11 18:31:28 2024 +0000

    Menu updates / fix flip / add export / remove Shape menu (#3115)
    
    This PR:
    - adds the export all menu items to the main menu
    - removes the export all menu items from the dotcom menus
    - removes the shape menu and reverts several changes from
    https://github.com/tldraw/tldraw/pull/2782. This was not properly
    reviewed (I thought it was a PR about hiding / showing menu items).
    - fixes a bug with exporting (exporting JSON was not working when the
    user had no selected shapes)
    - fixes a bug that would prevent "flip shapes" from appearing in the
    menu
    - prevents export / copy actions from running if there are no shapes on
    the page
    - allows export / copy actions to default to all shapes on the page if
    no shapes are selected
    
    These changes have not been released in the dotcom yet. There's will be
    some thrash in the APIs.
    
    # Menu philosophy
    
    In the menu, the **edit** submenu relates to undo/redo, plus the user's
    current selection.
    
    Menu items that relate to specific to certain shapes are hidden when not
    available.
    
    Menu items that relate to all shapes are disabled when not available.
    
    <img width="640" alt="image"
    src="https://github.com/tldraw/tldraw/assets/23072548/e467e6bb-d958-4a9a-ac19-1dada52dcfa6">
    
    ### Change Type
    
    - [x] `major` ‚Äî Bug fix
    
    ### Test
    
    - Select no shapes (arrange / flip should not be visible)
    - Select one geo shape (arrange / flip should not be visible)
    - Select two geo shapes (arrange / flip should be visible)
    - Select one draw shape (arrange / flip should not be visible)
    
    ### Release Notes
    
    - Revert some changes in the menu.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 740bf2072..806e186ad 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -201,12 +201,14 @@ export {
 	ArrangeMenuSubmenu,
 	ClipboardMenuGroup,
 	ConversionsMenuGroup,
+	ConvertToBookmarkMenuItem,
+	ConvertToEmbedMenuItem,
+	CopyAsMenuGroup,
 	CopyMenuItem,
 	CutMenuItem,
 	DeleteMenuItem,
 	DuplicateMenuItem,
 	EditLinkMenuItem,
-	EmbedsGroup,
 	FitFrameToContentMenuItem,
 	GroupMenuItem,
 	MoveToPageMenu,
@@ -214,7 +216,7 @@ export {
 	PrintItem,
 	RemoveFrameMenuItem,
 	ReorderMenuSubmenu,
-	SetSelectionGroup,
+	SelectAllMenuItem,
 	ToggleAutoSizeMenuItem,
 	ToggleDarkModeItem,
 	ToggleDebugModeItem,
@@ -243,11 +245,8 @@ export {
 	EditSubmenu,
 	ExportFileContentSubMenu,
 	ExtrasGroup,
-	LockGroup,
 	MiscMenuGroup,
-	MultiShapeMenuGroup,
 	PreferencesGroup,
-	ShapeSubmenu,
 	UndoRedoGroup,
 	ViewSubmenu,
 } from './lib/ui/components/MainMenu/DefaultMainMenuContent'

commit adebb680e5ebe913b3e8a40e3a796d57b9ffd799
Author: alex <alex@dytry.ch>
Date:   Tue Mar 12 16:14:28 2024 +0000

    Component-based toolbar customisation API (#3067)
    
    When we went from overrides-based to component based UI customisation
    APIs, we didn't do the toolbar because it had some significant extra
    complexity around overflowing the contents of the menu into the
    dropdown. This is really hard to do at render-time with react - you
    can't introspect what a component will return to move some of it into an
    overflow.
    
    Instead, this diff runs that logic in a `useLayoutEffect` - we render
    all the items into both the main toolbar and the overflow menu, then in
    the effect (or if the rendered components change) we use CSS to remove
    the items we don't need, check which was last active, etc. Originally, I
    wasn't really into this approach - but i've actually found it to work
    super well and be very reliable.
    
    ### Change Type
    
    - [x] `major` ‚Äî Breaking change
    - [ ] `dependencies` ‚Äî Changes to package dependencies[^1]
    - [ ] `documentation` ‚Äî Changes to the documentation only[^2]
    - [ ] `tests` ‚Äî Changes to any test code only[^2]
    - [ ] `internal` ‚Äî Any other changes that don't affect the published
    package[^2]
    - [ ] I don't know
    
    [^1]: publishes a `patch` release, for devDependencies use `internal`
    [^2]: will not publish a new version
    
    ### Test Plan
    
    1. Test the toolbar at many different sizes with many different 'active
    tools'
    
    ---------
    
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 806e186ad..4b838d967 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -86,12 +86,6 @@ export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
 export { useReadonly } from './lib/ui/hooks/useReadonly'
 export { useRelevantStyles } from './lib/ui/hooks/useRelevantStyles'
-export {
-	toolbarItem,
-	useToolbarSchema,
-	type TLUiToolbarItem,
-	type TLUiToolbarSchemaContextType,
-} from './lib/ui/hooks/useToolbarSchema'
 export {
 	useTools,
 	type TLUiToolItem,
@@ -286,8 +280,6 @@ export {
 	FeatureFlags,
 } from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
 
-export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
-
 export { type TLComponents } from './lib/Tldraw'
 
 /* ------------------- Primitives ------------------- */
@@ -372,6 +364,41 @@ export {
 // Slider
 export { TldrawUiSlider, type TLUiSliderProps } from './lib/ui/components/primitives/TldrawUiSlider'
 
+// Toolbar
+export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
+export {
+	ArrowDownToolbarItem,
+	ArrowLeftToolbarItem,
+	ArrowRightToolbarItem,
+	ArrowToolbarItem,
+	ArrowUpToolbarItem,
+	AssetToolbarItem,
+	CheckBoxToolbarItem,
+	CloudToolbarItem,
+	DefaultToolbarContent,
+	DiamondToolbarItem,
+	DrawToolbarItem,
+	EllipseToolbarItem,
+	EraserToolbarItem,
+	FrameToolbarItem,
+	HandToolbarItem,
+	HexagonToolbarItem,
+	HighlightToolbarItem,
+	LaserToolbarItem,
+	LineToolbarItem,
+	NoteToolbarItem,
+	OvalToolbarItem,
+	RectangleToolbarItem,
+	RhombusToolbarItem,
+	SelectToolbarItem,
+	StarToolbarItem,
+	TextToolbarItem,
+	TrapezoidToolbarItem,
+	TriangleToolbarItem,
+	XBoxToolbarItem,
+	useIsToolSelected,
+} from './lib/ui/components/Toolbar/DefaultToolbarContent'
+
 /* ----------------- Menu Primitives ---------------- */
 
 // General UI components for building menus

commit 05f58f7c2a16ba3860471f8188beba930567c818
Author: alex <alex@dytry.ch>
Date:   Mon Mar 25 14:16:55 2024 +0000

    React-powered SVG exports (#3117)
    
    ## Migration path
    1. If any of your shapes implement `toSvg` for exports, you'll need to
    replace your implementation with a new version that returns JSX (it's a
    react component) instead of manually constructing SVG DOM nodes
    2. `editor.getSvg` is deprecated. It still works, but will be going away
    in a future release. If you still need SVGs as DOM elements rather than
    strings, use `new DOMParser().parseFromString(svgString,
    'image/svg+xml').firstElementChild`
    
    ## The change in detail
    At the moment, our SVG exports very carefully try to recreate the
    visuals of our shapes by manually constructing SVG DOM nodes. On its own
    this is really painful, but it also results in a lot of duplicated logic
    between the `component` and `getSvg` methods of shape utils.
    
    In #3020, we looked at using string concatenation & DOMParser to make
    this a bit less painful. This works, but requires specifying namespaces
    everywhere, is still pretty painful (no syntax highlighting or
    formatting), and still results in all that duplicated logic.
    
    I briefly experimented with creating my own version of the javascript
    language that let you embed XML like syntax directly. I was going to
    call it EXTREME JAVASCRIPT or XJS for short, but then I noticed that we
    already wrote the whole of tldraw in this thing called react and a (imo
    much worse named) version of the javascript xml thing already existed.
    
    Given the entire library already depends on react, what would it look
    like if we just used react directly for these exports? Turns out things
    get a lot simpler! Take a look at lmk what you think
    
    This diff was intended as a proof of concept, but is actually pretty
    close to being landable. The main thing is that here, I've deliberately
    leant into this being a big breaking change to see just how much code we
    could delete (turns out: lots). We could if we wanted to make this
    without making it a breaking change at all, but it would add back a lot
    of complexity on our side and run a fair bit slower
    
    ---------
    
    Co-authored-by: huppy-bot[bot] <128400622+huppy-bot[bot]@users.noreply.github.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 4b838d967..4154a07f7 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -109,7 +109,7 @@ export {
 } from './lib/utils/assets/assets'
 export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
-export { exportToBlob, getSvgAsImage, getSvgAsString } from './lib/utils/export/export'
+export { exportToBlob, getSvgAsImage } from './lib/utils/export/export'
 export { exportAs } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'

commit d76d53db95146c24d35caeca41c2f6d348dbcc06
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Wed Mar 27 09:33:48 2024 +0000

    textfields [1 of 3]: add text into speech bubble; also add rich text example (#3050)
    
    This is the first of three textfield changes. This starts with making
    the speech bubble actually have text. Also, it creates a TipTap example
    and how that would be wired up.
    
    üéµ this is dangerous, I walk through textfields so watch your head rock üéµ
    
    ### Change Type
    
    - [x] `minor` ‚Äî New feature
    
    ### Release Notes
    
    - Refactor textfields be composable/swappable.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 4154a07f7..eb954b308 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -33,6 +33,7 @@ export { LineShapeTool } from './lib/shapes/line/LineShapeTool'
 export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
+export { TextLabel } from './lib/shapes/shared/TextLabel'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
@@ -42,6 +43,7 @@ export { LaserTool } from './lib/tools/LaserTool/LaserTool'
 export { SelectTool } from './lib/tools/SelectTool/SelectTool'
 export { ZoomTool } from './lib/tools/ZoomTool/ZoomTool'
 // UI
+export { useEditableText } from './lib/shapes/shared/useEditableText'
 export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/TldrawUi'
 export { setDefaultUiAssetUrls, type TLUiAssetUrlOverrides } from './lib/ui/assetUrls'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
@@ -422,3 +424,11 @@ export {
 	TldrawUiMenuSubmenu,
 	type TLUiMenuSubmenuProps,
 } from './lib/ui/components/primitives/menus/TldrawUiMenuSubmenu'
+
+/* ----------------- Constants ---------------- */
+
+export {
+	FONT_FAMILIES,
+	LABEL_FONT_SIZES,
+	TEXT_PROPS,
+} from './lib/shapes/shared/default-shape-constants'

commit 6def201da2927847ef81c25bfcdaadf7b0b51b18
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Wed Mar 27 09:41:13 2024 +0000

    ui: make toasts look more toasty (#2988)
    
    <img width="449" alt="Screenshot 2024-03-11 at 14 03 44"
    src="https://github.com/tldraw/tldraw/assets/469604/5b00dafc-abf1-44a3-b6c6-1d16db74b1be">
    
    
    ### Change Type
    
    - [x] `patch` ‚Äî Bug fix
    
    ### Release Notes
    
    - UI: Add severity to toasts.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index eb954b308..b1b6431bd 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -76,6 +76,7 @@ export {
 } from './lib/ui/context/events'
 export {
 	useToasts,
+	type AlertSeverity,
 	type TLUiToast,
 	type TLUiToastAction,
 	type TLUiToastsContextType,

commit 3ceebc82f8adeba922f2feafbd38e5eed2822445
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sat Apr 13 14:30:30 2024 +0100

    Faster selection / erasing (#3454)
    
    This PR makes a small improvement to the way we measure distances.
    (Often we measure distances multiple times per frame per shape on the
    screen). In many cases, we compare a minimum distance. This makes those
    checks faster by avoiding a square root.
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `improvement` ‚Äî Improving existing features
    
    ### Release Notes
    
    - Improve performance of minimum distance checks.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b1b6431bd..03d8cecdd 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -9,7 +9,6 @@ export * from '@tldraw/editor'
 export { Tldraw, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'
-export { TldrawHoveredShapeIndicator } from './lib/canvas/TldrawHoveredShapeIndicator'
 export { TldrawScribble } from './lib/canvas/TldrawScribble'
 export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackground'
 export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'

commit 41601ac61ec7d4fad715bd67a9df077ee1576a7b
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sun Apr 14 19:40:02 2024 +0100

    Stickies: release candidate (#3249)
    
    This PR is the target for the stickies PRs that are moving forward. It
    should collect changes.
    
    - [x] New icon
    - [x] Improved shadows
    - [x] Shadow LOD
    - [x] New colors / theme options
    - [x] Shrink text size to avoid word breaks on the x axis
    - [x] Hide indicator whilst typing (reverted)
    - [x] Adjacent note positions
      - [x] buttons / clone handles
      - [x] position helpers for creating / translating (pits)
    - [x] keyboard shortcuts: (Tab, Shift+tab (RTL aware), Cmd-Enter,
    Shift+Cmd+enter)
      - [x] multiple shape translating
    - [x] Text editing
      - [x] Edit on type (feature flagged)
      - [x] click goes in correct place
    - [x] Notes as parents (reverted)
    - [x] Update colors
    - [x] Update SVG appearance
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `feature` ‚Äî New feature
    
    ### Test Plan
    
    Todo: fold in test plans for child PRs
    
    ### Unit tests:
    
    - [ ] Shrink text size to avoid word breaks on the x axis
    - [x] Adjacent notes
      - [x] buttons (clone handles)
      - [x] position helpers (pits)
    - [x] keyboard shortcuts: (Tab, Shift+tab (RTL aware), Cmd-Enter,
    Shift+Cmd+enter)
    - [ ] Text editing
      - [ ] Edit on type
      - [ ] click goes in correct place
    
    ### Release Notes
    
    - Improves sticky notes (see list)
    
    ---------
    
    Signed-off-by: dependabot[bot] <support@github.com>
    Co-authored-by: Mime ƒåuvalo <mimecuvalo@gmail.com>
    Co-authored-by: alex <alex@dytry.ch>
    Co-authored-by: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
    Co-authored-by: dependabot[bot] <49699333+dependabot[bot]@users.noreply.github.com>
    Co-authored-by: github-actions[bot] <github-actions[bot]@users.noreply.github.com>
    Co-authored-by: Lu[ke] Wilson <l2wilson94@gmail.com>
    Co-authored-by: huppy-bot[bot] <128400622+huppy-bot[bot]@users.noreply.github.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 03d8cecdd..cc2a98d15 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -40,6 +40,7 @@ export { EraserTool } from './lib/tools/EraserTool/EraserTool'
 export { HandTool } from './lib/tools/HandTool/HandTool'
 export { LaserTool } from './lib/tools/LaserTool/LaserTool'
 export { SelectTool } from './lib/tools/SelectTool/SelectTool'
+export { getOccludedChildren, kickoutOccludedShapes } from './lib/tools/SelectTool/selectHelpers'
 export { ZoomTool } from './lib/tools/ZoomTool/ZoomTool'
 // UI
 export { useEditableText } from './lib/shapes/shared/useEditableText'
@@ -97,6 +98,7 @@ export {
 export { type TLUiTranslationKey } from './lib/ui/hooks/useTranslation/TLUiTranslationKey'
 export { type TLUiTranslation } from './lib/ui/hooks/useTranslation/translations'
 export {
+	useCurrentTranslation,
 	useTranslation,
 	type TLUiTranslationContextType,
 } from './lib/ui/hooks/useTranslation/useTranslation'

commit cce794e04be380e6839ecfaad29730786172d423
Author: alex <alex@dytry.ch>
Date:   Mon Apr 22 11:32:22 2024 +0100

    Expose `usePreloadAssets` (#3545)
    
    Expose `usePreloadAssets` and make sure the exploded/sublibraries
    examples uses it. Before this change, fonts weren't loaded correctly for
    the exploded example.
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [x] `bugfix` ‚Äî Bug fix

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index cc2a98d15..6f37098e5 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -87,6 +87,7 @@ export { useExportAs } from './lib/ui/hooks/useExportAs'
 export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
+export { usePreloadAssets } from './lib/ui/hooks/usePreloadAssets'
 export { useReadonly } from './lib/ui/hooks/useReadonly'
 export { useRelevantStyles } from './lib/ui/hooks/useRelevantStyles'
 export {

commit bfc8b6a9014fb0e7e84561bb685a3e6d73c61414
Author: alex <alex@dytry.ch>
Date:   Wed Apr 24 15:36:08 2024 +0100

    fix migration exports (#3586)
    
    We're missing the export for `createShapePropsMigrationIds`, so lets add
    it. This also fixes some other bits that were used in examples but not
    exported properly from tldraw.
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `bugfix` ‚Äî Bug fix
    
    ### Release Notes
    
    - Expose `createShapePropsMigrationIds`, `defaultEditorAssetUrls`,
    `PORTRAIT_BREAKPOINT`, `useDefaultColorTheme`, & `getPerfectDashProps`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 6f37098e5..03e5643ab 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -32,7 +32,9 @@ export { LineShapeTool } from './lib/shapes/line/LineShapeTool'
 export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
+export { useDefaultColorTheme } from './lib/shapes/shared/ShapeFill'
 export { TextLabel } from './lib/shapes/shared/TextLabel'
+export { getPerfectDashProps } from './lib/shapes/shared/getPerfectDashProps'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
@@ -48,6 +50,7 @@ export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/T
 export { setDefaultUiAssetUrls, type TLUiAssetUrlOverrides } from './lib/ui/assetUrls'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { Spinner } from './lib/ui/components/Spinner'
+export { PORTRAIT_BREAKPOINT } from './lib/ui/constants'
 export {
 	TldrawUiContextProvider,
 	type TldrawUiContextProviderProps,
@@ -115,9 +118,12 @@ export {
 export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
 export { exportToBlob, getSvgAsImage } from './lib/utils/export/export'
-export { exportAs } from './lib/utils/export/exportAs'
+export { exportAs, type TLExportType } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
-export { setDefaultEditorAssetUrls } from './lib/utils/static-assets/assetUrls'
+export {
+	defaultEditorAssetUrls,
+	setDefaultEditorAssetUrls,
+} from './lib/utils/static-assets/assetUrls'
 export { truncateStringWithEllipsis } from './lib/utils/text/text'
 export {
 	buildFromV1Document,

commit da35f2bd75e43fd48d11a9a74f60ee01c84a41d1
Author: alex <alex@dytry.ch>
Date:   Wed May 8 13:37:31 2024 +0100

    Bindings (#3326)
    
    First draft of the new bindings API. We'll follow this up with some API
    refinements, tests, documentation, and examples.
    
    Bindings are a new record type for establishing relationships between
    two shapes so they can update at the same time.
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `feature` ‚Äî New feature
    
    ### Release Notes
    
    #### Breaking changes
    - The `start` and `end` properties on `TLArrowShape` no longer have
    `type: point | binding`. Instead, they're always a point, which may be
    out of date if a binding exists. To check for & retrieve arrow bindings,
    use `getArrowBindings(editor, shape)` instead.
    - `getArrowTerminalsInArrowSpace` must be passed a `TLArrowBindings` as
    a third argument: `getArrowTerminalsInArrowSpace(editor, shape,
    getArrowBindings(editor, shape))`
    - The following types have been renamed:
        - `ShapeProps` -> `RecordProps`
        - `ShapePropsType` -> `RecordPropsType`
        - `TLShapePropsMigrations` -> `TLPropsMigrations`
        - `SchemaShapeInfo` -> `SchemaPropsInfo`
    
    ---------
    
    Co-authored-by: David Sheldrick <d.j.sheldrick@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 03e5643ab..821f3d40d 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -12,6 +12,7 @@ export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawScribble } from './lib/canvas/TldrawScribble'
 export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackground'
 export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'
+export { defaultBindingUtils } from './lib/defaultBindingUtils'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'

commit 91903c97614f3645dcbdcf6986fd5e4ca3dd95dc
Author: alex <alex@dytry.ch>
Date:   Thu May 9 10:48:01 2024 +0100

    Move arrow helpers from editor to tldraw (#3721)
    
    With the new work on bindings, we no longer need to keep any arrows
    stuff hard-coded in `editor`, so let's move it to `tldraw` with the rest
    of the shapes.
    
    Couple other changes as part of this:
    - We had two different types of `WeakMap` backed cache, but we now only
    have one
    - There's a new free-standing version of `createComputedCache` that
    doesn't need access to the editor/store in order to create the cache.
    instead, it returns a `{get(editor, id)}` object and instantiates the
    cache on a per-editor basis for each call.
    - Fixed a bug in `createSelectedComputedCache` where the selector
    derivation would get re-created on every call to `get`
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `improvement` ‚Äî Improving existing features
    
    ### Release Notes
    
    #### Breaking changes
    - `editor.getArrowInfo(shape)` has been replaced with
    `getArrowInfo(editor, shape)`
    - `editor.getArrowsBoundTo(shape)` has been removed. Instead, use
    `editor.getBindingsToShape(shape, 'arrow')` and follow the `fromId` of
    each binding to the corresponding arrow shape
    - These types have moved from `@tldraw/editor` to `tldraw`:
        - `TLArcInfo`
        - `TLArrowInfo`
        - `TLArrowPoint`
    - `WeakMapCache` has been removed

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 821f3d40d..c54422b70 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -18,6 +18,12 @@ export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'
 export { ArrowShapeTool } from './lib/shapes/arrow/ArrowShapeTool'
 export { ArrowShapeUtil } from './lib/shapes/arrow/ArrowShapeUtil'
+export { type TLArcInfo, type TLArrowInfo, type TLArrowPoint } from './lib/shapes/arrow/arrow-types'
+export {
+	getArrowBindings,
+	getArrowTerminalsInArrowSpace,
+	type TLArrowBindings,
+} from './lib/shapes/arrow/shared'
 export { BookmarkShapeUtil } from './lib/shapes/bookmark/BookmarkShapeUtil'
 export { DrawShapeTool } from './lib/shapes/draw/DrawShapeTool'
 export { DrawShapeUtil } from './lib/shapes/draw/DrawShapeUtil'

commit d2d3e582e5c71bb15a710ed890270db728971ba6
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Mon May 13 09:29:43 2024 +0100

    assets: rework mime-type detection to be consistent/centralized; add support for webp/webm, apng, avif (#3730)
    
    As I started working on image LOD stuff and wrapping my head around the
    codebase, this was bothering me.
    - there are missing popular types, especially WebP
    - there are places where we're copy/pasting the same list of types but
    they can get out-of-date with each other (also, one place described
    supporting webm but we didn't actually do that)
    
    This adds animated apng/avif detection as well (alongside our animated
    gif detection). Furthermore, it moves the gif logic to be alongside the
    png logic (they were in separate packages unnecessarily)
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [ ] `feature` ‚Äî New feature
    - [x] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Release Notes
    
    - Images: unify list of acceptable types and expand to include webp,
    webm, apng, avif

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index c54422b70..72524d59f 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -115,13 +115,7 @@ export {
 } from './lib/ui/hooks/useTranslation/useTranslation'
 export { type TLUiIconType } from './lib/ui/icon-types'
 export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
-export {
-	DEFAULT_ACCEPTED_IMG_TYPE,
-	DEFAULT_ACCEPTED_VID_TYPE,
-	containBoxSize,
-	downsizeImage,
-	isGifAnimated,
-} from './lib/utils/assets/assets'
+export { containBoxSize, downsizeImage } from './lib/utils/assets/assets'
 export { getEmbedInfo } from './lib/utils/embeds/embeds'
 export { copyAs } from './lib/utils/export/copyAs'
 export { exportToBlob, getSvgAsImage } from './lib/utils/export/export'

commit 979e5d79794258deeb5899a7d4c4f622a5a8832d
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Fri May 17 15:41:39 2024 +0100

    export DefaultNavigationPanel (#3772)
    
    closes #3756
    
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [x] `bugfix` ‚Äî Bug fix
    - [ ] `feature` ‚Äî New feature
    - [ ] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Test Plan
    
    1. Add a step-by-step description of how to test your PR here.
    2.
    
    - [ ] Unit Tests
    - [ ] End to end tests
    
    ### Release Notes
    
    - Add a brief release note for your PR here.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 72524d59f..b0b50a468 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -156,6 +156,8 @@ export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
 export { PageItemInput } from './lib/ui/components/PageMenu/PageItemInput'
 export { PageItemSubmenu } from './lib/ui/components/PageMenu/PageItemSubmenu'
 
+export { DefaultNavigationPanel } from './lib/ui/components/NavigationPanel/DefaultNavigationPanel'
+
 export {
 	DefaultStylePanel,
 	type TLUiStylePanelProps,

commit ef44d71ee2a83bb3d6d61cac7717c4254941019d
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri May 24 14:04:28 2024 +0100

    Add heart geo shape (#3787)
    
    This PR adds a heart geo shape. ‚ù§Ô∏è
    
    It also:
    - adds `toSvgPathData` to geometry2d
    - uses geometry2d in places where previously we recalculated things like
    perimeter of ellipse
    - flattens geo shape util components
    
    - [x] Calculate the path length for the DashStyleHeart
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `feature` ‚Äî New feature
    
    ### Release Notes
    
    - Adds a heart shape to the geo shape set.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b0b50a468..8db7bcab1 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -407,6 +407,7 @@ export {
 	SelectToolbarItem,
 	StarToolbarItem,
 	TextToolbarItem,
+	ToolbarItem,
 	TrapezoidToolbarItem,
 	TriangleToolbarItem,
 	XBoxToolbarItem,

commit fb0dd1d2fe7d974dfa194264b4c3f196469cba97
Author: alex <alex@dytry.ch>
Date:   Mon Jun 10 14:50:03 2024 +0100

    make sure everything marked @public gets documented (#3892)
    
    Previously, we had the `ae-forgotten-export` rule from api-extractor
    disabled. This rule makes sure that everything that's referred to in the
    public API is actually exported. There are more details on the rule
    [here](https://api-extractor.com/pages/messages/ae-forgotten-export/),
    but not exporting public API entires is bad because they're hard to
    document and can't be typed/called from consumer code. For us, the big
    effect is that they don't appear in our docs at all.
    
    This diff re-enables that rule. Now, if you introduce something new to
    the public API but don't export it, your build will fail.
    
    ### Change Type
    
    - [x] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [x] `improvement` ‚Äî Improving existing features

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8db7bcab1..3ee5f24b0 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,18 +1,16 @@
 /// <reference types="react" />
 
-export { preloadFont } from './lib/utils/assets/preload-font'
-
-export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
-
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
-export { Tldraw, type TldrawProps } from './lib/Tldraw'
+
+export { Tldraw, type TLComponents, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawScribble } from './lib/canvas/TldrawScribble'
 export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackground'
 export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'
 export { defaultBindingUtils } from './lib/defaultBindingUtils'
+export { type TLExternalContentProps } from './lib/defaultExternalContentHandlers'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'
@@ -40,139 +38,30 @@ export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
 export { useDefaultColorTheme } from './lib/shapes/shared/ShapeFill'
-export { TextLabel } from './lib/shapes/shared/TextLabel'
+export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
+export {
+	FONT_FAMILIES,
+	LABEL_FONT_SIZES,
+	TEXT_PROPS,
+} from './lib/shapes/shared/default-shape-constants'
 export { getPerfectDashProps } from './lib/shapes/shared/getPerfectDashProps'
+export { useEditableText } from './lib/shapes/shared/useEditableText'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
+export { type StyleValuesForUi } from './lib/styles'
 export { EraserTool } from './lib/tools/EraserTool/EraserTool'
 export { HandTool } from './lib/tools/HandTool/HandTool'
 export { LaserTool } from './lib/tools/LaserTool/LaserTool'
 export { SelectTool } from './lib/tools/SelectTool/SelectTool'
 export { getOccludedChildren, kickoutOccludedShapes } from './lib/tools/SelectTool/selectHelpers'
 export { ZoomTool } from './lib/tools/ZoomTool/ZoomTool'
-// UI
-export { useEditableText } from './lib/shapes/shared/useEditableText'
 export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/TldrawUi'
-export { setDefaultUiAssetUrls, type TLUiAssetUrlOverrides } from './lib/ui/assetUrls'
-export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
-export { Spinner } from './lib/ui/components/Spinner'
-export { PORTRAIT_BREAKPOINT } from './lib/ui/constants'
-export {
-	TldrawUiContextProvider,
-	type TldrawUiContextProviderProps,
-} from './lib/ui/context/TldrawUiContextProvider'
-export {
-	useActions,
-	type TLUiActionItem,
-	type TLUiActionsContextType,
-} from './lib/ui/context/actions'
-export { AssetUrlsProvider, useAssetUrls } from './lib/ui/context/asset-urls'
-export { BreakPointProvider, useBreakpoint } from './lib/ui/context/breakpoints'
-export {
-	useDialogs,
-	type TLUiDialog,
-	type TLUiDialogProps,
-	type TLUiDialogsContextType,
-} from './lib/ui/context/dialogs'
-export {
-	UiEventsProvider,
-	useUiEvents,
-	type EventsProviderProps,
-	type TLUiEventContextType,
-	type TLUiEventHandler,
-	type TLUiEventMap,
-	type TLUiEventSource,
-} from './lib/ui/context/events'
-export {
-	useToasts,
-	type AlertSeverity,
-	type TLUiToast,
-	type TLUiToastAction,
-	type TLUiToastsContextType,
-} from './lib/ui/context/toasts'
-export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
-export { useCopyAs } from './lib/ui/hooks/useCopyAs'
-export { useExportAs } from './lib/ui/hooks/useExportAs'
-export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
-export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
-export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
-export { usePreloadAssets } from './lib/ui/hooks/usePreloadAssets'
-export { useReadonly } from './lib/ui/hooks/useReadonly'
-export { useRelevantStyles } from './lib/ui/hooks/useRelevantStyles'
-export {
-	useTools,
-	type TLUiToolItem,
-	type TLUiToolsContextType,
-	type TLUiToolsProviderProps,
-} from './lib/ui/hooks/useTools'
-export { type TLUiTranslationKey } from './lib/ui/hooks/useTranslation/TLUiTranslationKey'
-export { type TLUiTranslation } from './lib/ui/hooks/useTranslation/translations'
-export {
-	useCurrentTranslation,
-	useTranslation,
-	type TLUiTranslationContextType,
-} from './lib/ui/hooks/useTranslation/useTranslation'
-export { type TLUiIconType } from './lib/ui/icon-types'
-export { useDefaultHelpers, type TLUiOverrides } from './lib/ui/overrides'
-export { containBoxSize, downsizeImage } from './lib/utils/assets/assets'
-export { getEmbedInfo } from './lib/utils/embeds/embeds'
-export { copyAs } from './lib/utils/export/copyAs'
-export { exportToBlob, getSvgAsImage } from './lib/utils/export/export'
-export { exportAs, type TLExportType } from './lib/utils/export/exportAs'
-export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
-export {
-	defaultEditorAssetUrls,
-	setDefaultEditorAssetUrls,
-} from './lib/utils/static-assets/assetUrls'
-export { truncateStringWithEllipsis } from './lib/utils/text/text'
-export {
-	buildFromV1Document,
-	type LegacyTldrawDocument,
-} from './lib/utils/tldr/buildFromV1Document'
-export {
-	TLDRAW_FILE_EXTENSION,
-	parseAndLoadDocument,
-	parseTldrawJsonFile,
-	serializeTldrawJson,
-	serializeTldrawJsonBlob,
-	type TldrawFile,
-} from './lib/utils/tldr/file'
-
-// Minimap default component
-export { DefaultMinimap } from './lib/ui/components/Minimap/DefaultMinimap'
-
-// Helper to unwrap label from action items
-export { unwrapLabel } from './lib/ui/context/actions'
-
-export {
-	TldrawUiComponentsProvider,
-	useTldrawUiComponents,
-	type TLUiComponents,
-	type TLUiComponentsProviderProps,
-} from './lib/ui/context/components'
-
-export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
-export { PageItemInput } from './lib/ui/components/PageMenu/PageItemInput'
-export { PageItemSubmenu } from './lib/ui/components/PageMenu/PageItemSubmenu'
-
-export { DefaultNavigationPanel } from './lib/ui/components/NavigationPanel/DefaultNavigationPanel'
-
-export {
-	DefaultStylePanel,
-	type TLUiStylePanelProps,
-} from './lib/ui/components/StylePanel/DefaultStylePanel'
 export {
-	ArrowheadStylePickerSet,
-	CommonStylePickerSet,
-	DefaultStylePanelContent,
-	GeoStylePickerSet,
-	OpacitySlider,
-	SplineStylePickerSet,
-	TextStylePickerSet,
-	type TLUiStylePanelContentProps,
-} from './lib/ui/components/StylePanel/DefaultStylePanelContent'
-
+	setDefaultUiAssetUrls,
+	type TLUiAssetUrlOverrides,
+	type TLUiAssetUrls,
+} from './lib/ui/assetUrls'
 export {
 	DefaultActionsMenu,
 	type TLUiActionsMenuProps,
@@ -187,14 +76,22 @@ export {
 	StackMenuItems,
 	ZoomOrRotateMenuItem,
 } from './lib/ui/components/ActionsMenu/DefaultActionsMenuContent'
-
 export {
 	DefaultContextMenu as ContextMenu,
 	DefaultContextMenu,
 	type TLUiContextMenuProps,
 } from './lib/ui/components/ContextMenu/DefaultContextMenu'
 export { DefaultContextMenuContent } from './lib/ui/components/ContextMenu/DefaultContextMenuContent'
-
+export {
+	DefaultDebugMenu,
+	type TLUiDebugMenuProps,
+} from './lib/ui/components/DebugMenu/DefaultDebugMenu'
+export {
+	DebugFlags,
+	DefaultDebugMenuContent,
+	ExampleDialog,
+	FeatureFlags,
+} from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
 export {
 	DefaultHelpMenu,
 	type TLUiHelpMenuProps,
@@ -203,8 +100,99 @@ export {
 	DefaultHelpMenuContent,
 	KeyboardShortcutsMenuItem,
 } from './lib/ui/components/HelpMenu/DefaultHelpMenuContent'
+export {
+	DefaultHelperButtons,
+	type TLUiHelperButtonsProps,
+} from './lib/ui/components/HelperButtons/DefaultHelperButtons'
+export { DefaultHelperButtonsContent } from './lib/ui/components/HelperButtons/DefaultHelperButtonsContent'
+export {
+	DefaultKeyboardShortcutsDialog,
+	type TLUiKeyboardShortcutsDialogProps,
+} from './lib/ui/components/KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialog'
+export { DefaultKeyboardShortcutsDialogContent } from './lib/ui/components/KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialogContent'
 export { LanguageMenu } from './lib/ui/components/LanguageMenu'
-
+export {
+	DefaultMainMenu,
+	type TLUiMainMenuProps,
+} from './lib/ui/components/MainMenu/DefaultMainMenu'
+export {
+	DefaultMainMenuContent,
+	EditSubmenu,
+	ExportFileContentSubMenu,
+	ExtrasGroup,
+	MiscMenuGroup,
+	PreferencesGroup,
+	UndoRedoGroup,
+	ViewSubmenu,
+} from './lib/ui/components/MainMenu/DefaultMainMenuContent'
+export { DefaultMinimap } from './lib/ui/components/Minimap/DefaultMinimap'
+export { DefaultNavigationPanel } from './lib/ui/components/NavigationPanel/DefaultNavigationPanel'
+export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
+export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
+export { PageItemInput } from './lib/ui/components/PageMenu/PageItemInput'
+export {
+	PageItemSubmenu,
+	type PageItemSubmenuProps,
+} from './lib/ui/components/PageMenu/PageItemSubmenu'
+export {
+	DefaultQuickActions,
+	type TLUiQuickActionsProps,
+} from './lib/ui/components/QuickActions/DefaultQuickActions'
+export { DefaultQuickActionsContent } from './lib/ui/components/QuickActions/DefaultQuickActionsContent'
+export { Spinner } from './lib/ui/components/Spinner'
+export {
+	DefaultStylePanel,
+	type TLUiStylePanelProps,
+} from './lib/ui/components/StylePanel/DefaultStylePanel'
+export {
+	ArrowheadStylePickerSet,
+	CommonStylePickerSet,
+	DefaultStylePanelContent,
+	GeoStylePickerSet,
+	OpacitySlider,
+	SplineStylePickerSet,
+	TextStylePickerSet,
+	type TLUiStylePanelContentProps,
+} from './lib/ui/components/StylePanel/DefaultStylePanelContent'
+export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
+export {
+	ArrowDownToolbarItem,
+	ArrowLeftToolbarItem,
+	ArrowRightToolbarItem,
+	ArrowToolbarItem,
+	ArrowUpToolbarItem,
+	AssetToolbarItem,
+	CheckBoxToolbarItem,
+	CloudToolbarItem,
+	DefaultToolbarContent,
+	DiamondToolbarItem,
+	DrawToolbarItem,
+	EllipseToolbarItem,
+	EraserToolbarItem,
+	FrameToolbarItem,
+	HandToolbarItem,
+	HexagonToolbarItem,
+	HighlightToolbarItem,
+	LaserToolbarItem,
+	LineToolbarItem,
+	NoteToolbarItem,
+	OvalToolbarItem,
+	RectangleToolbarItem,
+	RhombusToolbarItem,
+	SelectToolbarItem,
+	StarToolbarItem,
+	TextToolbarItem,
+	ToolbarItem,
+	TrapezoidToolbarItem,
+	TriangleToolbarItem,
+	XBoxToolbarItem,
+	useIsToolSelected,
+} from './lib/ui/components/Toolbar/DefaultToolbarContent'
+export {
+	DefaultZoomMenu,
+	type TLUiZoomMenuProps,
+} from './lib/ui/components/ZoomMenu/DefaultZoomMenu'
+export { DefaultZoomMenuContent } from './lib/ui/components/ZoomMenu/DefaultZoomMenuContent'
 export {
 	ArrangeMenuSubmenu,
 	ClipboardMenuGroup,
@@ -243,62 +231,6 @@ export {
 	ZoomToFitMenuItem,
 	ZoomToSelectionMenuItem,
 } from './lib/ui/components/menu-items'
-
-export {
-	DefaultMainMenu,
-	type TLUiMainMenuProps,
-} from './lib/ui/components/MainMenu/DefaultMainMenu'
-export {
-	DefaultMainMenuContent,
-	EditSubmenu,
-	ExportFileContentSubMenu,
-	ExtrasGroup,
-	MiscMenuGroup,
-	PreferencesGroup,
-	UndoRedoGroup,
-	ViewSubmenu,
-} from './lib/ui/components/MainMenu/DefaultMainMenuContent'
-
-export {
-	DefaultQuickActions,
-	type TLUiQuickActionsProps,
-} from './lib/ui/components/QuickActions/DefaultQuickActions'
-export { DefaultQuickActionsContent } from './lib/ui/components/QuickActions/DefaultQuickActionsContent'
-
-export {
-	DefaultZoomMenu,
-	type TLUiZoomMenuProps,
-} from './lib/ui/components/ZoomMenu/DefaultZoomMenu'
-export { DefaultZoomMenuContent } from './lib/ui/components/ZoomMenu/DefaultZoomMenuContent'
-
-export {
-	DefaultHelperButtons,
-	type TLUiHelperButtonsProps,
-} from './lib/ui/components/HelperButtons/DefaultHelperButtons'
-export { DefaultHelperButtonsContent } from './lib/ui/components/HelperButtons/DefaultHelperButtonsContent'
-
-export {
-	DefaultKeyboardShortcutsDialog,
-	type TLUiKeyboardShortcutsDialogProps,
-} from './lib/ui/components/KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialog'
-export { DefaultKeyboardShortcutsDialogContent } from './lib/ui/components/KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialogContent'
-
-export {
-	DefaultDebugMenu,
-	type TLUiDebugMenuProps,
-} from './lib/ui/components/DebugMenu/DefaultDebugMenu'
-export {
-	DebugFlags,
-	DefaultDebugMenuContent,
-	ExampleDialog,
-	FeatureFlags,
-} from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
-
-export { type TLComponents } from './lib/Tldraw'
-
-/* ------------------- Primitives ------------------- */
-
-// Button
 export {
 	TldrawUiButton,
 	type TLUiButtonProps,
@@ -315,14 +247,10 @@ export {
 	TldrawUiButtonLabel,
 	type TLUiButtonLabelProps,
 } from './lib/ui/components/primitives/Button/TldrawUiButtonLabel'
-
-// Button picker
 export {
 	TldrawUiButtonPicker,
 	type TLUiButtonPickerProps,
 } from './lib/ui/components/primitives/TldrawUiButtonPicker'
-
-// Dialog
 export {
 	TldrawUiDialogBody,
 	TldrawUiDialogCloseButton,
@@ -334,8 +262,6 @@ export {
 	type TLUiDialogHeaderProps,
 	type TLUiDialogTitleProps,
 } from './lib/ui/components/primitives/TldrawUiDialog'
-
-// Dropdown Menu
 export {
 	TldrawUiDropdownMenuCheckboxItem,
 	TldrawUiDropdownMenuContent,
@@ -355,17 +281,9 @@ export {
 	type TLUiDropdownMenuSubTriggerProps,
 	type TLUiDropdownMenuTriggerProps,
 } from './lib/ui/components/primitives/TldrawUiDropdownMenu'
-
-// Icon
 export { TldrawUiIcon, type TLUiIconProps } from './lib/ui/components/primitives/TldrawUiIcon'
-
-// Input
 export { TldrawUiInput, type TLUiInputProps } from './lib/ui/components/primitives/TldrawUiInput'
-
-// Kbd
 export { TldrawUiKbd, type TLUiKbdProps } from './lib/ui/components/primitives/TldrawUiKbd'
-
-// Popover
 export {
 	TldrawUiPopover,
 	TldrawUiPopoverContent,
@@ -374,49 +292,7 @@ export {
 	type TLUiPopoverProps,
 	type TLUiPopoverTriggerProps,
 } from './lib/ui/components/primitives/TldrawUiPopover'
-
-// Slider
 export { TldrawUiSlider, type TLUiSliderProps } from './lib/ui/components/primitives/TldrawUiSlider'
-
-// Toolbar
-export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
-export {
-	ArrowDownToolbarItem,
-	ArrowLeftToolbarItem,
-	ArrowRightToolbarItem,
-	ArrowToolbarItem,
-	ArrowUpToolbarItem,
-	AssetToolbarItem,
-	CheckBoxToolbarItem,
-	CloudToolbarItem,
-	DefaultToolbarContent,
-	DiamondToolbarItem,
-	DrawToolbarItem,
-	EllipseToolbarItem,
-	EraserToolbarItem,
-	FrameToolbarItem,
-	HandToolbarItem,
-	HexagonToolbarItem,
-	HighlightToolbarItem,
-	LaserToolbarItem,
-	LineToolbarItem,
-	NoteToolbarItem,
-	OvalToolbarItem,
-	RectangleToolbarItem,
-	RhombusToolbarItem,
-	SelectToolbarItem,
-	StarToolbarItem,
-	TextToolbarItem,
-	ToolbarItem,
-	TrapezoidToolbarItem,
-	TriangleToolbarItem,
-	XBoxToolbarItem,
-	useIsToolSelected,
-} from './lib/ui/components/Toolbar/DefaultToolbarContent'
-
-/* ----------------- Menu Primitives ---------------- */
-
-// General UI components for building menus
 export {
 	TldrawUiMenuCheckboxItem,
 	type TLUiMenuCheckboxItemProps,
@@ -424,6 +300,7 @@ export {
 export {
 	TldrawUiMenuContextProvider,
 	type TLUiMenuContextProviderProps,
+	type TldrawUiMenuContextType,
 } from './lib/ui/components/primitives/menus/TldrawUiMenuContext'
 export {
 	TldrawUiMenuGroup,
@@ -437,11 +314,130 @@ export {
 	TldrawUiMenuSubmenu,
 	type TLUiMenuSubmenuProps,
 } from './lib/ui/components/primitives/menus/TldrawUiMenuSubmenu'
-
-/* ----------------- Constants ---------------- */
-
+export { PORTRAIT_BREAKPOINT } from './lib/ui/constants'
 export {
-	FONT_FAMILIES,
-	LABEL_FONT_SIZES,
-	TEXT_PROPS,
-} from './lib/shapes/shared/default-shape-constants'
+	TldrawUiContextProvider,
+	type TldrawUiContextProviderProps,
+} from './lib/ui/context/TldrawUiContextProvider'
+export {
+	unwrapLabel,
+	useActions,
+	type ActionsProviderProps,
+	type TLUiActionItem,
+	type TLUiActionsContextType,
+} from './lib/ui/context/actions'
+export { AssetUrlsProvider, useAssetUrls } from './lib/ui/context/asset-urls'
+export { BreakPointProvider, useBreakpoint } from './lib/ui/context/breakpoints'
+export {
+	TldrawUiComponentsProvider,
+	useTldrawUiComponents,
+	type TLUiComponents,
+	type TLUiComponentsProviderProps,
+} from './lib/ui/context/components'
+export {
+	useDialogs,
+	type TLUiDialog,
+	type TLUiDialogProps,
+	type TLUiDialogsContextType,
+} from './lib/ui/context/dialogs'
+export {
+	UiEventsProvider,
+	useUiEvents,
+	type EventsProviderProps,
+	type TLUiEventContextType,
+	type TLUiEventData,
+	type TLUiEventHandler,
+	type TLUiEventMap,
+	type TLUiEventSource,
+} from './lib/ui/context/events'
+export {
+	useToasts,
+	type AlertSeverity,
+	type TLUiToast,
+	type TLUiToastAction,
+	type TLUiToastsContextType,
+} from './lib/ui/context/toasts'
+export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
+export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
+export { useCopyAs } from './lib/ui/hooks/useCopyAs'
+export { useExportAs } from './lib/ui/hooks/useExportAs'
+export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
+export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
+export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
+export { usePreloadAssets } from './lib/ui/hooks/usePreloadAssets'
+export { useReadonly } from './lib/ui/hooks/useReadonly'
+export { useRelevantStyles } from './lib/ui/hooks/useRelevantStyles'
+export {
+	useTools,
+	type TLUiToolItem,
+	type TLUiToolsContextType,
+	type TLUiToolsProviderProps,
+} from './lib/ui/hooks/useTools'
+export { type TLUiTranslationKey } from './lib/ui/hooks/useTranslation/TLUiTranslationKey'
+export { type TLUiTranslation } from './lib/ui/hooks/useTranslation/translations'
+export {
+	useCurrentTranslation,
+	useTranslation,
+	type TLUiTranslationContextType,
+	type TLUiTranslationProviderProps,
+} from './lib/ui/hooks/useTranslation/useTranslation'
+export { type TLUiIconType } from './lib/ui/icon-types'
+export { useDefaultHelpers, type TLUiOverrideHelpers, type TLUiOverrides } from './lib/ui/overrides'
+export { containBoxSize, downsizeImage, type BoxWidthHeight } from './lib/utils/assets/assets'
+export { preloadFont, type TLTypeFace } from './lib/utils/assets/preload-font'
+export { getEmbedInfo, type TLEmbedResult } from './lib/utils/embeds/embeds'
+export { copyAs, type TLCopyType } from './lib/utils/export/copyAs'
+export { exportToBlob, getSvgAsImage } from './lib/utils/export/export'
+export { exportAs, type TLExportType } from './lib/utils/export/exportAs'
+export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
+export {
+	defaultEditorAssetUrls,
+	setDefaultEditorAssetUrls,
+	type TLEditorAssetUrls,
+} from './lib/utils/static-assets/assetUrls'
+export { truncateStringWithEllipsis } from './lib/utils/text/text'
+export {
+	TLV1AlignStyle,
+	TLV1AssetType,
+	TLV1ColorStyle,
+	TLV1DashStyle,
+	TLV1Decoration,
+	TLV1FontStyle,
+	TLV1ShapeType,
+	TLV1SizeStyle,
+	buildFromV1Document,
+	type TLV1ArrowBinding,
+	type TLV1ArrowShape,
+	type TLV1Asset,
+	type TLV1BaseAsset,
+	type TLV1BaseBinding,
+	type TLV1BaseShape,
+	type TLV1Binding,
+	type TLV1Bounds,
+	type TLV1Document,
+	type TLV1DrawShape,
+	type TLV1EllipseShape,
+	type TLV1GroupShape,
+	type TLV1Handle,
+	type TLV1ImageAsset,
+	type TLV1ImageShape,
+	type TLV1Page,
+	type TLV1PageState,
+	type TLV1RectangleShape,
+	type TLV1Shape,
+	type TLV1ShapeStyles,
+	type TLV1StickyShape,
+	type TLV1TextShape,
+	type TLV1TriangleShape,
+	type TLV1VideoAsset,
+	type TLV1VideoShape,
+} from './lib/utils/tldr/buildFromV1Document'
+export {
+	TLDRAW_FILE_EXTENSION,
+	parseAndLoadDocument,
+	parseTldrawJsonFile,
+	serializeTldrawJson,
+	serializeTldrawJsonBlob,
+	type TldrawFile,
+	type TldrawFileParseError,
+} from './lib/utils/tldr/file'

commit 6cb797a07475d7250bffe731174c516c50136a00
Author: alex <alex@dytry.ch>
Date:   Thu Jun 13 14:09:27 2024 +0100

    Better generated docs for react components (#3930)
    
    Before:
    ![Screenshot 2024-06-12 at 12 57
    26](https://github.com/tldraw/tldraw/assets/1489520/2a9f6098-ef2a-4f52-88f5-d6e4311c067d)
    
    After:
    ![Screenshot 2024-06-12 at 12 59
    16](https://github.com/tldraw/tldraw/assets/1489520/51733c2a-a2b4-4084-a89a-85bce5b47672)
    
    React components in docs now list their props, and appear under a new
    "Component" section instead of randomly under either `Function` or
    `Variable`. In order to have our docs generate this, a few criteria need
    to be met:
    1. They need to be tagged with the `@react` tsdoc tag
    2. Their props need to be a simple type alias, typically to an
    interface.
    
    Both of these rules are enforced with a new lint rule - any component
    tagged as `@public` will have these rules enforced.
    
    ### Change Type
    
    - [x] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [x] `improvement` ‚Äî Improving existing features

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 3ee5f24b0..572135711 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -56,7 +56,7 @@ export { LaserTool } from './lib/tools/LaserTool/LaserTool'
 export { SelectTool } from './lib/tools/SelectTool/SelectTool'
 export { getOccludedChildren, kickoutOccludedShapes } from './lib/tools/SelectTool/selectHelpers'
 export { ZoomTool } from './lib/tools/ZoomTool/ZoomTool'
-export { TldrawUi, type TldrawUiBaseProps, type TldrawUiProps } from './lib/ui/TldrawUi'
+export { TldrawUi, type TldrawUiProps } from './lib/ui/TldrawUi'
 export {
 	setDefaultUiAssetUrls,
 	type TLUiAssetUrlOverrides,
@@ -91,6 +91,7 @@ export {
 	DefaultDebugMenuContent,
 	ExampleDialog,
 	FeatureFlags,
+	type ExampleDialogProps,
 } from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
 export {
 	DefaultHelpMenu,
@@ -129,7 +130,7 @@ export { DefaultMinimap } from './lib/ui/components/Minimap/DefaultMinimap'
 export { DefaultNavigationPanel } from './lib/ui/components/NavigationPanel/DefaultNavigationPanel'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
-export { PageItemInput } from './lib/ui/components/PageMenu/PageItemInput'
+export { PageItemInput, type PageItemInputProps } from './lib/ui/components/PageMenu/PageItemInput'
 export {
 	PageItemSubmenu,
 	type PageItemSubmenuProps,
@@ -152,9 +153,14 @@ export {
 	OpacitySlider,
 	SplineStylePickerSet,
 	TextStylePickerSet,
+	type StylePickerSetProps,
 	type TLUiStylePanelContentProps,
+	type ThemeStylePickerSetProps,
 } from './lib/ui/components/StylePanel/DefaultStylePanelContent'
-export { DefaultToolbar } from './lib/ui/components/Toolbar/DefaultToolbar'
+export {
+	DefaultToolbar,
+	type DefaultToolbarProps,
+} from './lib/ui/components/Toolbar/DefaultToolbar'
 export {
 	ArrowDownToolbarItem,
 	ArrowLeftToolbarItem,
@@ -187,6 +193,7 @@ export {
 	TriangleToolbarItem,
 	XBoxToolbarItem,
 	useIsToolSelected,
+	type ToolbarItemProps,
 } from './lib/ui/components/Toolbar/DefaultToolbarContent'
 export {
 	DefaultZoomMenu,
@@ -327,7 +334,11 @@ export {
 	type TLUiActionsContextType,
 } from './lib/ui/context/actions'
 export { AssetUrlsProvider, useAssetUrls } from './lib/ui/context/asset-urls'
-export { BreakPointProvider, useBreakpoint } from './lib/ui/context/breakpoints'
+export {
+	BreakPointProvider,
+	useBreakpoint,
+	type BreakPointProviderProps,
+} from './lib/ui/context/breakpoints'
 export {
 	TldrawUiComponentsProvider,
 	useTldrawUiComponents,

commit 735161c4a81fb617805ffb7f76a274954ec1d2f4
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Fri Jun 14 11:23:52 2024 +0100

    assets: store in indexedDB, not as base64 (#3836)
    
    this is take #2 of this PR https://github.com/tldraw/tldraw/pull/3745
    
    As I look at LOD holistically and whether we have multiple sources when
    working locally, I learned that our system used base64 encoding of
    assets directly. Issue https://github.com/tldraw/tldraw/issues/3728
    
    <img width="1350" alt="assetstore"
    src="https://github.com/tldraw/tldraw/assets/469604/e7b41e29-6656-4d9b-b462-72d43b98f3f7">
    
    
    The motivations and benefits are:
    - store size: not having a huge base64 blobs injected in room data
    - perf on loading snapshot: this helps with loading the room data more
    quickly
    - multiple sources: furthermore, if we do decide to have multiple
    sources locally (for each asset), then we won't get a multiplicative
    effect of even larger JSON blobs that have lots of base64 data in them
    - encoding/decoding perf: this also saves the (slow) step of having to
    base64 encode/decode our assets, we can just strictly with work with
    blobs.
    
    
    Todo:
    - [x] decodes video and images
    - [x] make sure it syncs to other tabs
    - [x] make sure it syncs to other multiplayer room
    - [x] fix tests
    
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [ ] `feature` ‚Äî New feature
    - [x] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Test Plan
    
    1. Test the shit out of uploading/downloading video/image assets,
    locally+multiplayer.
    
    - [ ] Need to fix current tests and write new ones
    
    ### Release Notes
    
    - Assets: store as reference to blob in indexedDB instead of storing
    directly as base64 in the snapshot.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 572135711..519575acf 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,7 +2,7 @@
 
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
-
+export { getAssetFromIndexedDb, storeAssetInIndexedDb } from './lib/AssetBlobStore'
 export { Tldraw, type TLComponents, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'

commit 764f26007f8909b6fafdaa64cb076718f788593a
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Sun Jun 16 18:12:04 2024 +0300

    Make ArrowBindingUtil public (#3913)
    
    I wanted to extend the arrow binding util to adapt holograph for the
    bindings api, but it wasn't being exported like all the shape utils
    were. I could have plucked it from the `defaultBindingUtils` array but
    that felt dirty. What do you think @SomeHats ?
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [x] `feature` ‚Äî New feature
    - [ ] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Test Plan
    
    1. Add a step-by-step description of how to test your PR here.
    2.
    
    - [ ] Unit Tests
    - [ ] End to end tests
    
    ### Release Notes
    
    - Add a brief release note for your PR here.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 519575acf..5ce07daa8 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -5,6 +5,7 @@ export * from '@tldraw/editor'
 export { getAssetFromIndexedDb, storeAssetInIndexedDb } from './lib/AssetBlobStore'
 export { Tldraw, type TLComponents, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
+export { ArrowBindingUtil } from './lib/bindings/arrow/ArrowBindingUtil'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawScribble } from './lib/canvas/TldrawScribble'
 export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackground'

commit ac149c1014fb5f0539d7c55f0f10ce2a05a23f74
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Sun Jun 16 19:58:13 2024 +0300

    Dynamic size mode + fill fill (#3835)
    
    This PR adds a user preference for "dynamic size mode" where the scale
    of shapes (text size, stroke width) is relative to the current zoom
    level. This means that the stroke width in screen pixels (or text size
    in screen pixels) is identical regardless of zoom level.
    
    ![Kapture 2024-05-27 at 05 23
    21](https://github.com/tldraw/tldraw/assets/23072548/f247ecce-bfcd-4f85-b7a5-d7677b38e4d8)
    
    - [x] Draw shape
    - [x] Text shape
    - [x] Highlighter shape
    - [x] Geo shape
    - [x] Arrow shape
    - [x] Note shape
    - [x] Line shape
    
    Embed shape?
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `feature` ‚Äî New feature
    
    ### Test Plan
    
    1. Use the tools.
    2. Change zoom
    
    - [ ] Unit Tests
    
    ### Release Notes
    
    - Adds a dynamic size user preferences.
    - Removes double click to reset scale on text shapes.
    - Removes double click to reset autosize on text shapes.
    
    ---------
    
    Co-authored-by: Taha <98838967+Taha-Hassan-Git@users.noreply.github.com>
    Co-authored-by: huppy-bot[bot] <128400622+huppy-bot[bot]@users.noreply.github.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 5ce07daa8..b8b96d6cb 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -38,7 +38,6 @@ export { LineShapeTool } from './lib/shapes/line/LineShapeTool'
 export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
-export { useDefaultColorTheme } from './lib/shapes/shared/ShapeFill'
 export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
 export {
 	FONT_FAMILIES,
@@ -46,6 +45,7 @@ export {
 	TEXT_PROPS,
 } from './lib/shapes/shared/default-shape-constants'
 export { getPerfectDashProps } from './lib/shapes/shared/getPerfectDashProps'
+export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
 export { useEditableText } from './lib/shapes/shared/useEditableText'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'

commit 1bcc16d15ac47353279af6798e155d195e5631b5
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Mon Jun 17 15:13:46 2024 +0200

    Move from unpkg to our own cdn. (#3923)
    
    Switches from unpkg to our own cdn files.
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [ ] `feature` ‚Äî New feature
    - [x] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    ### Release Notes
    
    - Start using our own cdn instead of unpkg.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b8b96d6cb..ffa6dcd85 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -404,6 +404,7 @@ export { exportAs, type TLExportType } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export {
 	defaultEditorAssetUrls,
+	getDefaultCdnBaseUrl,
 	setDefaultEditorAssetUrls,
 	type TLEditorAssetUrls,
 } from './lib/utils/static-assets/assetUrls'

commit 12aea7ed68e9b349c4eee4b6f2779ec970c7c650
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Mon Jun 17 16:46:04 2024 +0200

    [Experiment] Allow users to use system's appearance (dark / light) mode (#3703)
    
    Allow the users to fully use the same colour scheme as their system.
    Allows the users to either: force dark colour scheme, force light colour
    scheme, or use the system one.
    
    It's reactive to the system changes.
    
    
    https://github.com/tldraw/tldraw/assets/2523721/6d4cef03-9ef0-4098-b299-6bf5d7513e98
    
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [ ] `feature` ‚Äî New feature
    - [x] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Test Plan
    
    1. Add a step-by-step description of how to test your PR here.
    2.
    
    - [ ] Unit Tests
    - [ ] End to end tests
    
    ### Release Notes
    
    - Add a brief release note for your PR here.
    
    ---------
    
    Co-authored-by: David Sheldrick <d.j.sheldrick@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index ffa6dcd85..bdfde9bb5 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -222,7 +222,6 @@ export {
 	ReorderMenuSubmenu,
 	SelectAllMenuItem,
 	ToggleAutoSizeMenuItem,
-	ToggleDarkModeItem,
 	ToggleDebugModeItem,
 	ToggleEdgeScrollingItem,
 	ToggleFocusModeItem,

commit 4ccac5da96d55e3d3fbceb37a7ee65a1901939fc
Author: alex <alex@dytry.ch>
Date:   Mon Jun 24 16:55:46 2024 +0100

    better auto-generated docs for Tldraw and TldrawEditor (#4012)
    
    Simplify the types used by the props of the `Tldraw` and `TldrawEditor`
    components. This doesn't make the docs perfect, but it makes them quite
    a bit better than they were.
    
    
    ![image](https://github.com/tldraw/tldraw/assets/1489520/66c72e0e-c22b-4414-b194-f0598e4a3736)
    
    
    ### Change Type
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [x] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [x] `improvement` ‚Äî Improving existing features

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index bdfde9bb5..5e4dd78a8 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -3,7 +3,7 @@
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { getAssetFromIndexedDb, storeAssetInIndexedDb } from './lib/AssetBlobStore'
-export { Tldraw, type TLComponents, type TldrawProps } from './lib/Tldraw'
+export { Tldraw, type TLComponents, type TldrawBaseProps, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
 export { ArrowBindingUtil } from './lib/bindings/arrow/ArrowBindingUtil'
 export { TldrawHandles } from './lib/canvas/TldrawHandles'

commit 1bf2820a3fed5fad4064d33d8ba38d9450e8a06a
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Jul 5 11:41:03 2024 +0100

    Add component for `ShapeIndicators` (#4083)
    
    This PR adds a component for `ShapeIndicators` to the UI component
    overrides. It moves the "select tool" state logic up to the new
    `TldrawShapeIndicators` component.
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Added new `ShapeIndicators` component to `components` object.
    - Added new `TldrawShapeIndicators` component.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 5e4dd78a8..8340be7b0 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -10,6 +10,7 @@ export { TldrawHandles } from './lib/canvas/TldrawHandles'
 export { TldrawScribble } from './lib/canvas/TldrawScribble'
 export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackground'
 export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'
+export { TldrawShapeIndicators } from './lib/canvas/TldrawShapeIndicators'
 export { defaultBindingUtils } from './lib/defaultBindingUtils'
 export { type TLExternalContentProps } from './lib/defaultExternalContentHandlers'
 export { defaultShapeTools } from './lib/defaultShapeTools'

commit 965bc10997725a7e2e1484767165253d4352b21a
Author: alex <alex@dytry.ch>
Date:   Wed Jul 10 14:00:18 2024 +0100

    [1/4] Blob storage in TLStore (#4068)
    
    Reworks the store to include information about how blob assets
    (images/videos) are stored/retrieved. This replaces the old
    internal-only `assetOptions` prop, and supplements the existing
    `registerExternalAssetHandler` API.
    
    Previously, `registerExternalAssetHandler` had two responsibilities:
    1. Extracting asset metadata
    2. Uploading the asset and returning its URL
    
    Existing `registerExternalAssetHandler` implementation will still work,
    but now uploading is the responsibility of a new `editor.uploadAsset`
    method which calls the new store-based upload method. Our default asset
    handlers extract metadata, then call that new API. I think this is a
    pretty big improvement over what we had before: overriding uploads was a
    pretty common ask, but doing so meant having to copy paste our metadata
    extraction which felt pretty fragile. Just in this codebase, we had a
    bunch of very slightly different metadata extraction code-paths that had
    been copy-pasted around then diverged over time. Now, you can change how
    uploads work without having to mess with metadata extraction and
    vice-versa.
    
    As part of this we also:
    1. merge the old separate asset indexeddb store with the main one.
    because this warrants some pretty big migration stuff, i refactored our
    indexed-db helpers to work around an instance instead of being free
    functions
    2. move our existing asset stuff over to the new approach
    3. add a new hook in `sync-react` to create a demo store with the new
    assets
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    
    Introduce a new `assets` option for the store, describing how to save
    and retrieve asset blobs like images & videos from e.g. a user-content
    CDN. These are accessible through `editor.uploadAsset` and
    `editor.resolveAssetUrl`. This supplements the existing
    `registerExternalAssetHandler` API: `registerExternalAssetHandler` is
    for customising metadata extraction, and should call
    `editor.uploadAsset` to save assets. Existing
    `registerExternalAssetHandler` calls will still work, but if you're only
    using them to configure uploads and don't want to customise metadata
    extraction, consider switching to the new `assets` store prop.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8340be7b0..14eb052b3 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,7 +2,6 @@
 
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
-export { getAssetFromIndexedDb, storeAssetInIndexedDb } from './lib/AssetBlobStore'
 export { Tldraw, type TLComponents, type TldrawBaseProps, type TldrawProps } from './lib/Tldraw'
 export { TldrawImage, type TldrawImageProps } from './lib/TldrawImage'
 export { ArrowBindingUtil } from './lib/bindings/arrow/ArrowBindingUtil'

commit 7273eb3101d49740df2adc082f3c5f1c80ce3b6c
Author: alex <alex@dytry.ch>
Date:   Wed Jul 10 16:46:09 2024 +0100

    [3/5] Automatically enable multiplayer UI when using demo sync (#4119)
    
    Adds a new `multiplayerStatus` store prop. This can either be `null`
    (indicating this isn't a multiplayer store) or a signal containing
    `online` or `offline` indicating that it is. We move a bunch of
    previously dotcom specific UI into `tldraw` and use this new prop to
    turn it on or off by default.
    
    closes TLD-2611
    
    ### Change type
    
    - [x] `improvement`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 14eb052b3..b44b72fa4 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -141,6 +141,8 @@ export {
 	type TLUiQuickActionsProps,
 } from './lib/ui/components/QuickActions/DefaultQuickActions'
 export { DefaultQuickActionsContent } from './lib/ui/components/QuickActions/DefaultQuickActionsContent'
+export { DefaultSharePanel } from './lib/ui/components/SharePanel/DefaultSharePanel'
+export { PeopleMenu, type PeopleMenuProps } from './lib/ui/components/SharePanel/PeopleMenu'
 export { Spinner } from './lib/ui/components/Spinner'
 export {
 	DefaultStylePanel,
@@ -196,6 +198,11 @@ export {
 	useIsToolSelected,
 	type ToolbarItemProps,
 } from './lib/ui/components/Toolbar/DefaultToolbarContent'
+export {
+	CenteredTopPanelContainer,
+	type CenteredTopPanelContainerProps,
+} from './lib/ui/components/TopPanel/CenteredTopPanelContainer'
+export { DefaultTopPanel } from './lib/ui/components/TopPanel/DefaultTopPanel'
 export {
 	DefaultZoomMenu,
 	type TLUiZoomMenuProps,

commit 69a1c17b463991882c49d1496d1efedcfa0a730f
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Thu Jul 11 12:49:18 2024 +0100

    sdk: wires up tldraw to have licensing mechanisms (#4021)
    
    For non-commercial usage of tldraw, this adds a watermark in the corner,
    both for branding purposes and as an incentive for our enterprise
    customers to purchase a license.
    
    For commercial usage of tldraw, you add a license to the `<Tldraw
    licenseKey={YOUR_LICENSE_KEY} />` component so that the watermark
    doesn't show.
    
    The license is a signed key that has various bits of information in it,
    such as:
    - license type
    - hosts that the license is valid for
    - whether it's an internal-only license
    - expiry date
    
    We check the license on load and show a watermark (or throw an error if
    internal-only) if the license is not valid in a production environment.
    
    This is a @MitjaBezensek, @Taha-Hassan-Git, @mimecuvalo joint
    production! ü§ú ü§õ
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [x] `feature` ‚Äî New feature
    - [ ] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Test Plan
    
    1. We will be dogfooding on staging.tldraw.com and tldraw.com itself
    before releasing this.
    
    ### Release Notes
    
    - SDK: wires up tldraw to have licensing mechanisms.
    
    ---------
    
    Co-authored-by: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
    Co-authored-by: Taha <98838967+Taha-Hassan-Git@users.noreply.github.com>
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b44b72fa4..5f24a75f5 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -122,6 +122,7 @@ export {
 	EditSubmenu,
 	ExportFileContentSubMenu,
 	ExtrasGroup,
+	HelpGroup,
 	MiscMenuGroup,
 	PreferencesGroup,
 	UndoRedoGroup,
@@ -410,7 +411,6 @@ export { exportAs, type TLExportType } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export {
 	defaultEditorAssetUrls,
-	getDefaultCdnBaseUrl,
 	setDefaultEditorAssetUrls,
 	type TLEditorAssetUrls,
 } from './lib/utils/static-assets/assetUrls'

commit 2d93a91d46c4ce3b67ce760376589f2ca4d398ce
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Thu Jul 18 14:55:48 2024 +0200

    Export default menu panel. (#4193)
    
    Export default menu panel.
    
    Resolves #3817
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Export the `DefaultMenuPanel`.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 5f24a75f5..abe46005a 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -94,6 +94,7 @@ export {
 	FeatureFlags,
 	type ExampleDialogProps,
 } from './lib/ui/components/DebugMenu/DefaultDebugMenuContent'
+export { DefaultMenuPanel } from './lib/ui/components/DefaultMenuPanel'
 export {
 	DefaultHelpMenu,
 	type TLUiHelpMenuProps,

commit c27d0d166f0fb55bd55eb8f64b5a9b9dcb2dcf7f
Author: Taha <98838967+Taha-Hassan-Git@users.noreply.github.com>
Date:   Tue Jul 23 13:40:05 2024 +0100

    Export helpers for image paste (#4258)
    
    exports createShapeForAssets and centerSelectionAroundPoint closes
    TLD-2212 #2808
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Test plan
    
    
    ### Release notes
    
    - Exports helpers for pasting external content.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index abe46005a..8137370d7 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -11,7 +11,11 @@ export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackgroun
 export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'
 export { TldrawShapeIndicators } from './lib/canvas/TldrawShapeIndicators'
 export { defaultBindingUtils } from './lib/defaultBindingUtils'
-export { type TLExternalContentProps } from './lib/defaultExternalContentHandlers'
+export {
+	centerSelectionAroundPoint,
+	createShapesForAssets,
+	type TLExternalContentProps,
+} from './lib/defaultExternalContentHandlers'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
 export { defaultTools } from './lib/defaultTools'

commit 0c77cf94a99d3c187e9567bb39e746a8b3ff1af0
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Jul 29 14:08:58 2024 +0100

    Add terms of use / privacy policy (#4308)
    
    This PR adds a terms of use and privacy policy page to tldraw.dev
    (weirdly, for tldraw.com). It also updates the readme for the dotcom
    project.
    
    Note that the because the documents are stored on GitHub, links to the
    documents will be broken until this PR lands.
    
    ### Change type
    
    - [x] `other`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8137370d7..b5a435782 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -127,7 +127,6 @@ export {
 	EditSubmenu,
 	ExportFileContentSubMenu,
 	ExtrasGroup,
-	HelpGroup,
 	MiscMenuGroup,
 	PreferencesGroup,
 	UndoRedoGroup,

commit 306c5c0204cfc3ed838b5f3378219a410d32b458
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Mon Jul 29 15:58:59 2024 +0100

    draw: fix dotted line rendering when zoomed out (#4261)
    
    Fixes https://github.com/tldraw/tldraw/issues/1995
    
    ### Change type
    
    - [x] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Draw: fix dotted line shape rendering when zoomed out greatly.
    
    ---------
    
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b5a435782..749a61273 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -48,7 +48,6 @@ export {
 	LABEL_FONT_SIZES,
 	TEXT_PROPS,
 } from './lib/shapes/shared/default-shape-constants'
-export { getPerfectDashProps } from './lib/shapes/shared/getPerfectDashProps'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
 export { useEditableText } from './lib/shapes/shared/useEditableText'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'

commit 20f0e6a28ad441253dcb688b4f51800930b50aca
Author: alex <alex@dytry.ch>
Date:   Wed Jul 31 12:14:04 2024 +0100

    Add missing bits to exploded example (#4323)
    
    We didn't have the default external content handlers or default side
    effects
    
    ### Change type
    
    - [x] `bugfix`
    
    ### Release notes
    
    - Expose `registerDefaultSideEffects` and
    `registerDefaultExternalContentHandler`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 749a61273..2af1926c4 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -14,10 +14,12 @@ export { defaultBindingUtils } from './lib/defaultBindingUtils'
 export {
 	centerSelectionAroundPoint,
 	createShapesForAssets,
+	registerDefaultExternalContentHandlers,
 	type TLExternalContentProps,
 } from './lib/defaultExternalContentHandlers'
 export { defaultShapeTools } from './lib/defaultShapeTools'
 export { defaultShapeUtils } from './lib/defaultShapeUtils'
+export { registerDefaultSideEffects } from './lib/defaultSideEffects'
 export { defaultTools } from './lib/defaultTools'
 export { ArrowShapeTool } from './lib/shapes/arrow/ArrowShapeTool'
 export { ArrowShapeUtil } from './lib/shapes/arrow/ArrowShapeUtil'

commit 9d3e0279b27b051ae214c8e4ec7d49ab021d4910
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Wed Jul 31 14:24:07 2024 +0200

    Export some missing components that are used in the `DefaultToolbar` (#4321)
    
    This exports some components that are used in the `DefaultToolbar`
    component. This will allow the users customize the existing Toolbar,
    while allowing them to reuse existing components instead of having to
    write their own.
    
    
    [Discussion](https://discord.com/channels/859816885297741824/1266843619072016496/1268015153199190126).
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Export `OverflowingToolbar` and `MobileStylePanel` panel components so
    they can be reused for building a custom `Toolbar`.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 2af1926c4..bfa5f6c48 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -134,6 +134,7 @@ export {
 	ViewSubmenu,
 } from './lib/ui/components/MainMenu/DefaultMainMenuContent'
 export { DefaultMinimap } from './lib/ui/components/Minimap/DefaultMinimap'
+export { MobileStylePanel } from './lib/ui/components/MobileStylePanel'
 export { DefaultNavigationPanel } from './lib/ui/components/NavigationPanel/DefaultNavigationPanel'
 export { OfflineIndicator } from './lib/ui/components/OfflineIndicator/OfflineIndicator'
 export { DefaultPageMenu } from './lib/ui/components/PageMenu/DefaultPageMenu'
@@ -204,6 +205,10 @@ export {
 	useIsToolSelected,
 	type ToolbarItemProps,
 } from './lib/ui/components/Toolbar/DefaultToolbarContent'
+export {
+	OverflowingToolbar,
+	type OverflowingToolbarProps,
+} from './lib/ui/components/Toolbar/OverflowingToolbar'
 export {
 	CenteredTopPanelContainer,
 	type CenteredTopPanelContainerProps,

commit 88f7b572e5f7f1075e73c4d56f9ab7994a5c1268
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Thu Aug 1 17:49:14 2024 +0100

    images: show ghost preview image whilst uploading (#3988)
    
    This adds feedback that an upload is happening, both for images and
    videos. For images, it creates a ghost image whilst uploading. For
    videos, it has the spinner (because creating the object blobs seems too
    memory heavy, but I could be convinced). The majority of the work was
    shifting `defaultExternalContentHandlers.ts` so that it's asynchronously
    creates the assets instead of synchronously when adding new assets.
    
    Also:
    - consolidated some asset creation logic around media, there was some
    duplication across the codebase
    - useMultiplayerAssets was unnecessary actually, got rid of it!
    
    Images:
    
    
    https://github.com/tldraw/tldraw/assets/469604/2633d7f1-121c-4d5f-8212-99bcd57a4ba9
    
    
    Videos:
    
    
    https://github.com/tldraw/tldraw/assets/469604/01cfa7b3-8863-45ab-b479-0a15683aa520
    
    Fixes https://github.com/tldraw/tldraw/issues/1567
    
    
    ### Change Type
    
    <!-- ‚ùó Please select a 'Scope' label ‚ùóÔ∏è -->
    
    - [x] `sdk` ‚Äî Changes the tldraw SDK
    - [ ] `dotcom` ‚Äî Changes the tldraw.com web app
    - [ ] `docs` ‚Äî Changes to the documentation, examples, or templates.
    - [ ] `vs code` ‚Äî Changes to the vscode plugin
    - [ ] `internal` ‚Äî Does not affect user-facing stuff
    
    <!-- ‚ùó Please select a 'Type' label ‚ùóÔ∏è -->
    
    - [ ] `bugfix` ‚Äî Bug fix
    - [ ] `feature` ‚Äî New feature
    - [x] `improvement` ‚Äî Improving existing features
    - [ ] `chore` ‚Äî Updating dependencies, other boring stuff
    - [ ] `galaxy brain` ‚Äî Architectural changes
    - [ ] `tests` ‚Äî Changes to any test code
    - [ ] `tools` ‚Äî Changes to infrastructure, CI, internal scripts,
    debugging tools, etc.
    - [ ] `dunno` ‚Äî I don't know
    
    
    ### Release Notes
    
    - Media: add image and video upload indicators.
    
    ---------
    
    Co-authored-by: alex <alex@dytry.ch>
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index bfa5f6c48..488370b91 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -13,6 +13,7 @@ export { TldrawShapeIndicators } from './lib/canvas/TldrawShapeIndicators'
 export { defaultBindingUtils } from './lib/defaultBindingUtils'
 export {
 	centerSelectionAroundPoint,
+	getMediaAssetInfoPartial as createMediaAssetInfoSkeleton,
 	createShapesForAssets,
 	registerDefaultExternalContentHandlers,
 	type TLExternalContentProps,

commit 18dd29e18730d4d97f693c6d124a46ed09685ec6
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Mon Aug 5 12:20:46 2024 +0100

    Disable Pages UI when maxPages === 1 (#4348)
    
    This PR makes it so that when you set `maxPages` to `1` it disables the
    UI related to pages
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Test plan
    
    1. Create a shape...
    2.
    
    - [ ] Unit tests
    - [ ] End to end tests
    
    ### Release notes
    
    - Make the page management UI disappear when maxPages is 1

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 488370b91..d0a1b7453 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -228,10 +228,12 @@ export {
 	ConvertToEmbedMenuItem,
 	CopyAsMenuGroup,
 	CopyMenuItem,
+	CursorChatItem,
 	CutMenuItem,
 	DeleteMenuItem,
 	DuplicateMenuItem,
 	EditLinkMenuItem,
+	EditMenuSubmenu,
 	FitFrameToContentMenuItem,
 	GroupMenuItem,
 	MoveToPageMenu,
@@ -391,6 +393,7 @@ export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
 export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
 export { useCopyAs } from './lib/ui/hooks/useCopyAs'
 export { useExportAs } from './lib/ui/hooks/useExportAs'
+export { useIsMultiplayer, useMultiplayerStatus } from './lib/ui/hooks/useIsMultiplayer'
 export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'

commit bc682a0536fb32b422654938ed53a4420880017a
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Aug 5 17:59:00 2024 +0100

    Rename `StoreOptions.multiplayerStatus` (#4349)
    
    This PR changes the name of `StoreOptions.multiplayerStatus` and a few
    related hooks.
    
    These APIs have been so far private, so I doubt anyone will run into
    this as a problem. This only came up when I saw that we were exporting
    the `useMultiplayerStatus` hooks.
    
    ## Naming things (hard?)
    
    We have a small naming crisis in our API. Originally, we'd used the term
    "multiplayer" for real-time collaboration, ie for the
    `MultiplayerEditor` component in the dot com app. We also used
    "collaboration" and "collaborators" in the SDK, e.g.
    `CollaboratorCursor`.
    
    With the tldraw sync release, we've blurred this a little into the API
    names. For example, the `useSync` hook was called `useMultiplayer`, but
    we've come up with `sync` as a product name for our own solution, while
    documenting real-time collaboration as just "collaboration".
    
    Thus, we have two names:
    
    1. For _general_ real-time collaboration, we use `collaboration`.
    2. For _tldraw sync_, we use `sync`.
    
    ...and we don't use "multiplayer" in our public APIs.
    
    (We should probably scrub multiplayer from our whole code-base, to avoid
    some confusion later on, but that's not this PR).
    
    ## Store options
    
    As part of tldraw sync, we decided to stash the remote connection status
    on the `Store`. We use this to decide whether to show the collaboration
    UI in the `Tldraw` component's UI, as well as to indicate the status of
    the connection. (This is useful for showing the offline indicator in a
    case where we _should_ be online but aren't).
    
    Previously, the `StoreOptions.multiplayerStatus` property communicated
    three things:
    
    1. if `null`, that the store wasn't supposed to be connected to a remote
    server
    2. if a signal, that the store _was_ supposed to be connected to a
    remote server
    3. if a signal, the `multiplayerStatus` was the current connection
    status of the socket
    
    In this PR, I've added `collaboration` as an object on the store
    options. It currently has one property, which is `status`.
    
    1. If left undefined, then the store is not supposed to be connected to
    a remote server.
    2. If defined, then the store is supposed to be connected to a remote
    server
    3. If defined, then `collaboration.status` has the signal that
    represents the connection status
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    
    - Renames `StoreOptions.multiplayerStatus` to
    `StoreOptions.collaboration.status`.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index d0a1b7453..1a9a4f93a 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -393,7 +393,7 @@ export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
 export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
 export { useCopyAs } from './lib/ui/hooks/useCopyAs'
 export { useExportAs } from './lib/ui/hooks/useExportAs'
-export { useIsMultiplayer, useMultiplayerStatus } from './lib/ui/hooks/useIsMultiplayer'
+export { useCollaborationStatus, useShowCollaborationUi } from './lib/ui/hooks/useIsMultiplayer'
 export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'

commit f69de729390864a9b44371fe475effb32c51108c
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Aug 5 18:47:43 2024 +0100

    Gracefully handle deleted tools & actions (remix) (#4345)
    
    This PR is an attempt to achieve the same goals of
    https://github.com/tldraw/tldraw/pull/4315 but through a different
    means.
    
    We introduce three new components: `TldrawUiMenuActionItem`,
    `TldrawUiMenuActionCheckboxItem`, and `TldrawUiMenuToolItem`. These
    accept `action` or `tool` ids as props and either return `null` if the
    associated action / tool is not found, or else return a
    `TldrawUiMenuItem`.
    
    This PR is additive / non-breaking. All of the existing uses of
    `TldrawUiMenuItem` still work‚Äîyou don't _have_ to use that component
    with an action or tool item‚Äîand I haven't changed its usage in places
    where it's not needed, such as in our examples.
    
    One thing that stands out if we want to solve this problem is that
    there's probably still some logic in the menus about when to show groups
    etc that would still be unaware that the action is missing.
    
    ### Change type
    
    - [x] `improvement`
    
    ### Test plan
    
    1. Delete an action from the actions schema. It should disappear from
    the context menu / actions menu.
    2. Delete a tool from the tools schema. It should disappear from the
    toolbar.
    
    ### Release notes
    
    - When deleting actions or tools using overrides, menu items are
    automatically removed.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 1a9a4f93a..3d9ff821f 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,18 @@
 /// <reference types="react" />
 
+export {
+	TldrawUiMenuActionCheckboxItem,
+	type TLUiMenuActionCheckboxItemProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuActionCheckboxItem'
+export {
+	TldrawUiMenuActionItem,
+	type TLUiMenuActionItemProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuActionItem'
+export {
+	TldrawUiMenuToolItem,
+	type TLUiMenuToolItemProps,
+} from './lib/ui/components/primitives/menus/TldrawUiMenuToolItem'
+
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw, type TLComponents, type TldrawBaseProps, type TldrawProps } from './lib/Tldraw'

commit b531f2ab9b92980928f112c76e6a6ca45f0ed6c9
Author: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
Date:   Wed Aug 7 16:16:03 2024 +0200

    Custom embeds API (#4326)
    
    Adds the ability to add your own custom embeds and also to disable some
    of the built in embeds. Also includes [an
    example](https://github.com/tldraw/tldraw/pull/4326/files#diff-3ff116d77a8ba1d316abbc94386266cf875ee34b4fc312e27f54d158849af572).
    
    Few use cases and how you can achieve them:
    * **Remove some (or all) of the built in embeds**: start with the
    `DEFAULT_EMBED_DEFINITIONS` and filter it down to just the ones you
    want. Then pass this to the `Tldraw` or `TldrawEditor` components.
    * **Add a new custom embed on top of the existing ones**: create a new
    `CustomEmbedDefinition` (or an array of them), now create a new array of
    `TLEmbedDefinition` by concatenating `DEFAULT_EMBED_DEFINITIONS` and
    your custom defintions. Pass this to the `Tldraw` or `TldrawEditor`
    components.
    * **Reorder the embeds**: pick the different definitions from
    `DEFAULT_EMBED_DEFINTIONS` and add them to a new array in the order you
    wish the embeds to be displayed. Pass this to the `Tldraw` or
    `TldrawEditor` components.
    * **Change the icon of an existing embed**: there's two options for
    this. 1. You can remove the embed from the `DEFAULT_EMBED_DEFINITIONS`
    then add a new `CustomEmbedDefition` that includes the `icon` field that
    points to the new icon. 2. You can override the asset url just for that
    embed.
    
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [x] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    Adds the ability to customize the embeds that are supported. You can now
    customize or reorder the existing embeds, as well as add completely new
    ones.
    
    ## Breaking changes
    * `EMBED_DEFINITIONS` has been renamed to `DEFAULT_EMBED_DEFINTIONS`
    * `matchEmbedUrl`, `matchUrl`, `getEmbedInfo`, `getEmbedInfoUnsafely`
    now also expect `readonly TLEmbedDefinition[]` as their first parameter.
    If you don't have any custom embeds you can pass in the
    `DEFAULT_EMBED_DEFINITIONS`.
    * `registerExternalContentHandler` and `putExternalContent` have an
    additional generic argument for specifying the type of the embeds that
    the content handle supports. Example on how to update
    [here](https://github.com/tldraw/tldraw/pull/4326/files#diff-51f3e244dba5247299a2153f96348efdca84e0e8fb8fe27cff4443dd9d8d4161R196).
    
    ---------
    
    Co-authored-by: David Sheldrick <d.j.sheldrick@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 3d9ff821f..fb495fde3 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -24,6 +24,15 @@ export { TldrawSelectionBackground } from './lib/canvas/TldrawSelectionBackgroun
 export { TldrawSelectionForeground } from './lib/canvas/TldrawSelectionForeground'
 export { TldrawShapeIndicators } from './lib/canvas/TldrawShapeIndicators'
 export { defaultBindingUtils } from './lib/defaultBindingUtils'
+export {
+	DEFAULT_EMBED_DEFINITIONS,
+	embedShapePermissionDefaults,
+	type CustomEmbedDefinition,
+	type DefaultEmbedDefinitionType,
+	type EmbedDefinition,
+	type TLEmbedDefinition,
+	type TLEmbedShapePermissions,
+} from './lib/defaultEmbedDefinitions'
 export {
 	centerSelectionAroundPoint,
 	getMediaAssetInfoPartial as createMediaAssetInfoSkeleton,

commit 822a54040c04570ebd2213166cfc1de5019e9dc2
Author: alex <alex@dytry.ch>
Date:   Wed Aug 21 10:01:56 2024 +0100

    Detect multiple installed versions of tldraw packages (#4398)
    
    There are two semi-common failure modes around people using tldraw:
    1. They upgrade 1 tldraw package, but not the other, resulting in having
    multiple versions of the same package running at once
    2. Their bundler is misconfigured, and pulls in both the commonjs and
    esmodule versions of their packages.
    
    This diff detects those cases and adds a warning message explaining the
    situation.
    
    As part of this, I added another check on packages in the same vein as
    check-scripts and check-packages. Rather than add another script and
    step on github, I merged the three of them into one file.
    
    ### Change type
    - [x] `api`
    
    ### Release notes
    
    - We detect when there are multiple versions of tldraw installed and let
    you know, as this can cause bugs in your application

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index fb495fde3..bc37f47fd 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,5 +1,6 @@
 /// <reference types="react" />
 
+import { registerTldrawLibraryVersion } from '@tldraw/editor'
 export {
 	TldrawUiMenuActionCheckboxItem,
 	type TLUiMenuActionCheckboxItemProps,
@@ -496,3 +497,9 @@ export {
 	type TldrawFile,
 	type TldrawFileParseError,
 } from './lib/utils/tldr/file'
+
+registerTldrawLibraryVersion(
+	(globalThis as any).TLDRAW_LIBRARY_NAME,
+	(globalThis as any).TLDRAW_LIBRARY_VERSION,
+	(globalThis as any).TLDRAW_LIBRARY_MODULES
+)

commit 7d81da31f4368656a9454107fd84be186d7a296c
Author: alex <alex@dytry.ch>
Date:   Tue Sep 24 11:22:11 2024 +0100

    publish useAsset, tweak docs (#4590)
    
    This was hidden and some of the docs around it were out of date.
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    - Publish the `useAsset` media asset helper

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index bc37f47fd..b215a9a3c 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -74,6 +74,7 @@ export {
 	LABEL_FONT_SIZES,
 	TEXT_PROPS,
 } from './lib/shapes/shared/default-shape-constants'
+export { useAsset } from './lib/shapes/shared/useAsset'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
 export { useEditableText } from './lib/shapes/shared/useEditableText'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'

commit 09f89a60f403ff704c1372eff9fecba6cd5ce361
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Sep 30 16:27:45 2024 -0400

    [dotcom] Menus, dialogs, toasts, etc. (#4624)
    
    This PR brings tldraw's ui into the application layer: dialogs, menus,
    etc.
    
    It:
    - brings our dialogs to the application layer
    - brings our toasts to the application layer
    - brings our translations to the application layer
    - brings our assets to the application layer
    - creates a "file menu"
    - creates a "rename file" dialog
    - creates the UI for changing the title of a file in the header
    - adjusts some text sizes
    
    In order to do that, I've had to:
    - create a global `tlmenus` system for menus
    - create a global `tltime` system for timers
    - create a global `tlenv` for environment"
    - create a `useMaybeEditor` hook
    
    ### Change type
    
    - [x] `other`
    
    ### Release notes
    - exports dialogs system
    - exports toasts system
    - exports translations system
    - create a global `tlmenus` system for menus
    - create a global `tltime` system for timers
    - create a global `tlenv` for environment"
    - create a `useMaybeEditor` hook
    
    ---------
    
    Co-authored-by: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b215a9a3c..eba9cd6d5 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,6 +1,8 @@
 /// <reference types="react" />
 
 import { registerTldrawLibraryVersion } from '@tldraw/editor'
+export { TldrawUiDialogs } from './lib/ui/components/Dialogs'
+export { TldrawUiToasts } from './lib/ui/components/Toasts'
 export {
 	TldrawUiMenuActionCheckboxItem,
 	type TLUiMenuActionCheckboxItemProps,
@@ -13,7 +15,9 @@ export {
 	TldrawUiMenuToolItem,
 	type TLUiMenuToolItemProps,
 } from './lib/ui/components/primitives/menus/TldrawUiMenuToolItem'
-
+export { TldrawUiDialogsProvider, type TLUiDialogsProviderProps } from './lib/ui/context/dialogs'
+export { TldrawUiToastsProvider, type TLUiToastsProviderProps } from './lib/ui/context/toasts'
+export { TldrawUiTranslationProvider } from './lib/ui/hooks/useTranslation/useTranslation'
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
 export { Tldraw, type TLComponents, type TldrawBaseProps, type TldrawProps } from './lib/Tldraw'
@@ -352,7 +356,7 @@ export {
 export {
 	TldrawUiMenuContextProvider,
 	type TLUiMenuContextProviderProps,
-	type TldrawUiMenuContextType,
+	type TLUiMenuContextType,
 } from './lib/ui/components/primitives/menus/TldrawUiMenuContext'
 export {
 	TldrawUiMenuGroup,
@@ -369,7 +373,7 @@ export {
 export { PORTRAIT_BREAKPOINT } from './lib/ui/constants'
 export {
 	TldrawUiContextProvider,
-	type TldrawUiContextProviderProps,
+	type TLUiContextProviderProps,
 } from './lib/ui/context/TldrawUiContextProvider'
 export {
 	unwrapLabel,
@@ -397,7 +401,7 @@ export {
 	type TLUiDialogsContextType,
 } from './lib/ui/context/dialogs'
 export {
-	UiEventsProvider,
+	TldrawUiEventsProvider,
 	useUiEvents,
 	type EventsProviderProps,
 	type TLUiEventContextType,

commit 29d7ecaa7c0d2bc67190f20efd5c1ba47305ce14
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Sat Oct 12 16:12:12 2024 +0100

    lod: memoize media assets so that zoom level doesn't re-render constantly (#4659)
    
    Related to a discussion on Discord:
    https://discord.com/channels/859816885297741824/1290992999186169898/1291681011758792756
    
    This works to memoize the rendering of the core part of the image/video
    react components b/c the `useValue` hook inside `useAsset` is called so
    often. If there's a better way to do this @SomeHats I'm all ears!
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Improve performance of image/video rendering.
    
    ---------
    
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index eba9cd6d5..21a229ce3 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -78,9 +78,10 @@ export {
 	LABEL_FONT_SIZES,
 	TEXT_PROPS,
 } from './lib/shapes/shared/default-shape-constants'
-export { useAsset } from './lib/shapes/shared/useAsset'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
 export { useEditableText } from './lib/shapes/shared/useEditableText'
+// eslint-disable-next-line deprecation/deprecation
+export { useAsset, useImageOrVideoAsset } from './lib/shapes/shared/useImageOrVideoAsset'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'

commit b301aeb64e5ff7bcd55928d7200a39092da8c501
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Wed Oct 23 15:55:42 2024 +0100

    npm: upgrade eslint v8 ‚Üí v9 (#4757)
    
    As I worked on the i18n PR (https://github.com/tldraw/tldraw/pull/4719)
    I noticed that `react-intl` required a new version of `eslint`. That led
    me down a bit of a rabbit hole of upgrading v8 ‚Üí v9. There were a couple
    things to upgrade to make this work.
    
    - ran `npx @eslint/migrate-config .eslintrc.js` to upgrade to the new
    `eslint.config.mjs`
    - `.eslintignore` is now deprecated and part of `eslint.config.mjs`
    - some packages are no longer relevant, of note: `eslint-plugin-local`
    and `eslint-plugin-deprecation`
    - the upgrade caught a couple bugs/dead code
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Upgrade eslint v8 ‚Üí v9
    
    ---------
    
    Co-authored-by: alex <alex@dytry.ch>
    Co-authored-by: David Sheldrick <d.j.sheldrick@gmail.com>
    Co-authored-by: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 21a229ce3..eb2d43a92 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -80,7 +80,6 @@ export {
 } from './lib/shapes/shared/default-shape-constants'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
 export { useEditableText } from './lib/shapes/shared/useEditableText'
-// eslint-disable-next-line deprecation/deprecation
 export { useAsset, useImageOrVideoAsset } from './lib/shapes/shared/useImageOrVideoAsset'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'

commit 852a8cd32041969b1447b03350605d33960c77bb
Author: Judicael <46365844+judicaelandria@users.noreply.github.com>
Date:   Mon Nov 18 17:44:21 2024 +0300

    chore(api): expose font sizes, stroke sizes api (#4940)
    
    Describe what your pull request does. If you can, add GIFs or images
    showing the before and after of your change.
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Test plan
    
    No test needed IMO
    
    ### Release notes
    
    - Expose `ARROW_LABEL_FONT_SIZES`, `STROKE_SIZES`, `FONT_SIZES`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index eb2d43a92..c940ee340 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -74,8 +74,11 @@ export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
 export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
 export {
+	ARROW_LABEL_FONT_SIZES,
 	FONT_FAMILIES,
+	FONT_SIZES,
 	LABEL_FONT_SIZES,
+	STROKE_SIZES,
 	TEXT_PROPS,
 } from './lib/shapes/shared/default-shape-constants'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'

commit 5bcd5873e53853dbf0603292f2a3aadca23aa3db
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Nov 25 17:12:29 2024 +0000

    [botcom] Pre-launch design / UX pass (#4984)
    
    Are you ready to go? I'm ready to go! This PR does a few design and UX
    changes ahead of the launch.
    
    Logged out, root page
    
    <img width="1241" alt="Screenshot 2024-11-24 at 21 05 17"
    src="https://github.com/user-attachments/assets/b4b0dea7-5140-417e-b9fd-986a571eeaba">
    
    Logged out, published page
    
    <img width="1241" alt="image"
    src="https://github.com/user-attachments/assets/fb7435b4-9713-43c8-991d-e6db60f18237">
    
    Logged out, file page
    
    <img width="1241" alt="Screenshot 2024-11-24 at 21 05 59"
    src="https://github.com/user-attachments/assets/afebe371-8808-400a-bac8-d5055cf53698">
    
    Logged in, file page
    
    <img width="1241" alt="Screenshot 2024-11-24 at 21 01 05"
    src="https://github.com/user-attachments/assets/1da95e8d-e000-4fab-95c4-1beb58ea372c">
    
    Logged in, guest file
    
    <img width="1241" alt="Screenshot 2024-11-24 at 21 02 33"
    src="https://github.com/user-attachments/assets/2a5a3ff5-11e1-46db-af2d-7d3ac9eb3778">
    
    Logged in, published file
    
    <img width="1241" alt="Screenshot 2024-11-24 at 21 03 26"
    src="https://github.com/user-attachments/assets/d832775e-ac55-43a4-8f93-35e1793a92a7">
    
    
    ### General sidebar / editor
    - parts sidebar components into their own files
    - cleans up some weird props in sidebar items
    - fixes spacing in the "workspace header"
    - fixes spacing in the file editor top left
    - fix icon weight difference in file editor top left
    - set mobile sidebar width to max(220px, 100%-100px)
    - animate desktop sidebar open/close
    - move menu items into the file menu (except for app-level things)
    - adds sidebar items to menu for logged out users
    - adds sign in to menu for logged out users
    - adds shortcut (Cmd + \) to toggle sidebar on desktop
    
    <img width="1241" alt="Screenshot 2024-11-24 at 21 03 43"
    src="https://github.com/user-attachments/assets/5e32019b-ef7f-457a-9d76-c94710e8c832">
    
    <img width="577" alt="image"
    src="https://github.com/user-attachments/assets/426b718d-d788-4503-bcdb-d5d1ce269e92">
    
    
    ### Anon layout
    - redesign anonymous layout
    - remove share menu / export options from anon pages
    
    ### Publish menu
    - redesign share menu for published projects
    
    ### Guest file
    - adds a temporary "collaborator" in sidebar for guest files
    - fix a bug where a user could edit the name of a file they don't own
    
    ### Creating too many pages
    - adds 1s timeout for creating new files
    
    ### Published file
    - fix document name in published files
    
    ### Sidebar user link
    - moved editor-related preferences into the editor
    - extracted the theme and language (they appear in both menus)
    
    <img width="417" alt="image"
    src="https://github.com/user-attachments/assets/550dcbbe-7b3a-46e4-b29a-d1ceff313b11">
    
    ### useMsg
    
    Add a `useMsg` hook that calls `useIntl().formatMessage`.
    
    ### Playground
    - creates a very small playground route where we can view components in
    different states. I don't like committing to this kind of storybook
    style documentation, so let's just use this when needed.
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [x] `other`
    
    ---------
    
    Co-authored-by: Mitja Bezen≈°ek <mitja.bezensek@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index c940ee340..e6c11c14a 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,6 +1,7 @@
 /// <reference types="react" />
 
 import { registerTldrawLibraryVersion } from '@tldraw/editor'
+export { ColorSchemeMenu } from './lib/ui/components/ColorSchemeMenu'
 export { TldrawUiDialogs } from './lib/ui/components/Dialogs'
 export { TldrawUiToasts } from './lib/ui/components/Toasts'
 export {
@@ -275,10 +276,12 @@ export {
 	SelectAllMenuItem,
 	ToggleAutoSizeMenuItem,
 	ToggleDebugModeItem,
+	ToggleDynamicSizeModeItem,
 	ToggleEdgeScrollingItem,
 	ToggleFocusModeItem,
 	ToggleGridItem,
 	ToggleLockMenuItem,
+	TogglePasteAtCursorItem,
 	ToggleReduceMotionItem,
 	ToggleSnapModeItem,
 	ToggleToolLockItem,

commit 383dfd14bf861c10cab82f6887cabc8b3f5343f9
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Dec 20 18:10:42 2024 +0000

    Reduce snow motion (#5148)
    
    Remove snow when reduce motion is on
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [x] `other`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index e6c11c14a..e8d34f865 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -1,6 +1,7 @@
 /// <reference types="react" />
 
 import { registerTldrawLibraryVersion } from '@tldraw/editor'
+export { usePrefersReducedMotion } from './lib/shapes/shared/usePrefersReducedMotion'
 export { ColorSchemeMenu } from './lib/ui/components/ColorSchemeMenu'
 export { TldrawUiDialogs } from './lib/ui/components/Dialogs'
 export { TldrawUiToasts } from './lib/ui/components/Toasts'

commit 5ed55f12f0508edec34292d7c1bdd08b4e8c21a1
Author: alex <alex@dytry.ch>
Date:   Mon Jan 20 18:19:00 2025 +0000

    Exports DX pass (#5114)
    
    Over the last few weeks we've had a lot of requests on discord around
    asset resolution, exports, and the two together. Some of the APIs here
    have evolved and change independently of each other over time, so I
    wanted to take a pass at making them make sense with each other a bit
    more. There are a few things going on in this diff:
    
    1. **BREAKING** The export/copy-as JSON option has been removed. I think
    this was only ever there as a debug helper, and it's impossible to
    actually make use of the JSON once copied (it's not the same as .tldr
    json which confuses people).
    2. `exportToBlob` is deprecated in favour of a new `Editor.toImage`
    method. `exportToBlob` has been the canonical 'turn the canvas into an
    image' helper for a while, but it has quite a weird looking signature
    and isn't very discoverable.
    3. the `copyAs` and `exportAs` helpers have had a couple of args merged
    into the options bag for consistency.
    4. The `jpeg` format has been removed from `copyAs`. This is technically
    a breaking API change, but since it never actually worked anyway due to
    browser limitations i think its fine.
    5. SVG exports now resolve assets according to how they'll be used:
    - if it's for an SVG, we still use the existing
    `shouldResolveToOriginal` behaviour
    - if it's for a bitmap export, we request an image downscaled according
    to the size it will appear in that resulting bitmap.
    6. Better reference docs for several APIs around this stuff.
    7. **BREAKING** the `useImageOrVideoAsset` hook now requires passing in
    `width`, instead of reading `shape.props.w`. This is so it can be used
    with shapes other than our own. Whilst this is technically a breaking
    change, this limitation means its unlikely that it was used with many
    custom shapes in practice.
    8. The clamping that we used to apply in to `steppedScreenScale` in
    `resolveAssetUrl` has been moved to our own implementations of
    `TLAssetStore`. This is so implementors can make their own decisions
    about the range of scalings they might want to use.
    9. The `steppedScreenScale` limit changed from 1/8 to 1/32. This is
    because when testing with full res photos from a modern smartphone, we
    were still downloading a 1000+px image in order to render it at a few
    hundred px across (and also we don't pay anything for these right now).
    Happy to change now/in the future if this doesn't seem right though.
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    
    #### Breaking changes / user facing changes
    - The copy/export as JSON option has been removed. Data copied/exported
    from here could not be used anyway. If you need this in your app, look
    into `Editor.getContentFromCurrentPage`.
    - `useImageOrVideoAssetUrl` now expects a `width` parameter representing
    the rendered width of the asset.
    - `Editor.getSvgElement` and `Editor.getSvgString` will now export all
    shapes on the current page instead of returning undefined when passed an
    empty array of shape ids.
    
    #### Product improvement
    - When exporting to an image, image assets are now downloaded at a
    resolution appropriate for how they will appear in the export.
    
    #### API changes
    - There's a new `Editor.toImage` method that makes creating an image
    from your canvas easier. (`exportToBlob` is deprecated in favour of it)
    - `SvgExportContext` now exposes the `scale` and `pixelRatio` options of
    the current export
    - `SvgExportContext` now has a `resolveAssetUrl` method to resolve an
    asset at a resolution appropriate for the export.
    - `copyAs(editor, ids, format, opts)` has been deprecated in favour of
    `copyAs(editor, ids, opts)`.
    - `exportAs(editor, ids, format, name, opts)` has been deprecated in
    favour of `exportAs(editor, ids, opts)`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index e8d34f865..b9c612795 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -85,7 +85,11 @@ export {
 } from './lib/shapes/shared/default-shape-constants'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
 export { useEditableText } from './lib/shapes/shared/useEditableText'
-export { useAsset, useImageOrVideoAsset } from './lib/shapes/shared/useImageOrVideoAsset'
+export {
+	useAsset,
+	useImageOrVideoAsset,
+	type UseImageOrVideoAssetOptions,
+} from './lib/shapes/shared/useImageOrVideoAsset'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
@@ -454,9 +458,9 @@ export { useDefaultHelpers, type TLUiOverrideHelpers, type TLUiOverrides } from
 export { containBoxSize, downsizeImage, type BoxWidthHeight } from './lib/utils/assets/assets'
 export { preloadFont, type TLTypeFace } from './lib/utils/assets/preload-font'
 export { getEmbedInfo, type TLEmbedResult } from './lib/utils/embeds/embeds'
-export { copyAs, type TLCopyType } from './lib/utils/export/copyAs'
-export { exportToBlob, getSvgAsImage } from './lib/utils/export/export'
-export { exportAs, type TLExportType } from './lib/utils/export/exportAs'
+export { copyAs, type CopyAsOptions, type TLCopyType } from './lib/utils/export/copyAs'
+export { exportToBlob } from './lib/utils/export/export'
+export { exportAs, type ExportAsOptions } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export {
 	defaultEditorAssetUrls,

commit 16f08007a19e63e3fab31265a8730a1578ecedf3
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Thu Jan 23 09:36:06 2025 +0000

    Welcome dialog for preview users (#5263)
    
    - for new users we show a welcome dialog that says
      - this is a preview
      - log out to get back to the old experience
    - (if they have content in indexeddb) would you like us to slurp your
    local data
    
    - add an option for dialogs to prevent clicking the background to
    dismiss
    - refactor the dialog/toasts system to not duplicate UI/context,
    allowing people to implement their own dialog/toast ui wherever they
    want. I think this is what steve originally wanted to do back when tla
    first landed. This was necessary to get a full-screen dialog with the
    useDialogs() hook and it just makes a lot more sense in general.
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    
    - Breaking SDK Changes
      - TldrawUiToasts renamed to DefaultToasts
      - TldrawUiDialogs renamed to DefaultDialogs
    - New SDK stuff
      - Toasts overridable component added
      - Dialogs overridable component added

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b9c612795..fd446fd6f 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -3,8 +3,8 @@
 import { registerTldrawLibraryVersion } from '@tldraw/editor'
 export { usePrefersReducedMotion } from './lib/shapes/shared/usePrefersReducedMotion'
 export { ColorSchemeMenu } from './lib/ui/components/ColorSchemeMenu'
-export { TldrawUiDialogs } from './lib/ui/components/Dialogs'
-export { TldrawUiToasts } from './lib/ui/components/Toasts'
+export { DefaultDialogs } from './lib/ui/components/Dialogs'
+export { DefaultToasts } from './lib/ui/components/Toasts'
 export {
 	TldrawUiMenuActionCheckboxItem,
 	type TLUiMenuActionCheckboxItemProps,

commit 7a17cab026a311d76361825f446407b0e330597c
Author: Trygve Aaberge <trygve.aaberge@autodesk.com>
Date:   Tue Jan 28 11:42:43 2025 +0100

    Add an onCrop handler to ShapeUtil (#5137)
    
    This is called when cropping and allows you to override the crop
    calculations. This is useful for instance to set a min width and/or
    height for the cropping.
    
    It can also be used to provide a completely different cropping
    mechanism, e.g. to keep the size of the shape fixed and instead resize
    the image when cropping. This would require overriding the
    SelectionForeground component, but it's better to only have to override
    that than the whole selection tool. And maybe that component can be made
    more dynamic in the future.
    
    This also defines specific crop interfaces instead of using the ones
    from the image shape and uses the correct util instead of the image util
    when cropping. Any shape can define that it supports cropping, so I
    don't think it should be tied to the image shape.
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Test plan
    
    1. Add an onCrop handler to a util for a shape that can be cropped.
    1. Create a shape with a crop prop.
    2. Try to crop the shape and see that the behavior in onCrop is applied.
    
    - [x] Unit tests
    - [ ] End to end tests
    
    ### Release notes
    
    - Add support for an onCrop handler on shape utils that allows you to
    prevent or modify the crop.
    - The `TLImageShapeCrop` type has been replaced by `TLShapeCrop`.
    
    ---------
    
    Co-authored-by: Mime ƒåuvalo <mimecuvalo@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index fd446fd6f..8085aea94 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -75,6 +75,7 @@ export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
 export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
+export { getCropBox, getDefaultCrop, type CropBoxOptions } from './lib/shapes/shared/crop'
 export {
 	ARROW_LABEL_FONT_SIZES,
 	FONT_FAMILIES,

commit 276d0a73fb26c8ba9fdb0e07b5d208ca58caf699
Author: Trygve Aaberge <trygve.aaberge@autodesk.com>
Date:   Tue Jan 28 15:57:16 2025 +0100

    Use the uncropped width when requesting an image shape asset (#5300)
    
    This fixes an issue where the more you cropped an image, the lower scale
    the image would be resolved to. However, when cropping the image is
    still rendered at the same size, it just shows only a part of the image.
    Therefore use the uncropped size when resolving the asset instead, so it
    keeps the correct scale.
    
    Fixes #5299
    
    ### Change type
    
    - [x] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Test plan
    
    1. Have an asset store that scales assets
    2. Create an image shape
    3. Crop the image
    4. Observe that the more you crop the image, the lower scale it gets
    
    - [ ] Unit tests
    - [ ] End to end tests
    
    ### Release notes
    
    - Fixed a bug where a cropped image would use lower scaled assets the
    more it was cropped.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 8085aea94..b5b5e07d0 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -75,7 +75,12 @@ export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
 export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
-export { getCropBox, getDefaultCrop, type CropBoxOptions } from './lib/shapes/shared/crop'
+export {
+	getCropBox,
+	getDefaultCrop,
+	getUncroppedSize,
+	type CropBoxOptions,
+} from './lib/shapes/shared/crop'
 export {
 	ARROW_LABEL_FONT_SIZES,
 	FONT_FAMILIES,

commit 9b13f6b7554c52facf2bd81ce1377ec57a397944
Author: alex <alex@dytry.ch>
Date:   Thu Jan 30 10:34:05 2025 +0000

    separately export default external content/asset handlers (#5298)
    
    Currently, if you want to e.g. augment but not override one of our
    default content handlers (e.g. to add audio file support to pasting),
    you have to copy-paste the entirety of that handler into your app. This
    kind of sucks. Now, you can call our default handlers yourself, so you
    can augment how they work without having to completely re-implement
    them.
    
    For reviewers: it's easiest to read this diff with [whitespace changed
    hidden](https://github.com/tldraw/tldraw/pull/5298/files?diff=split&w=1#diff-51f3e244dba5247299a2153f96348efdca84e0e8fb8fe27cff4443dd9d8d4161)
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    
    - You can now import each of our external asset/content handlers, so you
    can augment them without having to copy-paste them into your app
    
    #### BREAKING
    - `TLExternalAssetContent` has been renamed to `TLExternalAsset`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index b5b5e07d0..c5f90fbd1 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -41,10 +41,21 @@ export {
 	type TLEmbedShapePermissions,
 } from './lib/defaultEmbedDefinitions'
 export {
+	DEFAULT_MAX_ASSET_SIZE,
+	DEFAULT_MAX_IMAGE_DIMENSION,
 	centerSelectionAroundPoint,
-	getMediaAssetInfoPartial as createMediaAssetInfoSkeleton,
+	createEmptyBookmarkShape,
 	createShapesForAssets,
+	defaultHandleExternalEmbedContent,
+	defaultHandleExternalFileAsset,
+	defaultHandleExternalFileContent,
+	defaultHandleExternalSvgTextContent,
+	defaultHandleExternalTextContent,
+	defaultHandleExternalUrlAsset,
+	defaultHandleExternalUrlContent,
+	getMediaAssetInfoPartial,
 	registerDefaultExternalContentHandlers,
+	type TLDefaultExternalContentHandlerOpts,
 	type TLExternalContentProps,
 } from './lib/defaultExternalContentHandlers'
 export { defaultShapeTools } from './lib/defaultShapeTools'

commit 8792d999aa74842b2d392833662bea5be77988e8
Author: David Sheldrick <d.j.sheldrick@gmail.com>
Date:   Fri Feb 7 14:46:50 2025 +0000

    Improve published file experience (#5371)
    
    This is by no means a perfect solution, but it's a lot better than the
    current situation for logged in users, which is bad mainly because it
    shows the sidebar. Showing the sidebar for published files:
    
    - fails to give the file owner a sense of how other people will see the
    published version
    - prevents the viewer from really _feeling_ how published files are
    different
    - puts the sidebar in a confusing navigational state where nothing is
    selected
    
    With this PR
    
    1. Logged in users see the 'anonymous' view (no sidebar) but with a
    share button instead of the sign in button.
    2. Logged in users also get a 'copy to my files' affordance in the three
    dots menu.
    3. We replace the 'Save a copy' menu item (which opens the file picker)
    with a 'Download file' menu item (which downloads straight to the
    downloads folder).
    4. Clicking the tldraw logo takes you back to the main app view
    
    I think there's still a lot of room for improvement here, but this feels
    like a quick win to land ahead of launch
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index c5f90fbd1..92001f62b 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -477,7 +477,7 @@ export { preloadFont, type TLTypeFace } from './lib/utils/assets/preload-font'
 export { getEmbedInfo, type TLEmbedResult } from './lib/utils/embeds/embeds'
 export { copyAs, type CopyAsOptions, type TLCopyType } from './lib/utils/export/copyAs'
 export { exportToBlob } from './lib/utils/export/export'
-export { exportAs, type ExportAsOptions } from './lib/utils/export/exportAs'
+export { downloadFile, exportAs, type ExportAsOptions } from './lib/utils/export/exportAs'
 export { fitFrameToContent, removeFrame } from './lib/utils/frames/frames'
 export {
 	defaultEditorAssetUrls,

commit 3f23e0d4c9138d22cc842f1f8df7fec0dec383ca
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Fri Feb 7 19:42:24 2025 +0000

    Shape options (#5349)
    
    This PR moves shape-specific options into shape utils as static objects.
    
    I'd initially added shape options to the `options` prop, however like
    many other options, they aren't really options to the editor.
    
    By comparison, adding static options to shape utils is less discoverable
    but easier to scale and document.
    
    The only negative that I can think of, apart from discoverability, is
    that static changes like this effect all editors. This probably doesn't
    matter: I can't imagine a single app with two editors, one of which
    allows notes to resize and the other which does not.
    
    ```tsx
    import { NoteShapeUtil, Tldraw } from 'tldraw'
    import 'tldraw/tldraw.css'
    
    NoteShapeUtil.options.resizeMode = 'scale'
    
    export default function ResizeNoteExample() {
            return (
                    <>
                            <div className="tldraw__editor">
                                    <Tldraw persistenceKey="resize-note"></Tldraw>
                            </div>
                    </>
            )
    }
    ```
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Release Notes
    - introduces shape options
    - moves (unreleased) `noteShapeResizeMode` to
    `NoteShapeOptions.resizeMode`
    - moves `maxDrawShapePoints` to `DrawShapeOptions.maxPoints`
    - adds `maxPoints` to `HighlightShapeOptions.maxPoints`
    - üí• breaking change if someone was using `options.maxDrawShapePoints`.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 92001f62b..5e123ab43 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -72,19 +72,22 @@ export {
 } from './lib/shapes/arrow/shared'
 export { BookmarkShapeUtil } from './lib/shapes/bookmark/BookmarkShapeUtil'
 export { DrawShapeTool } from './lib/shapes/draw/DrawShapeTool'
-export { DrawShapeUtil } from './lib/shapes/draw/DrawShapeUtil'
+export { DrawShapeUtil, type DrawShapeOptions } from './lib/shapes/draw/DrawShapeUtil'
 export { EmbedShapeUtil } from './lib/shapes/embed/EmbedShapeUtil'
 export { FrameShapeTool } from './lib/shapes/frame/FrameShapeTool'
 export { FrameShapeUtil } from './lib/shapes/frame/FrameShapeUtil'
 export { GeoShapeTool } from './lib/shapes/geo/GeoShapeTool'
 export { GeoShapeUtil } from './lib/shapes/geo/GeoShapeUtil'
 export { HighlightShapeTool } from './lib/shapes/highlight/HighlightShapeTool'
-export { HighlightShapeUtil } from './lib/shapes/highlight/HighlightShapeUtil'
+export {
+	HighlightShapeUtil,
+	type HighlightShapeOptions,
+} from './lib/shapes/highlight/HighlightShapeUtil'
 export { ImageShapeUtil } from './lib/shapes/image/ImageShapeUtil'
 export { LineShapeTool } from './lib/shapes/line/LineShapeTool'
 export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
-export { NoteShapeUtil } from './lib/shapes/note/NoteShapeUtil'
+export { NoteShapeUtil, type NoteShapeOptions } from './lib/shapes/note/NoteShapeUtil'
 export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
 export {
 	getCropBox,

commit d14754ca7629205953c00615b2524286a2ec5353
Author: alex <alex@dytry.ch>
Date:   Wed Feb 12 13:53:55 2025 +0000

    Add tldraw and excalidraw to external content types (#5402)
    
    Almost all paste operations currently turn into calls to
    `putExternalContent`, which means they can be customized using
    `registerExternalContentHandler`. tldraw and excalidraw content are
    different: they're handled directly in the clipboard code, and so can't
    be customized.
    
    This diff changes that: these types now have external content handlers,
    and default implementations for how they work. We also add an example
    demonstrating how you can use this API to override pasting of e.g.
    single frame shapes to match how figma handles these (finding a space
    for them instead of pasting them in place).
    
    ### Change type
    
    - [x] `api`
    
    ### Release notes
    
    - You can now customize how pasted tldraw and excalidraw content is
    handled with `registerExternalContentHandler`.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 5e123ab43..abd19d0b6 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -47,10 +47,12 @@ export {
 	createEmptyBookmarkShape,
 	createShapesForAssets,
 	defaultHandleExternalEmbedContent,
+	defaultHandleExternalExcalidrawContent,
 	defaultHandleExternalFileAsset,
 	defaultHandleExternalFileContent,
 	defaultHandleExternalSvgTextContent,
 	defaultHandleExternalTextContent,
+	defaultHandleExternalTldrawContent,
 	defaultHandleExternalUrlAsset,
 	defaultHandleExternalUrlContent,
 	getMediaAssetInfoPartial,
@@ -478,6 +480,7 @@ export { useDefaultHelpers, type TLUiOverrideHelpers, type TLUiOverrides } from
 export { containBoxSize, downsizeImage, type BoxWidthHeight } from './lib/utils/assets/assets'
 export { preloadFont, type TLTypeFace } from './lib/utils/assets/preload-font'
 export { getEmbedInfo, type TLEmbedResult } from './lib/utils/embeds/embeds'
+export { putExcalidrawContent } from './lib/utils/excalidraw/putExcalidrawContent'
 export { copyAs, type CopyAsOptions, type TLCopyType } from './lib/utils/export/copyAs'
 export { exportToBlob } from './lib/utils/export/export'
 export { downloadFile, exportAs, type ExportAsOptions } from './lib/utils/export/exportAs'

commit d799df28e99e17bb71d1ab198f7c910fc3987a88
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Tue Feb 25 14:17:56 2025 +0000

    Fix text padding, add context to shape geometry (#5487)
    
    Long have we suffered from this:
    
    <img width="630" alt="image"
    src="https://github.com/user-attachments/assets/6675d2be-09e4-4f08-8d1b-5c30ec8ff2c5"
    />
    
    Text has no horizontal padding. We've tried adding horizontal padding
    before (see #1084, #2855) however we always ran into a circular problem.
    
    - Adding horizontal text padding makes arrows look better
    - ...but then it runs alignment / snapping / selection
    - ...and it makes text move around
    
    
    ![image](https://github.com/user-attachments/assets/ab12d896-d5df-486b-aca8-19170cae781b)
    
    What do we really want? **Contextual geometry**.
    
    ![Kapture 2025-02-24 at 15 42
    22](https://github.com/user-attachments/assets/84e4c2b9-3688-410c-ae3f-e386d5fd8b6c)
    
    If I'm creating arrow info, I might want a different geometry than if
    I'm snapping or aligning.
    
    **Pros:**
    
     - Additive API, no other changes
     - No migrations needed
     - Opens the door for other contextual geometries
    - Might be useful also for lines, highlighters, draw shapes, and other
    shapes
    
    **Cons**
    
    - More geometries cached (ie any shape that I've ever pointed an arrow
    to)
    
    ### Change type
    
    - [x] `improvement`
    - [x] `api`
    
    ### Test plan
    
    1. Create a text shape
    2. Make a horizontal arrow pointing from the text shape to something
    else
    
    ### Release notes
    
    - Improved horizontal padding for arrows bound to text shapes

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index abd19d0b6..d9dc7dc75 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -113,7 +113,7 @@ export {
 	type UseImageOrVideoAssetOptions,
 } from './lib/shapes/shared/useImageOrVideoAsset'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
-export { TextShapeUtil } from './lib/shapes/text/TextShapeUtil'
+export { TextShapeUtil, type TextShapeOptions } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
 export { type StyleValuesForUi } from './lib/styles'
 export { EraserTool } from './lib/tools/EraserTool/EraserTool'

commit 3bf31007c5a7274f3f7926a84c96c89a4cc2c278
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Mon Mar 3 14:23:09 2025 +0000

    [feature] add rich text and contextual toolbar (#4895)
    
    We're looking to add rich text to the editor!
    
    We originally started with ProseMirror but it became quickly clear that
    since it's more down-to-the-metal we'd have to rebuild a bunch of
    functionality, effectively managing a rich text editor in addition to a
    2D canvas. Examples of this include behaviors around lists where people
    expect certain behaviors around combination of lists next to each other,
    tabbing, etc.
    On top of those product expectations, we'd need to provide a
    higher-level API that provided better DX around things like
    transactions, switching between lists‚Üîheaders, and more.
    
    Given those considerations, a very natural fit was to use TipTap. Much
    like tldraw, they provide a great experience around manipulating a rich
    text editor. And, we want to pass on those product/DX benefits
    downstream to our SDK users.
    
    Some high-level notes:
    - the data is stored as the TipTap stringified JSON, it's lightly
    validated at the moment, but not stringently.
    - there was originally going to be a short-circuit path for plaintext
    but it ended up being error-prone with richtext/plaintext living
    side-by-side. (this meant there were two separate fields)
    - We could still add a way to render faster ‚Äî I just want to avoid it
    being two separate fields, too many footguns.
    - things like arrow labels are only plain text (debatable though).
    
    Other related efforts:
    - https://github.com/tldraw/tldraw/pull/3051
    - https://github.com/tldraw/tldraw/pull/2825
    
    Todo
    - [ ] figure out whether we should have a migration or not. This is what
    we discussed cc @ds300 and @SomeHats - and whether older clients would
    start messing up newer clients. The data becomes lossy if older clients
    overwrite with plaintext.
    
    <img width="427" alt="Screenshot 2024-12-09 at 14 43 51"
    src="https://github.com/user-attachments/assets/f9dddaee-bfd3-4746-8016-d4247e417e80">
    <img width="378" alt="Screenshot 2024-12-09 at 14 42 59"
    src="https://github.com/user-attachments/assets/95e016d3-ab4d-4d34-afd3-b3ef511d2d77">
    
    Current discussion list:
    - [x] positioning: discuss toolbar position (selection bounds vs cursor
    bounds, toolbar is going in center weirdly sometimes)
    - [x] artificial delay: latest updates make it feel slow/unresponsive?
    e.g. list toggle, changing selection
    - [x] keyboard selection: discuss toolbar logic around "mousing around"
    vs. being present when keyboard selecting (which is annoying)
    - [x] mobile: discuss concerns around mobile toolbar
    - [x] mobile, precision tap: discuss / rm tap into text (and sticky
    notes?) - disable precision editing on mobile
    - [x] discuss
    useContextualToolbar/useContextualToolbarPosition/ContextualToolbar/TldrawUiContextualToolbar
    example
    - [x] existing code: middle alignment for pasted text - keep?
    - [x] existing code: should text replace the shape content when pasted?
    keep?
    - [x] discuss animation, we had it, nixed it, it's back again; why the
    0.08s animation? imperceptible?
    - [x] hide during camera move?
    - [x] short form content - hard to make a different selection b/c
    toolbar is in the way of content
    - [x] check 'overflow: hidden' on tl-text-input (update: this is needed
    to avoid scrollbars)
    - [x] decide on toolbar set: italic, underline, strikethrough, highlight
    - [x] labelColor w/ highlighted text - steve has a commit here to tweak
    highlighting
    
    todos:
    - [x] font rebuild (bold, randomization tweaks) - david looking into
    this
    
    check bugs raised:
    - [x] can't do selection on list item
    - [x] mobile: b/c of the blur/Done logic, doesn't work if you dbl-click
    on geo shape (it's a plaintext problem too)
    - [x] mobile: No cursor when using the text tool - specifically for the
    Text tool ‚Äî can't repro?
    - [x] VSCode html pasting, whitespace issue?
    - [x] Link toolbar make it extend to the widest size of the current tool
    set
    - [x] code has mutual exclusivity (this is a design choice by the Code
    plugin - we could fork)
    - [x] Text is copied to the clipboard with paragraphs rather than line
    breaks.
    - [x] multi-line plaintext for arrows busted
    
    nixed/outdated
    - [ ] ~link: on mobile should be in modal?~
    - [ ] ~link: back button?~
    - [ ] ~list button toggling? (can't repro)~
    - [ ] ~double/triple-clicking is now wonky with the new logic~
    - [ ] ~move blur() code into useEditableRichText - for Done on iOS~
    - [ ] ~toolbar when shape is rotated~
    - [ ] ~"The "isMousingDown" logic doesn't work, the events aren't
    reaching the window. Not sure how we get those from the editor element."
    (can't repro?)~
    - [ ] ~toolbar position bug when toggling code on and off (can't
    repro?)~
    - [ ] ~some issue around "Something's up with the initial size
    calculated from the text selection bounds."~
    - [ ] ~mobile: Context bar still visible out if user presses "Done" to
    end editing~
    - [ ] ~mobile: toolbar when switching between text fields~
    
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [x] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Test plan
    
    1. TODO: write a bunch more tests
    
    - [x] Unit tests
    - [x] End to end tests
    
    ### Release notes
    
    - Rich text using ProseMirror as a first-class supported option in the
    Editor.
    
    ---------
    
    Co-authored-by: huppy-bot[bot] <128400622+huppy-bot[bot]@users.noreply.github.com>
    Co-authored-by: alex <alex@dytry.ch>
    Co-authored-by: David Sheldrick <d.j.sheldrick@gmail.com>
    Co-authored-by: Steve Ruiz <steveruizok@gmail.com>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index d9dc7dc75..80a4635c0 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -90,7 +90,12 @@ export { LineShapeTool } from './lib/shapes/line/LineShapeTool'
 export { LineShapeUtil } from './lib/shapes/line/LineShapeUtil'
 export { NoteShapeTool } from './lib/shapes/note/NoteShapeTool'
 export { NoteShapeUtil, type NoteShapeOptions } from './lib/shapes/note/NoteShapeUtil'
-export { TextLabel, type TextLabelProps } from './lib/shapes/shared/TextLabel'
+export {
+	PlainTextLabel,
+	TextLabel,
+	type PlainTextLabelProps,
+} from './lib/shapes/shared/PlainTextLabel'
+export { RichTextLabel, type RichTextLabelProps } from './lib/shapes/shared/RichTextLabel'
 export {
 	getCropBox,
 	getDefaultCrop,
@@ -105,13 +110,22 @@ export {
 	STROKE_SIZES,
 	TEXT_PROPS,
 } from './lib/shapes/shared/default-shape-constants'
+export {
+	DefaultFontFaces,
+	allDefaultFontFaces,
+	type TLDefaultFont,
+	type TLDefaultFonts,
+} from './lib/shapes/shared/defaultFonts'
 export { useDefaultColorTheme } from './lib/shapes/shared/useDefaultColorTheme'
-export { useEditableText } from './lib/shapes/shared/useEditableText'
+export { useEditablePlainText, useEditableText } from './lib/shapes/shared/useEditablePlainText'
+export { useEditableRichText } from './lib/shapes/shared/useEditableRichText'
 export {
 	useAsset,
 	useImageOrVideoAsset,
 	type UseImageOrVideoAssetOptions,
 } from './lib/shapes/shared/useImageOrVideoAsset'
+export { PlainTextArea } from './lib/shapes/text/PlainTextArea'
+export { RichTextArea, type TextAreaProps } from './lib/shapes/text/RichTextArea'
 export { TextShapeTool } from './lib/shapes/text/TextShapeTool'
 export { TextShapeUtil, type TextShapeOptions } from './lib/shapes/text/TextShapeUtil'
 export { VideoShapeUtil } from './lib/shapes/video/VideoShapeUtil'
@@ -227,6 +241,14 @@ export {
 	type TLUiStylePanelContentProps,
 	type ThemeStylePickerSetProps,
 } from './lib/ui/components/StylePanel/DefaultStylePanelContent'
+export {
+	DefaultRichTextToolbar,
+	type TLUiRichTextToolbarProps,
+} from './lib/ui/components/Toolbar/DefaultRichTextToolbar'
+export {
+	DefaultRichTextToolbarContent,
+	type DefaultRichTextToolbarContentProps,
+} from './lib/ui/components/Toolbar/DefaultRichTextToolbarContent'
 export {
 	DefaultToolbar,
 	type DefaultToolbarProps,
@@ -340,6 +362,10 @@ export {
 	TldrawUiButtonPicker,
 	type TLUiButtonPickerProps,
 } from './lib/ui/components/primitives/TldrawUiButtonPicker'
+export {
+	TldrawUiContextualToolbar,
+	type TLUiContextualToolbarProps,
+} from './lib/ui/components/primitives/TldrawUiContextualToolbar'
 export {
 	TldrawUiDialogBody,
 	TldrawUiDialogCloseButton,
@@ -458,7 +484,6 @@ export { useCollaborationStatus, useShowCollaborationUi } from './lib/ui/hooks/u
 export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'
-export { usePreloadAssets } from './lib/ui/hooks/usePreloadAssets'
 export { useReadonly } from './lib/ui/hooks/useReadonly'
 export { useRelevantStyles } from './lib/ui/hooks/useRelevantStyles'
 export {
@@ -490,6 +515,14 @@ export {
 	setDefaultEditorAssetUrls,
 	type TLEditorAssetUrls,
 } from './lib/utils/static-assets/assetUrls'
+export {
+	defaultAddFontsFromNode,
+	renderHtmlFromRichText,
+	renderHtmlFromRichTextForMeasurement,
+	renderPlaintextFromRichText,
+	renderRichTextFromHTML,
+	tipTapDefaultExtensions,
+} from './lib/utils/text/richText'
 export { truncateStringWithEllipsis } from './lib/utils/text/text'
 export {
 	TLV1AlignStyle,

commit 92d3adc40d68d20f5ba5a1cd50bb3cf0ce49def8
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Wed Mar 19 17:37:00 2025 +0000

    rich text: add RichTextSVG to exports (#5700)
    
    this should have been exported, it's an oversight
    
    ### Change type
    
    - [x] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Add `RichTextSVG` to the exports.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 80a4635c0..92ba398fb 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -95,7 +95,12 @@ export {
 	TextLabel,
 	type PlainTextLabelProps,
 } from './lib/shapes/shared/PlainTextLabel'
-export { RichTextLabel, type RichTextLabelProps } from './lib/shapes/shared/RichTextLabel'
+export {
+	RichTextLabel,
+	RichTextSVG,
+	type RichTextLabelProps,
+	type RichTextSVGProps,
+} from './lib/shapes/shared/RichTextLabel'
 export {
 	getCropBox,
 	getDefaultCrop,

commit 72b63fdade8bdd75d1254d67eaa61bad321f5eda
Author: Steve Ruiz <steveruizok@gmail.com>
Date:   Mon Mar 24 12:13:03 2025 +0000

    Add Frame colors (#5283)
    
    This PR adds an editor option to enable frame colors.
    
    When enabled:
    
    <img width="1758" alt="image"
    src="https://github.com/user-attachments/assets/a69d9359-9c58-48be-8248-055ca0033cac"
    />
    <img width="1728" alt="image"
    src="https://github.com/user-attachments/assets/9c0c0ab0-bb82-4a0a-ba37-90b105746827"
    />
    
    This PR also:
    
    - fixes a bug with the minimum size of frame headings
    - fixes a bug with geometry on rotated frames
    - tightens up the size of frame headings
    
    ### Change type
    
    - [x] `bugfix`
    - [ ] `improvement`
    - [x] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Test plan
    
    1. Visit the Frame colors example.
    2. Create frames
    
    ### Release notes
    
    - Added `FrameShapeUtil.options.showColors` option to display colors for
    frames.
    
    ---------
    
    Co-authored-by: huppy-bot[bot] <128400622+huppy-bot[bot]@users.noreply.github.com>
    Co-authored-by: alex <alex@dytry.ch>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 92ba398fb..7615310c1 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -77,7 +77,7 @@ export { DrawShapeTool } from './lib/shapes/draw/DrawShapeTool'
 export { DrawShapeUtil, type DrawShapeOptions } from './lib/shapes/draw/DrawShapeUtil'
 export { EmbedShapeUtil } from './lib/shapes/embed/EmbedShapeUtil'
 export { FrameShapeTool } from './lib/shapes/frame/FrameShapeTool'
-export { FrameShapeUtil } from './lib/shapes/frame/FrameShapeUtil'
+export { FrameShapeUtil, type FrameShapeOptions } from './lib/shapes/frame/FrameShapeUtil'
 export { GeoShapeTool } from './lib/shapes/geo/GeoShapeTool'
 export { GeoShapeUtil } from './lib/shapes/geo/GeoShapeUtil'
 export { HighlightShapeTool } from './lib/shapes/highlight/HighlightShapeTool'

commit c4570c603c42eef07ef8d2c506460fab9279e1a9
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Fri Mar 28 13:25:04 2025 +0000

    a11y: add a live region to announce selected tools (#5634)
    
    Starts improving our voiceover, starting with the toolbar which was
    crap.
    This follows the toasts pattern we have, since this is, in a way, a
    notification of what's happening on the screen, especially when
    selecting something using a hotkey instead of using the mouse pointer.
    
    
    https://github.com/user-attachments/assets/95f7551a-e891-4c5a-bf93-784b86fe618f
    
    related issue https://github.com/tldraw/tldraw/issues/5215
    
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Adds better voiceover support when selecting an action (a11y)

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 7615310c1..6a1c44560 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,6 +2,7 @@
 
 import { registerTldrawLibraryVersion } from '@tldraw/editor'
 export { usePrefersReducedMotion } from './lib/shapes/shared/usePrefersReducedMotion'
+export { DefaultA11yAnnouncer } from './lib/ui/components/A11y'
 export { ColorSchemeMenu } from './lib/ui/components/ColorSchemeMenu'
 export { DefaultDialogs } from './lib/ui/components/Dialogs'
 export { DefaultToasts } from './lib/ui/components/Toasts'
@@ -17,8 +18,6 @@ export {
 	TldrawUiMenuToolItem,
 	type TLUiMenuToolItemProps,
 } from './lib/ui/components/primitives/menus/TldrawUiMenuToolItem'
-export { TldrawUiDialogsProvider, type TLUiDialogsProviderProps } from './lib/ui/context/dialogs'
-export { TldrawUiToastsProvider, type TLUiToastsProviderProps } from './lib/ui/context/toasts'
 export { TldrawUiTranslationProvider } from './lib/ui/hooks/useTranslation/useTranslation'
 // eslint-disable-next-line local/no-export-star
 export * from '@tldraw/editor'
@@ -439,6 +438,14 @@ export {
 	TldrawUiContextProvider,
 	type TLUiContextProviderProps,
 } from './lib/ui/context/TldrawUiContextProvider'
+export {
+	TldrawUiA11yProvider,
+	useA11y,
+	type A11yPriority,
+	type A11yProviderProps,
+	type TLUiA11y,
+	type TLUiA11yContextType,
+} from './lib/ui/context/a11y'
 export {
 	unwrapLabel,
 	useActions,
@@ -459,10 +466,12 @@ export {
 	type TLUiComponentsProviderProps,
 } from './lib/ui/context/components'
 export {
+	TldrawUiDialogsProvider,
 	useDialogs,
 	type TLUiDialog,
 	type TLUiDialogProps,
 	type TLUiDialogsContextType,
+	type TLUiDialogsProviderProps,
 } from './lib/ui/context/dialogs'
 export {
 	TldrawUiEventsProvider,
@@ -475,11 +484,13 @@ export {
 	type TLUiEventSource,
 } from './lib/ui/context/events'
 export {
+	TldrawUiToastsProvider,
 	useToasts,
 	type AlertSeverity,
 	type TLUiToast,
 	type TLUiToastAction,
 	type TLUiToastsContextType,
+	type TLUiToastsProviderProps,
 } from './lib/ui/context/toasts'
 export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
 export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'

commit a50d3f992e0d41d8af2c64062c01e5c66329ee30
Author: budatl <buda@tldraw.com>
Date:   Mon Apr 7 14:00:28 2025 +0100

    Rename useIsMultiplayer.ts to useCollaborationStatus  [#5833] (#5835)
    
    This PR addresses [#5833] by renaming the useIsMultiplayer hook to
    useCollaborationStatus, providing a more descriptive and accurate name
    for the functionality.
    
    The term "multiplayer" was overly broad and less aligned with how the
    hook is actually used. useCollaborationStatus more accurately conveys
    the intent, improving code readability and consistency.
    
    
    Changes:
    
    Renamed hook file:
    useIsMultiplayer.ts ‚Üí useCollaborationStatus.ts
    
    Updated all imports and usage references in:
    - src/index.ts
    - ContextMenu/DefaultContextMenuContent.tsx
    - KeyboardShortcutsDialog/DefaultKeyboardShortcutsDialogContent.tsx
    - TopPanel/DefaultTopPanel.tsx
    - context/actions.tsx
    - context/components.tsx
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Test plan
    
    1. Create a shape...
    2.
    
    - [ ] Unit tests
    - [ ] End to end tests
    
    ### Release notes
    Renamed the useIsMultiplayer hook to useCollaborationStatus for better
    clarity and consistency around naming related to collaboration features.
    This affects internal imports only ‚Äî no changes required for SDK
    consumers.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 6a1c44560..74dd88c79 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -494,9 +494,12 @@ export {
 } from './lib/ui/context/toasts'
 export { useCanRedo, useCanUndo } from './lib/ui/hooks/menu-hooks'
 export { useMenuClipboardEvents, useNativeClipboardEvents } from './lib/ui/hooks/useClipboardEvents'
+export {
+	useCollaborationStatus,
+	useShowCollaborationUi,
+} from './lib/ui/hooks/useCollaborationStatus'
 export { useCopyAs } from './lib/ui/hooks/useCopyAs'
 export { useExportAs } from './lib/ui/hooks/useExportAs'
-export { useCollaborationStatus, useShowCollaborationUi } from './lib/ui/hooks/useIsMultiplayer'
 export { useKeyboardShortcuts } from './lib/ui/hooks/useKeyboardShortcuts'
 export { useLocalStorageState } from './lib/ui/hooks/useLocalStorageState'
 export { useMenuIsOpen } from './lib/ui/hooks/useMenuIsOpen'

commit 4ecb34d3434dbd9ad3119d4dfc66b7af4e598faf
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Mon Apr 7 22:05:44 2025 +0100

    a11y: announce shapes as they're visited (#5773)
    
    Building off of https://github.com/tldraw/tldraw/pull/5634 and
    https://github.com/tldraw/tldraw/pull/5761 this is adding a11y live text
    to be read aloud when visiting a shape.
    
    We add an overridable method for shapes to customize this called
    `getAriaLiveText`.
    Furthermore, we lay the groundwork here to start letting media shapes
    have `altText`.
    Drive-by fix of `heart` being missing in `geo-styles` list.
    Also, drive-by fix of us calling our Image button "Asset" (what are we
    selling financial instruments here? :P) "Media" is a better word for
    this button, more human.
    
    Some of the i18n translation is funky. It's a shortcoming of our current
    system that we don't support interpolation :-/
    It sucks, and we'll revisit in the future.
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [x] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - a11y: announce shapes as they're visited
    
    ---------
    
    Co-authored-by: alex <alex@dytry.ch>

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 74dd88c79..1fe9b6585 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -2,7 +2,7 @@
 
 import { registerTldrawLibraryVersion } from '@tldraw/editor'
 export { usePrefersReducedMotion } from './lib/shapes/shared/usePrefersReducedMotion'
-export { DefaultA11yAnnouncer } from './lib/ui/components/A11y'
+export { DefaultA11yAnnouncer, useSelectedShapesAnnouncer } from './lib/ui/components/A11y'
 export { ColorSchemeMenu } from './lib/ui/components/ColorSchemeMenu'
 export { DefaultDialogs } from './lib/ui/components/Dialogs'
 export { DefaultToasts } from './lib/ui/components/Toasts'

commit 3d96c7b16a4873e8eae737a33f761c6fd3cf4c0b
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Fri Apr 11 11:01:03 2025 +0100

    rich text: export some of our custom extensions (#5874)
    
    Address some of the concerns in
    https://github.com/tldraw/tldraw/issues/5870
    
    ### Change type
    
    - [ ] `bugfix`
    - [ ] `improvement`
    - [ ] `feature`
    - [x] `api`
    - [ ] `other`
    
    ### Release notes
    
    - Export some of the custom rich text extensions we have by default to
    enable inclusion in custom extension lists.

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 1fe9b6585..3a45eb80e 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -535,6 +535,7 @@ export {
 	type TLEditorAssetUrls,
 } from './lib/utils/static-assets/assetUrls'
 export {
+	KeyboardShiftEnterTweakExtension,
 	defaultAddFontsFromNode,
 	renderHtmlFromRichText,
 	renderHtmlFromRichTextForMeasurement,
@@ -543,6 +544,7 @@ export {
 	tipTapDefaultExtensions,
 } from './lib/utils/text/richText'
 export { truncateStringWithEllipsis } from './lib/utils/text/text'
+export { TextDirection } from './lib/utils/text/textDirection'
 export {
 	TLV1AlignStyle,
 	TLV1AssetType,

commit 37377fbef46d63ba2e0677a2a2ed0086d3931d74
Author: Mime ƒåuvalo <mimecuvalo@gmail.com>
Date:   Fri Apr 25 17:40:34 2025 +0100

    a11y: make toolbars more compliant with keyboard navigation (#5872)
    
    The toolbars as they stand right now aren't set up right yet. To be
    compliant, they need to support left/right and setting tabIndex on items
    as you go.
    This requires quite a rework of the toolbars and their buttons.
    
    - [x] add aria-labels to toolbars
    - [x] zoom menu - dropdown
    - [x] zoom menu - keep focus when toggling
    - [x] main toolbar
    - [x] main overflow toolbar
    - [x] top-left toolbar
    - [x] style panel stuff
    - [x] toolbar extra menu
    - [x] loading screen
    - [x] contextual toolbar
    - [x] drive-by fix number shortcuts not working when toolbar selected
    - [x] going to need to override branding instead of tldraw
    - [x] add more aria-labels to a11y tree
    - [x] padding at top of style panel wtf
    - [x] slider left/right/top/bottom
    - [x] sub-menus
    - [x] check dotcom
    - [ ] escape should return back to the original spot
    
    ### Change type
    
    - [ ] `bugfix`
    - [x] `improvement`
    - [ ] `feature`
    - [ ] `api`
    - [ ] `other`
    
    ### Release notes
    
    - a11y: make toolbars more compliant with keyboard navigation

diff --git a/packages/tldraw/src/index.ts b/packages/tldraw/src/index.ts
index 3a45eb80e..585e4c40a 100644
--- a/packages/tldraw/src/index.ts
+++ b/packages/tldraw/src/index.ts
@@ -412,6 +412,16 @@ export {
 	type TLUiPopoverTriggerProps,
 } from './lib/ui/components/primitives/TldrawUiPopover'
 export { TldrawUiSlider, type TLUiSliderProps } from './lib/ui/components/primitives/TldrawUiSlider'
+export {
+	TldrawUiToolbar,
+	TldrawUiToolbarButton,
+	TldrawUiToolbarToggleGroup,
+	TldrawUiToolbarToggleItem,
+	type TLUiToolbarButtonProps,
+	type TLUiToolbarProps,
+	type TLUiToolbarToggleGroupProps,
+	type TLUiToolbarToggleItemProps,
+} from './lib/ui/components/primitives/TldrawUiToolbar'
 export {
 	TldrawUiMenuCheckboxItem,
 	type TLUiMenuCheckboxItemProps,

