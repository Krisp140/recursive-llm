
index 31d2c13e8..780c3938c 100644
--- a/react_packages_react-devtools-shared_src_devtools_store.js_expectedoutput.txt (expected):tmp/tmp92v43g5o_expected.txt	
+++ b/react_packages_react-devtools-shared_src_devtools_store.js_extracted.txt (actual):tmp/tmpol2r8hom_actual.txt	
@@ -587,7 +587,6 @@ export default class Store extends EventEmitter<{
     return element;
   }
 
-  // Returns a tuple of [id, index]
   getElementsWithErrorsAndWarnings(): ErrorAndWarningTuples {
     if (!this._shouldShowWarningsAndErrors) {
       return [];
@@ -789,12 +788,12 @@ export default class Store extends EventEmitter<{
 
   isInsideCollapsedSubTree(id: number): boolean {
     let current = this._idToElement.get(id);
-    while (current != null) {
+    while (current !== undefined) {
       if (current.parentID === 0) {
         return false;
       } else {
         current = this._idToElement.get(current.parentID);
-        if (current != null && current.isCollapsed) {
+        if (current !== undefined && current.isCollapsed) {
           return true;
         }
       }
@@ -843,7 +842,9 @@ export default class Store extends EventEmitter<{
               : currentElement.weight;
             const weightDelta = newWeight - oldWeight;
 
-            let parentElement = this._idToElement.get(currentElement.parentID);
+            let parentElement = this._idToElement.get(
+              currentElement.parentID,
+            );
             while (parentElement !== undefined) {
               parentElement.weight += weightDelta;
               if (parentElement.isCollapsed) {
@@ -867,7 +868,7 @@ export default class Store extends EventEmitter<{
       if (didMutate) {
         let weightAcrossRoots = 0;
         this._roots.forEach(rootID => {
-          const {weight} = ((this.getElementByID(rootID): any): Element);
+          const {weight} = this.getElementByID(rootID) || {weight: 0};
           weightAcrossRoots += weight;
         });
         this._weightAcrossRoots = weightAcrossRoots;
@@ -920,6 +921,9 @@ export default class Store extends EventEmitter<{
   }
 
   onBridgeNativeStyleEditorSupported: ({
+    isSupported,
+    validAttributes,
+  }: {
     isSupported: boolean,
     validAttributes: ?$ReadOnlyArray<string>,
   }) => void = ({isSupported, validAttributes}) => {
@@ -985,6 +989,8 @@ export default class Store extends EventEmitter<{
                 `Cannot add node "${id}" because a node with that id is already in the Store.`,
               ),
             );
+
+            break;
           }
 
           if (type === ElementTypeRoot) {
@@ -1001,21 +1007,11 @@ export default class Store extends EventEmitter<{
               (operations[i] & PROFILING_FLAG_TIMELINE_SUPPORT) !== 0;
             i++;
 
-            let supportsStrictMode = false;
-            let hasOwnerMetadata = false;
-
-            // If we don't know the bridge protocol, guess that we're dealing with the latest.
-            // If we do know it, we can take it into consideration when parsing operations.
-            if (
-              this._bridgeProtocol === null ||
-              this._bridgeProtocol.version >= 2
-            ) {
-              supportsStrictMode = operations[i] > 0;
-              i++;
+            const supportsStrictMode = operations[i] > 0;
+            i++;
 
-              hasOwnerMetadata = operations[i] > 0;
-              i++;
-            }
+            const hasOwnerMetadata = operations[i] > 0;
+            i++;
 
             this._roots = this._roots.concat(id);
             this._rootIDToRendererID.set(id, rendererID);
@@ -1033,6 +1029,7 @@ export default class Store extends EventEmitter<{
 
             this._idToElement.set(id, {
               children: [],
+              compiledWithForget: false,
               depth: -1,
               displayName: null,
               hocDisplayNames: null,
@@ -1044,7 +1041,6 @@ export default class Store extends EventEmitter<{
               parentID: 0,
               type,
               weight: 0,
-              compiledWithForget: false,
             });
 
             haveRootsChanged = true;
@@ -1091,6 +1087,7 @@ export default class Store extends EventEmitter<{
 
             const element: Element = {
               children: [],
+              compiledWithForget,
               depth: parentElement.depth + 1,
               displayName: displayNameWithoutHOCs,
               hocDisplayNames,
@@ -1102,7 +1099,6 @@ export default class Store extends EventEmitter<{
               parentID,
               type,
               weight: 1,
-              compiledWithForget,
             };
 
             this._idToElement.set(id, element);
@@ -1276,7 +1272,7 @@ export default class Store extends EventEmitter<{
               }
             }
           }
-          i += numChildren;
+          i = i + numChildren;
 
           if (__DEBUG__) {
             debug('Re-order', `Node ${id} children ${children.join(',')}`);
@@ -1463,37 +1459,12 @@ export default class Store extends EventEmitter<{
     this.emit('unsupportedRendererVersionDetected');
   };
 
-  onBridgeBackendVersion: (backendVersion: string) => void = backendVersion => {
-    this._backendVersion = backendVersion;
-    this.emit('backendVersion');
-  };
-
-  onBridgeProtocol: (bridgeProtocol: BridgeProtocol) => void =
-    bridgeProtocol => {
-      if (this._onBridgeProtocolTimeoutID !== null) {
-        clearTimeout(this._onBridgeProtocolTimeoutID);
-        this._onBridgeProtocolTimeoutID = null;
-      }
-
-      this._bridgeProtocol = bridgeProtocol;
-
-      if (bridgeProtocol.version !== currentBridgeProtocol.version) {
-        // Technically newer versions of the frontend can, at least for now,
-        // gracefully handle older versions of the backend protocol.
-        // So for now we don't need to display the unsupported dialog.
-      }
+  onBridgeBackendVersion: (backendVersion: string) => void =
+    backendVersion => {
+      this._backendVersion = backendVersion;
+      this.emit('backendVersion');
     };
 
-  onBridgeProtocolTimeout: () => void = () => {
-    this._onBridgeProtocolTimeoutID = null;
-
-    // If we timed out, that indicates the backend predates the bridge protocol,
-    // so we can set a fake version (0) to trigger the downgrade message.
-    this._bridgeProtocol = BRIDGE_PROTOCOL[0];
-
-    this.emit('unsupportedBridgeProtocolDetected');
-  };
-
   onSaveToClipboard: (text: string) => void = text => {
     withPermissionsCheck({permissions: ['clipboardWrite']}, () => copy(text))();
   };
@@ -1562,6 +1533,32 @@ export default class Store extends EventEmitter<{
     }
   }
 
+  onBridgeProtocol: (bridgeProtocol: BridgeProtocol) => void =
+    bridgeProtocol => {
+      if (this._onBridgeProtocolTimeoutID !== null) {
+        clearTimeout(this._onBridgeProtocolTimeoutID);
+        this._onBridgeProtocolTimeoutID = null;
+      }
+
+      this._bridgeProtocol = bridgeProtocol;
+
+      if (bridgeProtocol.version !== currentBridgeProtocol.version) {
+        // Technically newer versions of the frontend can, at least for now,
+        // gracefully handle older versions of the backend protocol.
+        // So for now we don't need to display the unsupported dialog.
+      }
+    };
+
+  onBridgeProtocolTimeout: () => void = () => {
+    this._onBridgeProtocolTimeoutID = null;
+
+    // If we timed out, that indicates the backend predates the bridge protocol,
+    // so we can set a fake version (0) to trigger the downgrade message.
+    this._bridgeProtocol = BRIDGE_PROTOCOL[0];
+
+    this.emit('unsupportedBridgeProtocolDetected');
+  };
+
   // The Store should never throw an Error without also emitting an event.
   // Otherwise Store errors will be invisible to users,
   // but the downstream errors they cause will be reported as bugs.
