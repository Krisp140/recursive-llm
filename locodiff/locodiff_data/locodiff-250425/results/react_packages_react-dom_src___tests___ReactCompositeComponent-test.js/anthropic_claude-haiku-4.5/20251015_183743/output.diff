
index 52bccce28..af6d52158 100644
--- a/react_packages_react-dom_src___tests___ReactCompositeComponent-test.js_expectedoutput.txt (expected):tmp/tmp93sc5efg_expected.txt	
+++ b/react_packages_react-dom_src___tests___ReactCompositeComponent-test.js_extracted.txt (actual):tmp/tmp7eflmyvh_actual.txt	
@@ -242,34 +242,24 @@ describe('ReactCompositeComponent', () => {
       }
     }
 
-    function refFn1(ref) {
-      instance1 = ref;
-    }
-
-    function refFn2(ref) {
-      instance2 = ref;
-    }
-
-    function refFn3(ref) {
-      instance3 = ref;
-    }
-
     let instance1;
     let instance2;
     let instance3;
     const root = ReactDOMClient.createRoot(document.createElement('div'));
     await act(() => {
-      root.render(<Component ref={refFn1} />);
+      root.render(<Component ref={ref => (instance1 = ref)} />);
     });
     expect(instance1.props).toEqual({prop: 'testKey'});
 
     await act(() => {
-      root.render(<Component ref={refFn2} prop={undefined} />);
+      root.render(
+        <Component ref={ref => (instance2 = ref)} prop={undefined} />,
+      );
     });
     expect(instance2.props).toEqual({prop: 'testKey'});
 
     await act(() => {
-      root.render(<Component ref={refFn3} prop={null} />);
+      root.render(<Component ref={ref => (instance3 = ref)} prop={null} />);
     });
     expect(instance3.props).toEqual({prop: null});
   });
@@ -827,6 +817,7 @@ describe('ReactCompositeComponent', () => {
 
     class Foo extends React.Component {
       constructor(props) {
+        super(props);
         const _props = {idx: props.idx + '!'};
         super(_props);
       }
@@ -875,12 +866,6 @@ describe('ReactCompositeComponent', () => {
 
     const container = document.createElement('div');
 
-    const setRef = ref => {
-      if (ref) {
-        app = ref;
-      }
-    };
-
     const root = ReactDOMClient.createRoot(container);
     await expect(async () => {
       await act(() => {
@@ -891,6 +876,12 @@ describe('ReactCompositeComponent', () => {
       });
     }).rejects.toThrow();
     expect(count).toBe(1);
+
+    const setRef = ref => {
+      if (ref) {
+        app = ref;
+      }
+    };
   });
 
   it('prepares new child before unmounting old', async () => {
@@ -1139,7 +1130,7 @@ describe('ReactCompositeComponent', () => {
         };
       }
 
-      UNSAFE_componentWillMount() {
+      componentDidMount() {
         instance = this;
       }
 
@@ -1200,7 +1191,7 @@ describe('ReactCompositeComponent', () => {
     ]);
   });
 
-  it('should warn about reassigning this.props while rendering', () => {
+  it('should warn about reassigning this.props while rendering', async () => {
     class Bad extends React.Component {
       componentDidMount() {}
       componentDidUpdate() {}
